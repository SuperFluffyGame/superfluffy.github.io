import{S as oe,i as ae,s as fe,k as C,a as D,l as E,m as I,c as P,h as m,n as k,p as ge,b as O,G as p,J as ee,a0 as Ye,f as G,g as H,t as N,d as J,a1 as ze,a2 as De,K as Ne,A as q,_ as Pe,$ as ke,q as $,r as M,u as W,a3 as Ve,o as Oe,v as K,w as R,x as j,y as A,M as ce,H as we,N as Fe,O as Te}from"../../../chunks/index-18b70ca5.js";import{G as U,b as B,e as T,s as We,r as Ue,f as re,h as te,S as Xe,C as qe,c as He,g as $e,a as Je,n as Ke,B as Re,M as je,d as Me}from"../../../chunks/SidebarLayout-e35b4d0b.js";import{c as ye}from"../../../chunks/singletons-0556e34e.js";const Ae=""+new URL("../../../assets/red_mine-cc7afd62.jpg",import.meta.url).href,Qe=""+new URL("../../../assets/red_flag-cf5f7b44.jpg",import.meta.url).href,Be=(i,e)=>{var u,a;if(i.state!==U.Playing)return;const s=i.board[e];if(s.state===B.Flagged)return;let t=e%i.width,l=Math.floor(e/i.height);if(s.state=B.Opened,i.firstMove){const r=[];for(let f=0;f<9;f++){const d=f%3-1,o=Math.floor(f/3)-1,c=(l+o)*i.width+(t+d);r.push(c)}for(let f=0;f<9;f++){const d=f%3-1,o=Math.floor(f/3)-1,c=(l+o)*i.width+(t+d),h=i.board[c];(h==null?void 0:h.type)===T.Mine&&(h.type=T.Empty,We(i,r))}Ue(i)}if(i.firstMove=!1,s.type===T.Empty&&s.numNeighborMines===0)for(let r=0;r<9;r++){const f=r%3-1,d=Math.floor(r/3)-1,o=t+f,c=l+d;if(o<0||o>=i.width||c<0||c>=i.height||f===0&&d===0)continue;const h=c*i.width+o;((a=(u=i.board)==null?void 0:u[h])==null?void 0:a.state)===B.Closed&&Be(i,h)}if(s.type===T.Mine){i.state=U.Lost,i.lostToCell=e;for(let r=0;r<i.width*i.height;r++){let f=i.board[r];f.type===T.Mine&&(f.state=B.Opened)}}let n=!0;for(let r=0;r<i.width*i.height;r++)i.board[r].type!==T.Mine&&i.board[r].state!==B.Opened&&(n=!1);n&&(i.state=U.Won)},Ze=(i,e)=>{let s=i.board[e];s.state===B.Closed?s.state=B.Flagged:s.state===B.Flagged&&(s.state=B.Closed)};function xe(i){let e=i[0].numNeighborMines+"",s;return{c(){s=$(e)},l(t){s=M(t,e)},m(t,l){O(t,s,l)},p(t,l){l&1&&e!==(e=t[0].numNeighborMines+"")&&W(s,e)},d(t){t&&m(s)}}}function et(i){let e,s;return{c(){e=C("img"),this.h()},l(t){e=E(t,"IMG",{alt:!0,src:!0,class:!0}),this.h()},h(){k(e,"alt","M"),Ne(e.src,s=Ae)||k(e,"src",s),k(e,"class","svelte-wuxr37")},m(t,l){O(t,e,l)},p:q,d(t){t&&m(e)}}}function Ce(i){let e,s,t;return{c(){e=C("div"),this.h()},l(l){e=E(l,"DIV",{class:!0}),I(e).forEach(m),this.h()},h(){k(e,"class","cover svelte-wuxr37")},m(l,n){O(l,e,n),t=!0},i(l){t||(s&&s.end(1),t=!0)},o(l){l&&(s=De(e,re,{duration:100})),t=!1},d(l){l&&m(e),l&&s&&s.end()}}}function Ee(i){let e,s,t,l;return{c(){e=C("img"),this.h()},l(n){e=E(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ne(e.src,s=Qe)||k(e,"src",s),k(e,"alt","F"),k(e,"class","flag svelte-wuxr37")},m(n,u){O(n,e,u),l=!0},p:q,i(n){l||(n&&Pe(()=>{t||(t=ke(e,re,{duration:100},!0)),t.run(1)}),l=!0)},o(n){n&&(t||(t=ke(e,re,{duration:100},!1)),t.run(0)),l=!1},d(n){n&&m(e),n&&t&&t.end()}}}function tt(i){let e,s,t,l,n=`${i[1]}px`,u,a;function r(h,v){if(h[0].type===T.Mine)return et;if(h[0].numNeighborMines!==0)return xe}let f=r(i),d=f&&f(i),o=i[0].state!==B.Opened&&Ce(),c=i[0].state===B.Flagged&&Ee();return{c(){e=C("div"),d&&d.c(),s=D(),o&&o.c(),t=D(),c&&c.c(),this.h()},l(h){e=E(h,"DIV",{class:!0});var v=I(e);d&&d.l(v),s=P(v),o&&o.l(v),t=P(v),c&&c.l(v),v.forEach(m),this.h()},h(){k(e,"class",l="wrapper "+i[0].state+" svelte-wuxr37"),ge(e,"font-size",n,!1)},m(h,v){O(h,e,v),d&&d.m(e,null),p(e,s),o&&o.m(e,null),p(e,t),c&&c.m(e,null),u||(a=[ee(e,"click",i[2]),ee(e,"contextmenu",Ye(i[3]))],u=!0)},p(h,[v]){f===(f=r(h))&&d?d.p(h,v):(d&&d.d(1),d=f&&f(h),d&&(d.c(),d.m(e,s))),h[0].state!==B.Opened?o?v&1&&G(o,1):(o=Ce(),o.c(),G(o,1),o.m(e,t)):o&&(H(),N(o,1,1,()=>{o=null}),J()),h[0].state===B.Flagged?c?(c.p(h,v),v&1&&G(c,1)):(c=Ee(),c.c(),G(c,1),c.m(e,null)):c&&(H(),N(c,1,1,()=>{c=null}),J()),v&1&&l!==(l="wrapper "+h[0].state+" svelte-wuxr37")&&k(e,"class",l),v&2&&n!==(n=`${h[1]}px`)&&ge(e,"font-size",n,!1)},i(h){G(o),G(c)},o(h){N(o),N(c)},d(h){h&&m(e),d&&d.d(),o&&o.d(),c&&c.d(),u=!1,ze(a)}}}function lt(i,e,s){let{cell:t}=e,{index:l}=e;const n=r=>{r.button===0&&te.update(f=>(Be(f,l),f))},u=()=>{te.update(r=>(Ze(r,l),r))};let{fontSize:a}=e;return i.$$set=r=>{"cell"in r&&s(0,t=r.cell),"index"in r&&s(4,l=r.index),"fontSize"in r&&s(1,a=r.fontSize)},[t,a,n,u,l]}class st extends oe{constructor(e){super(),ae(this,e,lt,tt,fe,{cell:0,index:4,fontSize:1})}}function Ge(i,e,s){const t=i.slice();return t[4]=e[s],t[6]=s,t}function Ie(i){let e,s;return e=new st({props:{cell:i[4],index:i[6],fontSize:i[2]}}),{c(){K(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){j(e,t,l),s=!0},p(t,l){const n={};l&1&&(n.cell=t[4]),l&4&&(n.fontSize=t[2]),e.$set(n)},i(t){s||(G(e.$$.fragment,t),s=!0)},o(t){N(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function nt(i){let e,s,t,l=i[0].board,n=[];for(let a=0;a<l.length;a+=1)n[a]=Ie(Ge(i,l,a));const u=a=>N(n[a],1,1,()=>{n[a]=null});return{c(){e=C("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=E(a,"DIV",{class:!0,style:!0});var r=I(e);for(let f=0;f<n.length;f+=1)n[f].l(r);r.forEach(m),this.h()},h(){var a,r;k(e,"class","board svelte-h57i0c"),k(e,"style",s=`grid-template-columns: repeat(${(a=i[0].width)!=null?a:2}, 1fr); grid-template-rows: repeat(${(r=i[0].height)!=null?r:2}, 1fr);`)},m(a,r){O(a,e,r);for(let f=0;f<n.length;f+=1)n[f].m(e,null);i[3](e),t=!0},p(a,[r]){var f,d;if(r&5){l=a[0].board;let o;for(o=0;o<l.length;o+=1){const c=Ge(a,l,o);n[o]?(n[o].p(c,r),G(n[o],1)):(n[o]=Ie(c),n[o].c(),G(n[o],1),n[o].m(e,null))}for(H(),o=l.length;o<n.length;o+=1)u(o);J()}(!t||r&1&&s!==(s=`grid-template-columns: repeat(${(f=a[0].width)!=null?f:2}, 1fr); grid-template-rows: repeat(${(d=a[0].height)!=null?d:2}, 1fr);`))&&k(e,"style",s)},i(a){if(!t){for(let r=0;r<l.length;r+=1)G(n[r]);t=!0}},o(a){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)N(n[r]);t=!1},d(a){a&&m(e),Ve(n,a),i[3](null)}}}function it(i,e,s){let{game:t}=e,l,n=0;Oe(()=>{new ResizeObserver(()=>{s(2,n=l.clientWidth/t.width*.8)}).observe(l)});function u(a){ce[a?"unshift":"push"](()=>{l=a,s(1,l)})}return i.$$set=a=>{"game"in a&&s(0,t=a.game)},[t,l,n,u]}class rt extends oe{constructor(e){super(),ae(this,e,it,nt,fe,{game:0})}}function ot(i){let e,s;return{c(){e=C("p"),s=$("Loading...")},l(t){e=E(t,"P",{});var l=I(e);s=M(l,"Loading..."),l.forEach(m)},m(t,l){O(t,e,l),p(e,s)},p:q,i:q,o:q,d(t){t&&m(e)}}}function at(i){let e,s;return e=new rt({props:{game:i[2]}}),{c(){K(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){j(e,t,l),s=!0},p(t,l){const n={};l&4&&(n.game=t[2]),e.$set(n)},i(t){s||(G(e.$$.fragment,t),s=!0)},o(t){N(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function ft(i){let e,s,t,l,n,u=i[2].width+"",a,r,f=i[2].height+"",d,o,c=i[2].numMines+"",h,v;return{c(){e=C("h2"),s=$("You Lost!"),t=D(),l=C("p"),n=$("You lost on a "),a=$(u),r=$("x"),d=$(f),o=$(`\r
                        board with `),h=$(c),v=$(" mines.")},l(_){e=E(_,"H2",{});var b=I(e);s=M(b,"You Lost!"),b.forEach(m),t=P(_),l=E(_,"P",{});var w=I(l);n=M(w,"You lost on a "),a=M(w,u),r=M(w,"x"),d=M(w,f),o=M(w,`\r
                        board with `),h=M(w,c),v=M(w," mines."),w.forEach(m)},m(_,b){O(_,e,b),p(e,s),O(_,t,b),O(_,l,b),p(l,n),p(l,a),p(l,r),p(l,d),p(l,o),p(l,h),p(l,v)},p(_,b){b&4&&u!==(u=_[2].width+"")&&W(a,u),b&4&&f!==(f=_[2].height+"")&&W(d,f),b&4&&c!==(c=_[2].numMines+"")&&W(h,c)},d(_){_&&m(e),_&&m(t),_&&m(l)}}}function ct(i){let e,s,t,l,n,u=i[2].width+"",a,r,f=i[2].height+"",d,o,c=i[2].numMines+"",h,v;return{c(){e=C("h2"),s=$("You Won!"),t=D(),l=C("p"),n=$("Congratulations, you won on a "),a=$(u),r=$("x"),d=$(f),o=$(`\r
                        board with `),h=$(c),v=$(" mines.")},l(_){e=E(_,"H2",{});var b=I(e);s=M(b,"You Won!"),b.forEach(m),t=P(_),l=E(_,"P",{});var w=I(l);n=M(w,"Congratulations, you won on a "),a=M(w,u),r=M(w,"x"),d=M(w,f),o=M(w,`\r
                        board with `),h=M(w,c),v=M(w," mines."),w.forEach(m)},m(_,b){O(_,e,b),p(e,s),O(_,t,b),O(_,l,b),p(l,n),p(l,a),p(l,r),p(l,d),p(l,o),p(l,h),p(l,v)},p(_,b){b&4&&u!==(u=_[2].width+"")&&W(a,u),b&4&&f!==(f=_[2].height+"")&&W(d,f),b&4&&c!==(c=_[2].numMines+"")&&W(h,c)},d(_){_&&m(e),_&&m(t),_&&m(l)}}}function Se(i){let e,s,t;return s=new je({props:{game:i[2],showMines:!0}}),{c(){e=C("div"),K(s.$$.fragment),this.h()},l(l){e=E(l,"DIV",{class:!0});var n=I(e);R(s.$$.fragment,n),n.forEach(m),this.h()},h(){k(e,"class","mini-board svelte-vhtfvp")},m(l,n){O(l,e,n),j(s,e,null),t=!0},p(l,n){const u={};n&4&&(u.game=l[2]),s.$set(u)},i(l){t||(G(s.$$.fragment,l),t=!0)},o(l){N(s.$$.fragment,l),t=!1},d(l){l&&m(e),A(s)}}}function ut(i){let e,s,t,l,n,u,a,r,f,d,o,c,h,v,_,b,w,le,F,se,ne,Q,ie,ue;const de=[at,ot],V=[];function he(g,z){return g[2]?0:1}s=he(i),t=V[s]=de[s](i);function _e(g,z){var Y,L;if(((Y=g[2])==null?void 0:Y.state)===U.Won)return ct;if(((L=g[2])==null?void 0:L.state)===U.Lost)return ft}let X=_e(i),S=X&&X(i);function Le(g){i[5](g)}let pe={};i[1]!==void 0&&(pe.checked=i[1]),c=new qe({props:pe}),ce.push(()=>Fe(c,"checked",Le));let y=i[2]&&Se(i);return{c(){e=C("div"),t.c(),l=D(),n=C("dialog"),u=C("div"),S&&S.c(),a=D(),r=C("div"),f=C("p"),d=$("Keep Game"),o=D(),K(c.$$.fragment),v=D(),_=C("div"),b=C("button"),w=$("Back to Menu"),le=D(),F=C("button"),se=$("New Game"),ne=D(),y&&y.c(),this.h()},l(g){e=E(g,"DIV",{class:!0,slot:!0});var z=I(e);t.l(z),l=P(z),n=E(z,"DIALOG",{class:!0});var Y=I(n);u=E(Y,"DIV",{class:!0});var L=I(u);S&&S.l(L),a=P(L),r=E(L,"DIV",{class:!0});var Z=I(r);f=E(Z,"P",{class:!0});var me=I(f);d=M(me,"Keep Game"),me.forEach(m),o=P(Z),R(c.$$.fragment,Z),Z.forEach(m),v=P(L),_=E(L,"DIV",{class:!0});var x=I(_);b=E(x,"BUTTON",{class:!0});var be=I(b);w=M(be,"Back to Menu"),be.forEach(m),le=P(x),F=E(x,"BUTTON",{class:!0});var ve=I(F);se=M(ve,"New Game"),ve.forEach(m),x.forEach(m),L.forEach(m),ne=P(Y),y&&y.l(Y),Y.forEach(m),z.forEach(m),this.h()},h(){k(f,"class","svelte-vhtfvp"),k(r,"class","keep-game-wrapper svelte-vhtfvp"),k(b,"class","goto-menu"),k(F,"class","new-game"),k(_,"class","buttons-container-vertical svelte-vhtfvp"),k(u,"class","modal-main svelte-vhtfvp"),k(n,"class","aftergame-modal svelte-vhtfvp"),k(e,"class","wrapper svelte-vhtfvp"),k(e,"slot","content")},m(g,z){O(g,e,z),V[s].m(e,null),p(e,l),p(e,n),p(n,u),S&&S.m(u,null),p(u,a),p(u,r),p(r,f),p(f,d),p(r,o),j(c,r,null),p(u,v),p(u,_),p(_,b),p(b,w),p(_,le),p(_,F),p(F,se),p(n,ne),y&&y.m(n,null),i[6](n),Q=!0,ie||(ue=[ee(b,"click",i[4]),ee(F,"click",i[3])],ie=!0)},p(g,z){let Y=s;s=he(g),s===Y?V[s].p(g,z):(H(),N(V[Y],1,1,()=>{V[Y]=null}),J(),t=V[s],t?t.p(g,z):(t=V[s]=de[s](g),t.c()),G(t,1),t.m(e,l)),X===(X=_e(g))&&S?S.p(g,z):(S&&S.d(1),S=X&&X(g),S&&(S.c(),S.m(u,a)));const L={};!h&&z&2&&(h=!0,L.checked=g[1],Te(()=>h=!1)),c.$set(L),g[2]?y?(y.p(g,z),z&4&&G(y,1)):(y=Se(g),y.c(),G(y,1),y.m(n,null)):y&&(H(),N(y,1,1,()=>{y=null}),J())},i(g){Q||(G(t),G(c.$$.fragment,g),G(y),Q=!0)},o(g){N(t),N(c.$$.fragment,g),N(y),Q=!1},d(g){g&&m(e),V[s].d(),S&&S.d(),A(c),y&&y.d(),i[6](null),ie=!1,ze(ue)}}}function dt(i){let e,s;return e=new Xe({props:{$$slots:{content:[ut]},$$scope:{ctx:i}}}),{c(){K(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){j(e,t,l),s=!0},p(t,[l]){const n={};l&263&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){s||(G(e.$$.fragment,t),s=!0)},o(t){N(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function ht(i,e,s){let t,l;we(i,He,o=>s(7,t=o)),we(i,te,o=>s(2,l=o));let n;te.subscribe(o=>{var c;(o==null?void 0:o.state)!==U.Playing&&((c=n==null?void 0:n.showModal)==null||c.call(n))}),Oe(()=>{l===null?$e(`${ye}`):l.state!==U.Playing&&n.showModal()});let u=!0;const a=()=>{u||Me(t),Je(Ke(Re[l.width])),n.close()},r=()=>{u||Me(t),$e(`${ye}`),n.close()};function f(o){u=o,s(1,u)}function d(o){ce[o?"unshift":"push"](()=>{n=o,s(0,n)})}return[n,u,l,a,r,f,d]}class bt extends oe{constructor(e){super(),ae(this,e,ht,dt,fe,{})}}export{bt as default};
