import{S as re,i as ae,s as oe,k as G,a as O,l as E,m as N,c as V,h as m,n as v,b as L,G as p,J as ee,a0 as Le,f as C,g as X,t as q,d as H,K as Ce,a1 as qe,I as Ge,A as W,_ as Be,$ as pe,q as $,r as w,u as S,H as ne,e as me,a2 as Ye,v as J,w as K,x as A,y as R,o as De,L as Ee,M as Oe,N as Ve}from"../../../chunks/index-a63c78df.js";import{G as T,b as B,e as F,s as je,r as Fe,f as ie,h as z,S as Pe,C as Se,c as Te,g as be,a as Ue,n as We,B as Xe,M as He,d as ge}from"../../../chunks/SidebarLayout-fd9e7c74.js";import{c as ve}from"../../../chunks/singletons-04806306.js";const Je=""+new URL("../../../assets/red_mine-cc7afd62.jpg",import.meta.url).href,Ke=""+new URL("../../../assets/red_flag-cf5f7b44.jpg",import.meta.url).href,Ie=(n,e)=>{var c,f;if(n.state!==T.Playing)return;const s=n.board[e];if(s.state===B.Flagged)return;let l=e%n.width,t=Math.floor(e/n.height);if(s.state=B.Opened,n.firstMove){const a=[];for(let r=0;r<9;r++){console.log(s.type===F.Mine);const u=r%3-1,o=Math.floor(r/3)-1;a.push((t+o)*n.width+(l+u))}for(let r=0;r<9;r++){const u=r%3-1,o=Math.floor(r/3)-1,d=(t+o)*n.width+(l+u),h=n.board[d];(h==null?void 0:h.type)===F.Mine&&(h.type=F.Empty,je(n,a))}Fe(n)}if(n.firstMove=!1,s.type===F.Empty&&s.numNeighborMines===0)for(let a=0;a<9;a++){const r=a%3-1,u=Math.floor(a/3)-1,o=l+r,d=t+u;if(o<0||o>=n.width||d<0||d>=n.height||r===0&&u===0)continue;const h=d*n.width+o;((f=(c=n.board)==null?void 0:c[h])==null?void 0:f.state)===B.Closed&&Ie(n,h)}if(s.type===F.Mine){n.state=T.Lost,n.lostToCell=e;for(let a=0;a<n.width*n.height;a++){let r=n.board[a];r.type===F.Mine&&(r.state=B.Opened)}}let i=!0;for(let a=0;a<n.width*n.height;a++)n.board[a].type!==F.Mine&&n.board[a].state!==B.Opened&&(i=!1);i&&(n.state=T.Won)},Ae=(n,e)=>{let s=n.board[e];s.state===B.Closed?s.state=B.Flagged:s.state===B.Flagged&&(s.state=B.Closed)};function Re(n){let e=n[0].numNeighborMines+"",s;return{c(){s=$(e)},l(l){s=w(l,e)},m(l,t){L(l,s,t)},p(l,t){t&1&&e!==(e=l[0].numNeighborMines+"")&&S(s,e)},d(l){l&&m(s)}}}function ze(n){let e,s;return{c(){e=G("img"),this.h()},l(l){e=E(l,"IMG",{alt:!0,src:!0,class:!0}),this.h()},h(){v(e,"alt","M"),Ge(e.src,s=Je)||v(e,"src",s),v(e,"class","svelte-tjtrt9")},m(l,t){L(l,e,t)},p:W,d(l){l&&m(e)}}}function ke(n){let e,s,l;return{c(){e=G("div"),this.h()},l(t){e=E(t,"DIV",{class:!0}),N(e).forEach(m),this.h()},h(){v(e,"class","cover svelte-tjtrt9")},m(t,i){L(t,e,i),l=!0},i(t){l||(s&&s.end(1),l=!0)},o(t){t&&(s=qe(e,ie,{duration:100})),l=!1},d(t){t&&m(e),t&&s&&s.end()}}}function $e(n){let e,s,l,t;return{c(){e=G("img"),this.h()},l(i){e=E(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ge(e.src,s=Ke)||v(e,"src",s),v(e,"alt","F"),v(e,"class","flag svelte-tjtrt9")},m(i,c){L(i,e,c),t=!0},p:W,i(i){t||(i&&Be(()=>{l||(l=pe(e,ie,{duration:100},!0)),l.run(1)}),t=!0)},o(i){i&&(l||(l=pe(e,ie,{duration:100},!1)),l.run(0)),t=!1},d(i){i&&m(e),i&&l&&l.end()}}}function Qe(n){let e,s,l,t,i,c;function f(d,h){if(d[0].type===F.Mine)return ze;if(d[0].numNeighborMines!==0)return Re}let a=f(n),r=a&&a(n),u=n[0].state!==B.Opened&&ke(),o=n[0].state===B.Flagged&&$e();return{c(){e=G("div"),r&&r.c(),s=O(),u&&u.c(),l=O(),o&&o.c(),this.h()},l(d){e=E(d,"DIV",{class:!0});var h=N(e);r&&r.l(h),s=V(h),u&&u.l(h),l=V(h),o&&o.l(h),h.forEach(m),this.h()},h(){v(e,"class",t="wrapper "+n[0].state+" svelte-tjtrt9")},m(d,h){L(d,e,h),r&&r.m(e,null),p(e,s),u&&u.m(e,null),p(e,l),o&&o.m(e,null),i||(c=[ee(e,"click",n[1]),ee(e,"contextmenu",Le(n[2]))],i=!0)},p(d,[h]){a===(a=f(d))&&r?r.p(d,h):(r&&r.d(1),r=a&&a(d),r&&(r.c(),r.m(e,s))),d[0].state!==B.Opened?u?h&1&&C(u,1):(u=ke(),u.c(),C(u,1),u.m(e,l)):u&&(X(),q(u,1,1,()=>{u=null}),H()),d[0].state===B.Flagged?o?(o.p(d,h),h&1&&C(o,1)):(o=$e(),o.c(),C(o,1),o.m(e,null)):o&&(X(),q(o,1,1,()=>{o=null}),H()),h&1&&t!==(t="wrapper "+d[0].state+" svelte-tjtrt9")&&v(e,"class",t)},i(d){C(u),C(o)},o(d){q(u),q(o)},d(d){d&&m(e),r&&r.d(),u&&u.d(),o&&o.d(),i=!1,Ce(c)}}}function Ze(n,e,s){let{cell:l}=e,{index:t}=e;const i=f=>{f.button===0&&z.update(a=>(Ie(a,t),a))},c=()=>{z.update(f=>(Ae(f,t),f))};return n.$$set=f=>{"cell"in f&&s(0,l=f.cell),"index"in f&&s(3,t=f.index)},[l,i,c,t]}class xe extends re{constructor(e){super(),ae(this,e,Ze,Qe,oe,{cell:0,index:3})}}function we(n,e,s){const l=n.slice();return l[1]=e[s],l[3]=s,l}function et(n){let e;return{c(){e=$("Loading...")},l(s){e=w(s,"Loading...")},m(s,l){L(s,e,l)},p:W,i:W,o:W,d(s){s&&m(e)}}}function tt(n){let e,s,l=n[0].board,t=[];for(let c=0;c<l.length;c+=1)t[c]=Me(we(n,l,c));const i=c=>q(t[c],1,1,()=>{t[c]=null});return{c(){for(let c=0;c<t.length;c+=1)t[c].c();e=me()},l(c){for(let f=0;f<t.length;f+=1)t[f].l(c);e=me()},m(c,f){for(let a=0;a<t.length;a+=1)t[a].m(c,f);L(c,e,f),s=!0},p(c,f){if(f&1){l=c[0].board;let a;for(a=0;a<l.length;a+=1){const r=we(c,l,a);t[a]?(t[a].p(r,f),C(t[a],1)):(t[a]=Me(r),t[a].c(),C(t[a],1),t[a].m(e.parentNode,e))}for(X(),a=l.length;a<t.length;a+=1)i(a);H()}},i(c){if(!s){for(let f=0;f<l.length;f+=1)C(t[f]);s=!0}},o(c){t=t.filter(Boolean);for(let f=0;f<t.length;f+=1)q(t[f]);s=!1},d(c){Ye(t,c),c&&m(e)}}}function Me(n){let e,s;return e=new xe({props:{cell:n[1],index:n[3]}}),{c(){J(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,t){A(e,l,t),s=!0},p(l,t){const i={};t&1&&(i.cell=l[1]),e.$set(i)},i(l){s||(C(e.$$.fragment,l),s=!0)},o(l){q(e.$$.fragment,l),s=!1},d(l){R(e,l)}}}function lt(n){let e,s,l,t,i;const c=[tt,et],f=[];function a(r,u){return r[0]?0:1}return s=a(n),l=f[s]=c[s](n),{c(){e=G("div"),l.c(),this.h()},l(r){e=E(r,"DIV",{class:!0,style:!0});var u=N(e);l.l(u),u.forEach(m),this.h()},h(){var r,u,o,d;v(e,"class","board svelte-h57i0c"),v(e,"style",t=`grid-template-columns: repeat(${(u=(r=n[0])==null?void 0:r.width)!=null?u:2}, 1fr); grid-template-rows: repeat(${(d=(o=n[0])==null?void 0:o.height)!=null?d:2}, 1fr);`)},m(r,u){L(r,e,u),f[s].m(e,null),i=!0},p(r,[u]){var d,h,y,_;let o=s;s=a(r),s===o?f[s].p(r,u):(X(),q(f[o],1,1,()=>{f[o]=null}),H(),l=f[s],l?l.p(r,u):(l=f[s]=c[s](r),l.c()),C(l,1),l.m(e,null)),(!i||u&1&&t!==(t=`grid-template-columns: repeat(${(h=(d=r[0])==null?void 0:d.width)!=null?h:2}, 1fr); grid-template-rows: repeat(${(_=(y=r[0])==null?void 0:y.height)!=null?_:2}, 1fr);`))&&v(e,"style",t)},i(r){i||(C(l),i=!0)},o(r){q(l),i=!1},d(r){r&&m(e),f[s].d()}}}function st(n,e,s){let l;return ne(n,z,t=>s(0,l=t)),[l]}class nt extends re{constructor(e){super(),ae(this,e,st,lt,oe,{})}}function it(n){let e,s,l,t,i,c=n[2].width+"",f,a,r=n[2].height+"",u,o,d=n[2].numMines+"",h,y;return{c(){e=G("h2"),s=$("You Lost!"),l=O(),t=G("p"),i=$("You lost on a "),f=$(c),a=$("x"),u=$(r),o=$(`\r
                        board with `),h=$(d),y=$(" mines.")},l(_){e=E(_,"H2",{});var b=N(e);s=w(b,"You Lost!"),b.forEach(m),l=V(_),t=E(_,"P",{});var k=N(t);i=w(k,"You lost on a "),f=w(k,c),a=w(k,"x"),u=w(k,r),o=w(k,`\r
                        board with `),h=w(k,d),y=w(k," mines."),k.forEach(m)},m(_,b){L(_,e,b),p(e,s),L(_,l,b),L(_,t,b),p(t,i),p(t,f),p(t,a),p(t,u),p(t,o),p(t,h),p(t,y)},p(_,b){b&4&&c!==(c=_[2].width+"")&&S(f,c),b&4&&r!==(r=_[2].height+"")&&S(u,r),b&4&&d!==(d=_[2].numMines+"")&&S(h,d)},d(_){_&&m(e),_&&m(l),_&&m(t)}}}function rt(n){let e,s,l,t,i,c=n[2].width+"",f,a,r=n[2].height+"",u,o,d=n[2].numMines+"",h,y;return{c(){e=G("h2"),s=$("You Won!"),l=O(),t=G("p"),i=$("Congratulations, you won on a "),f=$(c),a=$("x"),u=$(r),o=$(`\r
                        board with `),h=$(d),y=$(" mines.")},l(_){e=E(_,"H2",{});var b=N(e);s=w(b,"You Won!"),b.forEach(m),l=V(_),t=E(_,"P",{});var k=N(t);i=w(k,"Congratulations, you won on a "),f=w(k,c),a=w(k,"x"),u=w(k,r),o=w(k,`\r
                        board with `),h=w(k,d),y=w(k," mines."),k.forEach(m)},m(_,b){L(_,e,b),p(e,s),L(_,l,b),L(_,t,b),p(t,i),p(t,f),p(t,a),p(t,u),p(t,o),p(t,h),p(t,y)},p(_,b){b&4&&c!==(c=_[2].width+"")&&S(f,c),b&4&&r!==(r=_[2].height+"")&&S(u,r),b&4&&d!==(d=_[2].numMines+"")&&S(h,d)},d(_){_&&m(e),_&&m(l),_&&m(t)}}}function ye(n){let e,s,l;return s=new He({props:{game:n[2],showMines:!0}}),{c(){e=G("div"),J(s.$$.fragment),this.h()},l(t){e=E(t,"DIV",{class:!0});var i=N(e);K(s.$$.fragment,i),i.forEach(m),this.h()},h(){v(e,"class","mini-board svelte-4buqi6")},m(t,i){L(t,e,i),A(s,e,null),l=!0},p(t,i){const c={};i&4&&(c.game=t[2]),s.$set(c)},i(t){l||(C(s.$$.fragment,t),l=!0)},o(t){q(s.$$.fragment,t),l=!1},d(t){t&&m(e),R(s)}}}function at(n){let e,s,l,t,i,c,f,a,r,u,o,d,h,y,_,b,k,P,te,le,Q,se,ce;s=new nt({});function fe(g,Y){var D,j;if(((D=g[2])==null?void 0:D.state)===T.Won)return rt;if(((j=g[2])==null?void 0:j.state)===T.Lost)return it}let U=fe(n),I=U&&U(n);function Ne(g){n[5](g)}let ue={};n[1]!==void 0&&(ue.checked=n[1]),o=new Se({props:ue}),Ee.push(()=>Oe(o,"checked",Ne));let M=n[2]&&ye(n);return{c(){e=G("div"),J(s.$$.fragment),l=O(),t=G("dialog"),i=G("div"),I&&I.c(),c=O(),f=G("div"),a=G("p"),r=$("Keep Game"),u=O(),J(o.$$.fragment),h=O(),y=G("div"),_=G("button"),b=$("Back to Menu"),k=O(),P=G("button"),te=$("New Game"),le=O(),M&&M.c(),this.h()},l(g){e=E(g,"DIV",{class:!0,slot:!0});var Y=N(e);K(s.$$.fragment,Y),l=V(Y),t=E(Y,"DIALOG",{class:!0});var D=N(t);i=E(D,"DIV",{class:!0});var j=N(i);I&&I.l(j),c=V(j),f=E(j,"DIV",{class:!0});var Z=N(f);a=E(Z,"P",{class:!0});var de=N(a);r=w(de,"Keep Game"),de.forEach(m),u=V(Z),K(o.$$.fragment,Z),Z.forEach(m),h=V(j),y=E(j,"DIV",{class:!0});var x=N(y);_=E(x,"BUTTON",{class:!0});var _e=N(_);b=w(_e,"Back to Menu"),_e.forEach(m),k=V(x),P=E(x,"BUTTON",{class:!0});var he=N(P);te=w(he,"New Game"),he.forEach(m),x.forEach(m),j.forEach(m),le=V(D),M&&M.l(D),D.forEach(m),Y.forEach(m),this.h()},h(){v(a,"class","svelte-4buqi6"),v(f,"class","keep-game-wrapper svelte-4buqi6"),v(_,"class","goto-menu"),v(P,"class","new-game"),v(y,"class","buttons-container-vertical svelte-4buqi6"),v(i,"class","modal-main svelte-4buqi6"),v(t,"class","aftergame-modal svelte-4buqi6"),v(e,"class","wrapper svelte-4buqi6"),v(e,"slot","content")},m(g,Y){L(g,e,Y),A(s,e,null),p(e,l),p(e,t),p(t,i),I&&I.m(i,null),p(i,c),p(i,f),p(f,a),p(a,r),p(f,u),A(o,f,null),p(i,h),p(i,y),p(y,_),p(_,b),p(y,k),p(y,P),p(P,te),p(t,le),M&&M.m(t,null),n[6](t),Q=!0,se||(ce=[ee(_,"click",n[4]),ee(P,"click",n[3])],se=!0)},p(g,Y){U===(U=fe(g))&&I?I.p(g,Y):(I&&I.d(1),I=U&&U(g),I&&(I.c(),I.m(i,c)));const D={};!d&&Y&2&&(d=!0,D.checked=g[1],Ve(()=>d=!1)),o.$set(D),g[2]?M?(M.p(g,Y),Y&4&&C(M,1)):(M=ye(g),M.c(),C(M,1),M.m(t,null)):M&&(X(),q(M,1,1,()=>{M=null}),H())},i(g){Q||(C(s.$$.fragment,g),C(o.$$.fragment,g),C(M),Q=!0)},o(g){q(s.$$.fragment,g),q(o.$$.fragment,g),q(M),Q=!1},d(g){g&&m(e),R(s),I&&I.d(),R(o),M&&M.d(),n[6](null),se=!1,Ce(ce)}}}function ot(n){let e,s;return e=new Pe({props:{$$slots:{content:[at]},$$scope:{ctx:n}}}),{c(){J(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,t){A(e,l,t),s=!0},p(l,[t]){const i={};t&263&&(i.$$scope={dirty:t,ctx:l}),e.$set(i)},i(l){s||(C(e.$$.fragment,l),s=!0)},o(l){q(e.$$.fragment,l),s=!1},d(l){R(e,l)}}}function ct(n,e,s){let l,t;ne(n,Te,o=>s(7,l=o)),ne(n,z,o=>s(2,t=o));let i;z.subscribe(o=>{var d;(o==null?void 0:o.state)!==T.Playing&&((d=i==null?void 0:i.showModal)==null||d.call(i))}),De(()=>{t===null?be(`${ve}`):t.state!==T.Playing&&i.showModal()});let c=!0;const f=()=>{c||ge(l),Ue(We(Xe[t.width])),i.close()},a=()=>{c||ge(l),be(`${ve}`),i.close()};function r(o){c=o,s(1,c)}function u(o){Ee[o?"unshift":"push"](()=>{i=o,s(0,i)})}return[i,c,t,f,a,r,u]}class _t extends re{constructor(e){super(),ae(this,e,ct,ot,oe,{})}}export{_t as default};
