import{R as Oe,S as se,i as ie,s as ne,k as $,a as D,l as M,m as q,c as V,h as p,n as b,b as E,G as h,J,T as Se,f as k,g as R,t as N,d as H,K as je,U as Ye,I as ue,A as W,V as Be,W as le,q as y,r as C,u as T,H as ce,e as ge,X as Pe,v as K,w as X,x as A,y as z,Y as fe,Z as ve,_ as ke,$ as Te,a0 as we,o as Fe,Q as Le,a1 as Ue,a2 as We}from"../../../chunks/index-2c492789.js";import{G as F,C as B,b as P,s as Re,r as He,e as Q,S as Je,c as Ke,g as $e,a as Xe,n as Ae,B as ze,M as Qe,d as Me}from"../../../chunks/SidebarLayout-4566bcb6.js";import{c as ye}from"../../../chunks/singletons-f7e93100.js";const Ze=""+new URL("../../../assets/red_mine-cc7afd62.jpg",import.meta.url).href,xe=""+new URL("../../../assets/red_flag-cf5f7b44.jpg",import.meta.url).href;function Z(i,{delay:e=0,duration:s=400,easing:l=Oe}={}){const t=+getComputedStyle(i).opacity;return{delay:e,duration:s,easing:l,css:n=>`opacity: ${n*t}`}}const De=(i,e)=>{if(i.state!==F.Playing)return;const s=i.board[e];if(s.state===B.Flagged)return;let l=e%i.width,t=Math.floor(e/i.height);if(s.state=B.Opened,s.type===P.Mine&&i.firstMove&&(Re(i),s.type=P.Empty,He(i)),s.type!==P.Mine&&s.numNeighborMines===0)for(let a=0;a<9;a++){const c=Math.floor(a/3)-1,u=a%3-1,r=l+c,f=t+u;if(r<0||r>=i.width||f<0||f>=i.height||c===0&&u===0)continue;const o=f*i.width+r;i.board[o].state===B.Closed&&De(i,o)}if(s.type===P.Mine){i.state=F.Lost,i.lostToCell=e;for(let a=0;a<i.width*i.height;a++){let c=i.board[a];c.type===P.Mine&&(c.state=B.Opened)}}let n=!0;for(let a=0;a<i.width*i.height;a++)i.board[a].type!==P.Mine&&i.board[a].state!==B.Opened&&(n=!1);n&&(i.state=F.Won),i.firstMove=!1},et=(i,e)=>{let s=i.board[e];s.state===B.Closed?s.state=B.Flagged:s.state===B.Flagged&&(s.state=B.Closed)};function tt(i){let e=i[0].numNeighborMines+"",s;return{c(){s=y(e)},l(l){s=C(l,e)},m(l,t){E(l,s,t)},p(l,t){t&1&&e!==(e=l[0].numNeighborMines+"")&&T(s,e)},d(l){l&&p(s)}}}function lt(i){let e,s;return{c(){e=$("img"),this.h()},l(l){e=M(l,"IMG",{alt:!0,src:!0,class:!0}),this.h()},h(){b(e,"alt","M"),ue(e.src,s=Ze)||b(e,"src",s),b(e,"class","svelte-tjtrt9")},m(l,t){E(l,e,t)},p:W,d(l){l&&p(e)}}}function Ce(i){let e,s,l;return{c(){e=$("div"),this.h()},l(t){e=M(t,"DIV",{class:!0}),q(e).forEach(p),this.h()},h(){b(e,"class","cover svelte-tjtrt9")},m(t,n){E(t,e,n),l=!0},i(t){l||(s&&s.end(1),l=!0)},o(t){t&&(s=Ye(e,Z,{duration:100})),l=!1},d(t){t&&p(e),t&&s&&s.end()}}}function Ge(i){let e,s,l,t;return{c(){e=$("img"),this.h()},l(n){e=M(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ue(e.src,s=xe)||b(e,"src",s),b(e,"alt","F"),b(e,"class","flag svelte-tjtrt9")},m(n,a){E(n,e,a),t=!0},p:W,i(n){t||(n&&Be(()=>{l||(l=le(e,Z,{duration:100},!0)),l.run(1)}),t=!0)},o(n){n&&(l||(l=le(e,Z,{duration:100},!1)),l.run(0)),t=!1},d(n){n&&p(e),n&&l&&l.end()}}}function st(i){let e,s,l,t,n,a;function c(d,m){if(d[0].type===P.Mine)return lt;if(d[0].numNeighborMines!==0)return tt}let u=c(i),r=u&&u(i),f=i[0].state!==B.Opened&&Ce(),o=i[0].state===B.Flagged&&Ge();return{c(){e=$("div"),r&&r.c(),s=D(),f&&f.c(),l=D(),o&&o.c(),this.h()},l(d){e=M(d,"DIV",{class:!0});var m=q(e);r&&r.l(m),s=V(m),f&&f.l(m),l=V(m),o&&o.l(m),m.forEach(p),this.h()},h(){b(e,"class",t="wrapper "+i[0].state+" svelte-tjtrt9")},m(d,m){E(d,e,m),r&&r.m(e,null),h(e,s),f&&f.m(e,null),h(e,l),o&&o.m(e,null),n||(a=[J(e,"click",i[1]),J(e,"contextmenu",Se(i[2]))],n=!0)},p(d,[m]){u===(u=c(d))&&r?r.p(d,m):(r&&r.d(1),r=u&&u(d),r&&(r.c(),r.m(e,s))),d[0].state!==B.Opened?f?m&1&&k(f,1):(f=Ce(),f.c(),k(f,1),f.m(e,l)):f&&(R(),N(f,1,1,()=>{f=null}),H()),d[0].state===B.Flagged?o?(o.p(d,m),m&1&&k(o,1)):(o=Ge(),o.c(),k(o,1),o.m(e,null)):o&&(R(),N(o,1,1,()=>{o=null}),H()),m&1&&t!==(t="wrapper "+d[0].state+" svelte-tjtrt9")&&b(e,"class",t)},i(d){k(f),k(o)},o(d){N(f),N(o)},d(d){d&&p(e),r&&r.d(),f&&f.d(),o&&o.d(),n=!1,je(a)}}}function it(i,e,s){let{cell:l}=e,{index:t}=e;const n=c=>{c.button===0&&Q.update(u=>(De(u,t),u))},a=()=>{Q.update(c=>(et(c,t),c))};return i.$$set=c=>{"cell"in c&&s(0,l=c.cell),"index"in c&&s(3,t=c.index)},[l,n,a,t]}class nt extends se{constructor(e){super(),ie(this,e,it,st,ne,{cell:0,index:3})}}function Ie(i,e,s){const l=i.slice();return l[1]=e[s],l[3]=s,l}function rt(i){let e;return{c(){e=y("Loading...")},l(s){e=C(s,"Loading...")},m(s,l){E(s,e,l)},p:W,i:W,o:W,d(s){s&&p(e)}}}function at(i){let e,s,l=i[0].board,t=[];for(let a=0;a<l.length;a+=1)t[a]=Ee(Ie(i,l,a));const n=a=>N(t[a],1,1,()=>{t[a]=null});return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=ge()},l(a){for(let c=0;c<t.length;c+=1)t[c].l(a);e=ge()},m(a,c){for(let u=0;u<t.length;u+=1)t[u].m(a,c);E(a,e,c),s=!0},p(a,c){if(c&1){l=a[0].board;let u;for(u=0;u<l.length;u+=1){const r=Ie(a,l,u);t[u]?(t[u].p(r,c),k(t[u],1)):(t[u]=Ee(r),t[u].c(),k(t[u],1),t[u].m(e.parentNode,e))}for(R(),u=l.length;u<t.length;u+=1)n(u);H()}},i(a){if(!s){for(let c=0;c<l.length;c+=1)k(t[c]);s=!0}},o(a){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)N(t[c]);s=!1},d(a){Pe(t,a),a&&p(e)}}}function Ee(i){let e,s;return e=new nt({props:{cell:i[1],index:i[3]}}),{c(){K(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,t){A(e,l,t),s=!0},p(l,t){const n={};t&1&&(n.cell=l[1]),e.$set(n)},i(l){s||(k(e.$$.fragment,l),s=!0)},o(l){N(e.$$.fragment,l),s=!1},d(l){z(e,l)}}}function ot(i){let e,s,l,t,n;const a=[at,rt],c=[];function u(r,f){return r[0]?0:1}return s=u(i),l=c[s]=a[s](i),{c(){e=$("div"),l.c(),this.h()},l(r){e=M(r,"DIV",{class:!0,style:!0});var f=q(e);l.l(f),f.forEach(p),this.h()},h(){var r,f,o,d;b(e,"class","board svelte-h57i0c"),b(e,"style",t=`grid-template-columns: repeat(${(f=(r=i[0])==null?void 0:r.width)!=null?f:2}, 1fr); grid-template-rows: repeat(${(d=(o=i[0])==null?void 0:o.height)!=null?d:2}, 1fr);`)},m(r,f){E(r,e,f),c[s].m(e,null),n=!0},p(r,[f]){var d,m,I,_;let o=s;s=u(r),s===o?c[s].p(r,f):(R(),N(c[o],1,1,()=>{c[o]=null}),H(),l=c[s],l?l.p(r,f):(l=c[s]=a[s](r),l.c()),k(l,1),l.m(e,null)),(!n||f&1&&t!==(t=`grid-template-columns: repeat(${(m=(d=r[0])==null?void 0:d.width)!=null?m:2}, 1fr); grid-template-rows: repeat(${(_=(I=r[0])==null?void 0:I.height)!=null?_:2}, 1fr);`))&&b(e,"style",t)},i(r){n||(k(l),n=!0)},o(r){N(l),n=!1},d(r){r&&p(e),c[s].d()}}}function ct(i,e,s){let l;return ce(i,Q,t=>s(0,l=t)),[l]}class ft extends se{constructor(e){super(),ie(this,e,ct,ot,ne,{})}}const ut=""+new URL("../../../assets/check-ce7a5ec0.svg",import.meta.url).href;function qe(i){let e,s,l,t;return{c(){e=$("img"),this.h()},l(n){e=M(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ue(e.src,s=ut)||b(e,"src",s),b(e,"alt",""),b(e,"class","svelte-1aqw2ej")},m(n,a){E(n,e,a),t=!0},p:W,i(n){t||(Be(()=>{l||(l=le(e,Z,{duration:50},!0)),l.run(1)}),t=!0)},o(n){l||(l=le(e,Z,{duration:50},!1)),l.run(0),t=!1},d(n){n&&p(e),n&&l&&l.end()}}}function dt(i){let e,s,l,t,n,a,c=[{type:"checkbox"},i[1]],u={};for(let f=0;f<c.length;f+=1)u=fe(u,c[f]);let r=i[0]&&qe();return{c(){e=$("div"),s=$("input"),l=D(),r&&r.c(),this.h()},l(f){e=M(f,"DIV",{class:!0});var o=q(e);s=M(o,"INPUT",{type:!0}),l=V(o),r&&r.l(o),o.forEach(p),this.h()},h(){ve(s,u),ke(s,"svelte-1aqw2ej",!0),b(e,"class","wrapper svelte-1aqw2ej")},m(f,o){E(f,e,o),h(e,s),s.autofocus&&s.focus(),s.checked=i[0],h(e,l),r&&r.m(e,null),t=!0,n||(a=J(s,"change",i[2]),n=!0)},p(f,[o]){ve(s,u=Te(c,[{type:"checkbox"},o&2&&f[1]])),o&1&&(s.checked=f[0]),ke(s,"svelte-1aqw2ej",!0),f[0]?r?(r.p(f,o),o&1&&k(r,1)):(r=qe(),r.c(),k(r,1),r.m(e,null)):r&&(R(),N(r,1,1,()=>{r=null}),H())},i(f){t||(k(r),t=!0)},o(f){N(r),t=!1},d(f){f&&p(e),r&&r.d(),n=!1,a()}}}function _t(i,e,s){let{checked:l}=e;function t(){l=this.checked,s(0,l)}return i.$$set=n=>{s(1,e=fe(fe({},e),we(n))),"checked"in n&&s(0,l=n.checked)},e=we(e),[l,e,t]}class ht extends se{constructor(e){super(),ie(this,e,_t,dt,ne,{checked:0})}}function pt(i){let e,s,l,t,n,a=i[2].width+"",c,u,r=i[2].height+"",f,o,d=i[2].numMines+"",m,I;return{c(){e=$("h2"),s=y("You Lost!"),l=D(),t=$("p"),n=y("You lost on a "),c=y(a),u=y("x"),f=y(r),o=y(`\r
                        board with `),m=y(d),I=y(" mines.")},l(_){e=M(_,"H2",{});var g=q(e);s=C(g,"You Lost!"),g.forEach(p),l=V(_),t=M(_,"P",{});var w=q(t);n=C(w,"You lost on a "),c=C(w,a),u=C(w,"x"),f=C(w,r),o=C(w,`\r
                        board with `),m=C(w,d),I=C(w," mines."),w.forEach(p)},m(_,g){E(_,e,g),h(e,s),E(_,l,g),E(_,t,g),h(t,n),h(t,c),h(t,u),h(t,f),h(t,o),h(t,m),h(t,I)},p(_,g){g&4&&a!==(a=_[2].width+"")&&T(c,a),g&4&&r!==(r=_[2].height+"")&&T(f,r),g&4&&d!==(d=_[2].numMines+"")&&T(m,d)},d(_){_&&p(e),_&&p(l),_&&p(t)}}}function mt(i){let e,s,l,t,n,a=i[2].width+"",c,u,r=i[2].height+"",f,o,d=i[2].numMines+"",m,I;return{c(){e=$("h2"),s=y("You Won!"),l=D(),t=$("p"),n=y("Congratulations, you won on a "),c=y(a),u=y("x"),f=y(r),o=y(`\r
                        board with `),m=y(d),I=y(" mines.")},l(_){e=M(_,"H2",{});var g=q(e);s=C(g,"You Won!"),g.forEach(p),l=V(_),t=M(_,"P",{});var w=q(t);n=C(w,"Congratulations, you won on a "),c=C(w,a),u=C(w,"x"),f=C(w,r),o=C(w,`\r
                        board with `),m=C(w,d),I=C(w," mines."),w.forEach(p)},m(_,g){E(_,e,g),h(e,s),E(_,l,g),E(_,t,g),h(t,n),h(t,c),h(t,u),h(t,f),h(t,o),h(t,m),h(t,I)},p(_,g){g&4&&a!==(a=_[2].width+"")&&T(c,a),g&4&&r!==(r=_[2].height+"")&&T(f,r),g&4&&d!==(d=_[2].numMines+"")&&T(m,d)},d(_){_&&p(e),_&&p(l),_&&p(t)}}}function Ne(i){let e,s,l;return s=new Qe({props:{game:i[2],showMines:!0}}),{c(){e=$("div"),K(s.$$.fragment),this.h()},l(t){e=M(t,"DIV",{class:!0});var n=q(e);X(s.$$.fragment,n),n.forEach(p),this.h()},h(){b(e,"class","mini-board svelte-4buqi6")},m(t,n){E(t,e,n),A(s,e,null),l=!0},p(t,n){const a={};n&4&&(a.game=t[2]),s.$set(a)},i(t){l||(k(s.$$.fragment,t),l=!0)},o(t){N(s.$$.fragment,t),l=!1},d(t){t&&p(e),z(s)}}}function bt(i){let e,s,l,t,n,a,c,u,r,f,o,d,m,I,_,g,w,Y,re,ae,x,oe,de;s=new ft({});function _e(v,L){var O,S;if(((O=v[2])==null?void 0:O.state)===F.Won)return mt;if(((S=v[2])==null?void 0:S.state)===F.Lost)return pt}let U=_e(i),j=U&&U(i);function Ve(v){i[5](v)}let he={};i[1]!==void 0&&(he.checked=i[1]),o=new ht({props:he}),Le.push(()=>Ue(o,"checked",Ve));let G=i[2]&&Ne(i);return{c(){e=$("div"),K(s.$$.fragment),l=D(),t=$("dialog"),n=$("div"),j&&j.c(),a=D(),c=$("div"),u=$("p"),r=y("Keep Game"),f=D(),K(o.$$.fragment),m=D(),I=$("div"),_=$("button"),g=y("Back to Menu"),w=D(),Y=$("button"),re=y("New Game"),ae=D(),G&&G.c(),this.h()},l(v){e=M(v,"DIV",{class:!0,slot:!0});var L=q(e);X(s.$$.fragment,L),l=V(L),t=M(L,"DIALOG",{class:!0});var O=q(t);n=M(O,"DIV",{class:!0});var S=q(n);j&&j.l(S),a=V(S),c=M(S,"DIV",{class:!0});var ee=q(c);u=M(ee,"P",{class:!0});var pe=q(u);r=C(pe,"Keep Game"),pe.forEach(p),f=V(ee),X(o.$$.fragment,ee),ee.forEach(p),m=V(S),I=M(S,"DIV",{class:!0});var te=q(I);_=M(te,"BUTTON",{class:!0});var me=q(_);g=C(me,"Back to Menu"),me.forEach(p),w=V(te),Y=M(te,"BUTTON",{class:!0});var be=q(Y);re=C(be,"New Game"),be.forEach(p),te.forEach(p),S.forEach(p),ae=V(O),G&&G.l(O),O.forEach(p),L.forEach(p),this.h()},h(){b(u,"class","svelte-4buqi6"),b(c,"class","keep-game-wrapper svelte-4buqi6"),b(_,"class","goto-menu"),b(Y,"class","new-game"),b(I,"class","buttons-container-vertical svelte-4buqi6"),b(n,"class","modal-main svelte-4buqi6"),b(t,"class","aftergame-modal svelte-4buqi6"),b(e,"class","wrapper svelte-4buqi6"),b(e,"slot","content")},m(v,L){E(v,e,L),A(s,e,null),h(e,l),h(e,t),h(t,n),j&&j.m(n,null),h(n,a),h(n,c),h(c,u),h(u,r),h(c,f),A(o,c,null),h(n,m),h(n,I),h(I,_),h(_,g),h(I,w),h(I,Y),h(Y,re),h(t,ae),G&&G.m(t,null),i[6](t),x=!0,oe||(de=[J(_,"click",i[4]),J(Y,"click",i[3])],oe=!0)},p(v,L){U===(U=_e(v))&&j?j.p(v,L):(j&&j.d(1),j=U&&U(v),j&&(j.c(),j.m(n,a)));const O={};!d&&L&2&&(d=!0,O.checked=v[1],We(()=>d=!1)),o.$set(O),v[2]?G?(G.p(v,L),L&4&&k(G,1)):(G=Ne(v),G.c(),k(G,1),G.m(t,null)):G&&(R(),N(G,1,1,()=>{G=null}),H())},i(v){x||(k(s.$$.fragment,v),k(o.$$.fragment,v),k(G),x=!0)},o(v){N(s.$$.fragment,v),N(o.$$.fragment,v),N(G),x=!1},d(v){v&&p(e),z(s),j&&j.d(),z(o),G&&G.d(),i[6](null),oe=!1,je(de)}}}function gt(i){let e,s;return e=new Je({props:{$$slots:{content:[bt]},$$scope:{ctx:i}}}),{c(){K(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,t){A(e,l,t),s=!0},p(l,[t]){const n={};t&263&&(n.$$scope={dirty:t,ctx:l}),e.$set(n)},i(l){s||(k(e.$$.fragment,l),s=!0)},o(l){N(e.$$.fragment,l),s=!1},d(l){z(e,l)}}}function vt(i,e,s){let l,t;ce(i,Ke,o=>s(7,l=o)),ce(i,Q,o=>s(2,t=o));let n;Q.subscribe(o=>{var d;(o==null?void 0:o.state)!==F.Playing&&((d=n==null?void 0:n.showModal)==null||d.call(n))}),Fe(()=>{t===null?$e(`${ye}`):t.state!==F.Playing&&n.showModal()});let a=!0;const c=()=>{a||Me(l),Xe(Ae(ze[t.width])),n.close()},u=()=>{a||Me(l),$e(`${ye}`),n.close()};function r(o){a=o,s(1,a)}function f(o){Le[o?"unshift":"push"](()=>{n=o,s(0,n)})}return[n,a,t,c,u,r,f]}class Mt extends se{constructor(e){super(),ie(this,e,vt,gt,ne,{})}}export{Mt as default};
