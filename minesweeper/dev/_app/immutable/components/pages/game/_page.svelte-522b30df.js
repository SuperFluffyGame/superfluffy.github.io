import{P as Se,S as ie,i as ne,s as ae,k as w,a as L,l as y,m as E,c as V,h as m,n as g,b as G,G as _,J as H,Q as Fe,f as C,g as K,t as O,d as X,K as Ve,R as Ue,I as he,A as F,T as Pe,U as We,q as M,r as $,u as U,H as de,e as we,M as Re,v as x,w as ee,x as te,y as le,V as _e,W as ye,O as Me,X as Ae,Y as $e,Z as Ce,_ as Te,$ as He,a0 as Je,o as Ke}from"../../../chunks/index-61ba0940.js";import{G as W,C as D,b as S,s as Xe,r as ze,e as J,M as Qe,c as Ze,g as Ie,d as je,a as xe,n as et,B as tt}from"../../../chunks/MiniBoard-fb039d34.js";import{c as Ee}from"../../../chunks/singletons-be56d9b6.js";const lt=""+new URL("../../../assets/red_mine-cc7afd62.jpg",import.meta.url).href,st=""+new URL("../../../assets/red_flag-cf5f7b44.jpg",import.meta.url).href;function se(i,{delay:e=0,duration:l=400,easing:s=Se}={}){const t=+getComputedStyle(i).opacity;return{delay:e,duration:l,easing:s,css:a=>`opacity: ${a*t}`}}const Ye=(i,e)=>{if(i.state!==W.Playing)return;const l=i.board[e];if(l.state===D.Flagged)return;let s=e%i.width,t=Math.floor(e/i.height);if(l.state=D.Opened,l.type===S.Mine&&i.firstMove&&(Xe(i),l.type=S.Empty,ze(i)),l.type!==S.Mine&&l.numNeighborMines===0)for(let r=0;r<9;r++){const c=Math.floor(r/3)-1,u=r%3-1,n=s+c,o=t+u;if(n<0||n>=i.width||o<0||o>=i.height||c===0&&u===0)continue;const f=o*i.width+n;i.board[f].state===D.Closed&&Ye(i,f)}if(l.type===S.Mine){i.state=W.Lost,i.lostToCell=e;for(let r=0;r<i.width*i.height;r++){let c=i.board[r];c.type===S.Mine&&(c.state=D.Opened)}}let a=!0;for(let r=0;r<i.width*i.height;r++)i.board[r].type!==S.Mine&&i.board[r].state!==D.Opened&&(a=!1);a&&(i.state=W.Won),i.firstMove=!1},it=(i,e)=>{let l=i.board[e];l.state===D.Closed?l.state=D.Flagged:l.state===D.Flagged&&(l.state=D.Closed)};function nt(i){let e=i[0].numNeighborMines+"",l;return{c(){l=M(e)},l(s){l=$(s,e)},m(s,t){G(s,l,t)},p(s,t){t&1&&e!==(e=s[0].numNeighborMines+"")&&U(l,e)},d(s){s&&m(l)}}}function at(i){let e,l;return{c(){e=w("img"),this.h()},l(s){e=y(s,"IMG",{alt:!0,src:!0,class:!0}),this.h()},h(){g(e,"alt","M"),he(e.src,l=lt)||g(e,"src",l),g(e,"class","svelte-tjtrt9")},m(s,t){G(s,e,t)},p:F,d(s){s&&m(e)}}}function Ge(i){let e,l,s;return{c(){e=w("div"),this.h()},l(t){e=y(t,"DIV",{class:!0}),E(e).forEach(m),this.h()},h(){g(e,"class","cover svelte-tjtrt9")},m(t,a){G(t,e,a),s=!0},i(t){s||(l&&l.end(1),s=!0)},o(t){t&&(l=Ue(e,se,{duration:100})),s=!1},d(t){t&&m(e),t&&l&&l.end()}}}function Ne(i){let e,l,s;return{c(){e=w("img"),this.h()},l(t){e=y(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){he(e.src,l=st)||g(e,"src",l),g(e,"alt","F"),g(e,"class","flag svelte-tjtrt9")},m(t,a){G(t,e,a)},p:F,i(t){t&&(s||Pe(()=>{s=We(e,se,{duration:100}),s.start()}))},o:F,d(t){t&&m(e)}}}function rt(i){let e,l,s,t,a,r;function c(d,p){if(d[0].type===S.Mine)return at;if(d[0].numNeighborMines!==0)return nt}let u=c(i),n=u&&u(i),o=i[0].state!==D.Opened&&Ge(),f=i[0].state===D.Flagged&&Ne();return{c(){e=w("div"),n&&n.c(),l=L(),o&&o.c(),s=L(),f&&f.c(),this.h()},l(d){e=y(d,"DIV",{class:!0});var p=E(e);n&&n.l(p),l=V(p),o&&o.l(p),s=V(p),f&&f.l(p),p.forEach(m),this.h()},h(){g(e,"class",t="wrapper "+i[0].state+" svelte-tjtrt9")},m(d,p){G(d,e,p),n&&n.m(e,null),_(e,l),o&&o.m(e,null),_(e,s),f&&f.m(e,null),a||(r=[H(e,"click",i[1]),H(e,"contextmenu",Fe(i[2]))],a=!0)},p(d,[p]){u===(u=c(d))&&n?n.p(d,p):(n&&n.d(1),n=u&&u(d),n&&(n.c(),n.m(e,l))),d[0].state!==D.Opened?o?p&1&&C(o,1):(o=Ge(),o.c(),C(o,1),o.m(e,s)):o&&(K(),O(o,1,1,()=>{o=null}),X()),d[0].state===D.Flagged?f?(f.p(d,p),p&1&&C(f,1)):(f=Ne(),f.c(),C(f,1),f.m(e,null)):f&&(f.d(1),f=null),p&1&&t!==(t="wrapper "+d[0].state+" svelte-tjtrt9")&&g(e,"class",t)},i(d){C(o),C(f)},o(d){O(o)},d(d){d&&m(e),n&&n.d(),o&&o.d(),f&&f.d(),a=!1,Ve(r)}}}function ot(i,e,l){let{cell:s}=e,{index:t}=e;const a=c=>{c.button===0&&J.update(u=>(Ye(u,t),u))},r=()=>{J.update(c=>(it(c,t),c))};return i.$$set=c=>{"cell"in c&&l(0,s=c.cell),"index"in c&&l(3,t=c.index)},[s,a,r,t]}class ct extends ie{constructor(e){super(),ne(this,e,ot,rt,ae,{cell:0,index:3})}}function Be(i,e,l){const s=i.slice();return s[1]=e[l],s[3]=l,s}function ft(i){let e;return{c(){e=M("Loading...")},l(l){e=$(l,"Loading...")},m(l,s){G(l,e,s)},p:F,i:F,o:F,d(l){l&&m(e)}}}function ut(i){let e,l,s=i[0].board,t=[];for(let r=0;r<s.length;r+=1)t[r]=Oe(Be(i,s,r));const a=r=>O(t[r],1,1,()=>{t[r]=null});return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=we()},l(r){for(let c=0;c<t.length;c+=1)t[c].l(r);e=we()},m(r,c){for(let u=0;u<t.length;u+=1)t[u].m(r,c);G(r,e,c),l=!0},p(r,c){if(c&1){s=r[0].board;let u;for(u=0;u<s.length;u+=1){const n=Be(r,s,u);t[u]?(t[u].p(n,c),C(t[u],1)):(t[u]=Oe(n),t[u].c(),C(t[u],1),t[u].m(e.parentNode,e))}for(K(),u=s.length;u<t.length;u+=1)a(u);X()}},i(r){if(!l){for(let c=0;c<s.length;c+=1)C(t[c]);l=!0}},o(r){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)O(t[c]);l=!1},d(r){Re(t,r),r&&m(e)}}}function Oe(i){let e,l;return e=new ct({props:{cell:i[1],index:i[3]}}),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,t){te(e,s,t),l=!0},p(s,t){const a={};t&1&&(a.cell=s[1]),e.$set(a)},i(s){l||(C(e.$$.fragment,s),l=!0)},o(s){O(e.$$.fragment,s),l=!1},d(s){le(e,s)}}}function dt(i){let e,l,s,t,a;const r=[ut,ft],c=[];function u(n,o){return n[0]?0:1}return l=u(i),s=c[l]=r[l](i),{c(){e=w("div"),s.c(),this.h()},l(n){e=y(n,"DIV",{class:!0,style:!0});var o=E(e);s.l(o),o.forEach(m),this.h()},h(){var n,o,f,d;g(e,"class","board svelte-gq0y7i"),g(e,"style",t=`grid-template-columns: repeat(${(o=(n=i[0])==null?void 0:n.width)!=null?o:2}, 1fr); grid-template-rows: repeat(${(d=(f=i[0])==null?void 0:f.height)!=null?d:2}, 1fr);`)},m(n,o){G(n,e,o),c[l].m(e,null),a=!0},p(n,[o]){var d,p,I,h;let f=l;l=u(n),l===f?c[l].p(n,o):(K(),O(c[f],1,1,()=>{c[f]=null}),X(),s=c[l],s?s.p(n,o):(s=c[l]=r[l](n),s.c()),C(s,1),s.m(e,null)),(!a||o&1&&t!==(t=`grid-template-columns: repeat(${(p=(d=n[0])==null?void 0:d.width)!=null?p:2}, 1fr); grid-template-rows: repeat(${(h=(I=n[0])==null?void 0:I.height)!=null?h:2}, 1fr);`))&&g(e,"style",t)},i(n){a||(C(s),a=!0)},o(n){O(s),a=!1},d(n){n&&m(e),c[l].d()}}}function _t(i,e,l){let s;return de(i,J,t=>l(0,s=t)),[s]}class ht extends ie{constructor(e){super(),ne(this,e,_t,dt,ae,{})}}const mt=""+new URL("../../../assets/check-ce7a5ec0.svg",import.meta.url).href;function De(i){let e,l,s,t;return{c(){e=w("img"),this.h()},l(a){e=y(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){he(e.src,l=mt)||g(e,"src",l),g(e,"alt",""),g(e,"class","svelte-1aqw2ej")},m(a,r){G(a,e,r),t=!0},p:F,i(a){t||(Pe(()=>{s||(s=Ce(e,se,{duration:50},!0)),s.run(1)}),t=!0)},o(a){s||(s=Ce(e,se,{duration:50},!1)),s.run(0),t=!1},d(a){a&&m(e),a&&s&&s.end()}}}function pt(i){let e,l,s,t,a,r,c=[{type:"checkbox"},i[1]],u={};for(let o=0;o<c.length;o+=1)u=_e(u,c[o]);let n=i[0]&&De();return{c(){e=w("div"),l=w("input"),s=L(),n&&n.c(),this.h()},l(o){e=y(o,"DIV",{class:!0});var f=E(e);l=y(f,"INPUT",{type:!0}),s=V(f),n&&n.l(f),f.forEach(m),this.h()},h(){ye(l,u),Me(l,"svelte-1aqw2ej",!0),g(e,"class","wrapper svelte-1aqw2ej")},m(o,f){G(o,e,f),_(e,l),l.autofocus&&l.focus(),l.checked=i[0],_(e,s),n&&n.m(e,null),t=!0,a||(r=H(l,"change",i[2]),a=!0)},p(o,[f]){ye(l,u=Ae(c,[{type:"checkbox"},f&2&&o[1]])),f&1&&(l.checked=o[0]),Me(l,"svelte-1aqw2ej",!0),o[0]?n?(n.p(o,f),f&1&&C(n,1)):(n=De(),n.c(),C(n,1),n.m(e,null)):n&&(K(),O(n,1,1,()=>{n=null}),X())},i(o){t||(C(n),t=!0)},o(o){O(n),t=!1},d(o){o&&m(e),n&&n.d(),a=!1,r()}}}function gt(i,e,l){let{checked:s}=e;function t(){s=this.checked,l(0,s)}return i.$$set=a=>{l(1,e=_e(_e({},e),$e(a))),"checked"in a&&l(0,s=a.checked)},e=$e(e),[s,e,t]}class vt extends ie{constructor(e){super(),ne(this,e,gt,pt,ae,{checked:0})}}function bt(i){let e,l,s,t,a,r=i[2].width+"",c,u,n=i[2].height+"",o,f,d=i[2].numMines+"",p,I;return{c(){e=w("h2"),l=M("You Lost!"),s=L(),t=w("p"),a=M("You lost on a "),c=M(r),u=M("x"),o=M(n),f=M(`\r
                    board with `),p=M(d),I=M(" mines.")},l(h){e=y(h,"H2",{});var b=E(e);l=$(b,"You Lost!"),b.forEach(m),s=V(h),t=y(h,"P",{});var v=E(t);a=$(v,"You lost on a "),c=$(v,r),u=$(v,"x"),o=$(v,n),f=$(v,`\r
                    board with `),p=$(v,d),I=$(v," mines."),v.forEach(m)},m(h,b){G(h,e,b),_(e,l),G(h,s,b),G(h,t,b),_(t,a),_(t,c),_(t,u),_(t,o),_(t,f),_(t,p),_(t,I)},p(h,b){b&4&&r!==(r=h[2].width+"")&&U(c,r),b&4&&n!==(n=h[2].height+"")&&U(o,n),b&4&&d!==(d=h[2].numMines+"")&&U(p,d)},d(h){h&&m(e),h&&m(s),h&&m(t)}}}function kt(i){let e,l,s,t,a,r=i[2].width+"",c,u,n=i[2].height+"",o,f,d=i[2].numMines+"",p,I;return{c(){e=w("h2"),l=M("You Won!"),s=L(),t=w("p"),a=M("Congratulations, you won on a "),c=M(r),u=M("x"),o=M(n),f=M(`\r
                    board with `),p=M(d),I=M(" mines.")},l(h){e=y(h,"H2",{});var b=E(e);l=$(b,"You Won!"),b.forEach(m),s=V(h),t=y(h,"P",{});var v=E(t);a=$(v,"Congratulations, you won on a "),c=$(v,r),u=$(v,"x"),o=$(v,n),f=$(v,`\r
                    board with `),p=$(v,d),I=$(v," mines."),v.forEach(m)},m(h,b){G(h,e,b),_(e,l),G(h,s,b),G(h,t,b),_(t,a),_(t,c),_(t,u),_(t,o),_(t,f),_(t,p),_(t,I)},p(h,b){b&4&&r!==(r=h[2].width+"")&&U(c,r),b&4&&n!==(n=h[2].height+"")&&U(o,n),b&4&&d!==(d=h[2].numMines+"")&&U(p,d)},d(h){h&&m(e),h&&m(s),h&&m(t)}}}function Le(i){let e,l,s;return l=new Qe({props:{game:i[2],showMines:!0}}),{c(){e=w("div"),x(l.$$.fragment),this.h()},l(t){e=y(t,"DIV",{class:!0});var a=E(e);ee(l.$$.fragment,a),a.forEach(m),this.h()},h(){g(e,"class","mini-board svelte-jtmwfy")},m(t,a){G(t,e,a),te(l,e,null),s=!0},p(t,a){const r={};a&4&&(r.game=t[2]),l.$set(r)},i(t){s||(C(l.$$.fragment,t),s=!0)},o(t){O(l.$$.fragment,t),s=!1},d(t){t&&m(e),le(l)}}}function wt(i){let e,l,s,t,a,r,c,u,n,o,f,d,p,I,h,b,v,T,re,oe,Y,ce,fe,z,ue,me;a=new ht({});function pe(k,B){var P,q;if(((P=k[2])==null?void 0:P.state)===W.Won)return kt;if(((q=k[2])==null?void 0:q.state)===W.Lost)return bt}let R=pe(i),N=R&&R(i);function qe(k){i[5](k)}let ge={};i[1]!==void 0&&(ge.checked=i[1]),I=new vt({props:ge}),Te.push(()=>He(I,"checked",qe));let j=i[2]&&Le(i);return{c(){e=w("main"),l=w("section"),s=w("div"),t=L(),x(a.$$.fragment),r=L(),c=w("dialog"),u=w("div"),N&&N.c(),n=L(),o=w("div"),f=w("p"),d=M("Keep Game"),p=L(),x(I.$$.fragment),b=L(),v=w("div"),T=w("button"),re=M("Back to Menu"),oe=L(),Y=w("button"),ce=M("New Game"),fe=L(),j&&j.c(),this.h()},l(k){e=y(k,"MAIN",{class:!0});var B=E(e);l=y(B,"SECTION",{class:!0});var P=E(l);s=y(P,"DIV",{class:!0}),E(s).forEach(m),P.forEach(m),t=V(B),ee(a.$$.fragment,B),r=V(B),c=y(B,"DIALOG",{class:!0});var q=E(c);u=y(q,"DIV",{class:!0});var A=E(u);N&&N.l(A),n=V(A),o=y(A,"DIV",{class:!0});var Q=E(o);f=y(Q,"P",{class:!0});var ve=E(f);d=$(ve,"Keep Game"),ve.forEach(m),p=V(Q),ee(I.$$.fragment,Q),Q.forEach(m),b=V(A),v=y(A,"DIV",{class:!0});var Z=E(v);T=y(Z,"BUTTON",{class:!0});var be=E(T);re=$(be,"Back to Menu"),be.forEach(m),oe=V(Z),Y=y(Z,"BUTTON",{class:!0});var ke=E(Y);ce=$(ke,"New Game"),ke.forEach(m),Z.forEach(m),A.forEach(m),fe=V(q),j&&j.l(q),q.forEach(m),B.forEach(m),this.h()},h(){g(s,"class","click-type-container"),g(l,"class","save-game-sidebar"),g(f,"class","svelte-jtmwfy"),g(o,"class","keep-game-wrapper svelte-jtmwfy"),g(T,"class","goto-menu"),g(Y,"class","new-game"),g(v,"class","buttons-container-vertical svelte-jtmwfy"),g(u,"class","modal-main svelte-jtmwfy"),g(c,"class","aftergame-modal svelte-jtmwfy"),g(e,"class","wrapper svelte-jtmwfy")},m(k,B){G(k,e,B),_(e,l),_(l,s),_(e,t),te(a,e,null),_(e,r),_(e,c),_(c,u),N&&N.m(u,null),_(u,n),_(u,o),_(o,f),_(f,d),_(o,p),te(I,o,null),_(u,b),_(u,v),_(v,T),_(T,re),_(v,oe),_(v,Y),_(Y,ce),_(c,fe),j&&j.m(c,null),i[6](c),z=!0,ue||(me=[H(T,"click",i[4]),H(Y,"click",i[3])],ue=!0)},p(k,[B]){R===(R=pe(k))&&N?N.p(k,B):(N&&N.d(1),N=R&&R(k),N&&(N.c(),N.m(u,n)));const P={};!h&&B&2&&(h=!0,P.checked=k[1],Je(()=>h=!1)),I.$set(P),k[2]?j?(j.p(k,B),B&4&&C(j,1)):(j=Le(k),j.c(),C(j,1),j.m(c,null)):j&&(K(),O(j,1,1,()=>{j=null}),X())},i(k){z||(C(a.$$.fragment,k),C(I.$$.fragment,k),C(j),z=!0)},o(k){O(a.$$.fragment,k),O(I.$$.fragment,k),O(j),z=!1},d(k){k&&m(e),le(a),N&&N.d(),le(I),j&&j.d(),i[6](null),ue=!1,Ve(me)}}}function yt(i,e,l){let s,t;de(i,Ze,f=>l(7,s=f)),de(i,J,f=>l(2,t=f));let a;J.subscribe(f=>{var d;(f==null?void 0:f.state)!==W.Playing&&((d=a==null?void 0:a.showModal)==null||d.call(a))}),Ke(()=>{t===null?Ie(`${Ee}`):t.state!==W.Playing&&a.showModal()});let r;const c=()=>{r||je(s),xe(et(tt[t.width])),a.close()},u=()=>{r||je(s),Ie(`${Ee}`),a.close()};function n(f){r=f,l(1,r)}function o(f){Te[f?"unshift":"push"](()=>{a=f,l(0,a)})}return[a,r,t,c,u,n,o]}class It extends ie{constructor(e){super(),ne(this,e,yt,wt,ae,{})}}export{It as default};
