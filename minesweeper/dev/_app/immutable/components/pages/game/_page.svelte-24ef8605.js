import{N as ve,S as z,i as K,s as Q,k as y,a as B,l as $,m as N,c as P,h as g,n as k,b as I,G as p,L as R,O as be,f as G,g as U,t as S,d as H,M as ce,P as fe,Q as J,K as ue,A as T,q as M,r as w,u as Y,H as _e,e as le,I as ke,v as de,w as he,x as me,y as pe,o as Me,R as we}from"../../../chunks/index-1de6b368.js";import{G as D,C as O,s as ye,r as $e,a as A,n as Ce,B as Ee,M as Ne,g as se}from"../../../chunks/navigation-f7f10f80.js";import{c as ie}from"../../../chunks/singletons-f1e67e30.js";const Ie=""+new URL("../../../assets/red_mine-cc7afd62.jpg",import.meta.url).href,Ge=""+new URL("../../../assets/red_flag-cf5f7b44.jpg",import.meta.url).href;function X(i,{delay:e=0,duration:s=400,easing:l=ve}={}){const t=+getComputedStyle(i).opacity;return{delay:e,duration:s,easing:l,css:c=>`opacity: ${c*t}`}}const ge=(i,e)=>{if(i.state!==D.Playing)return;const s=i.board[e];if(s.state===O.Flagged)return;let l=e%i.width,t=Math.floor(e/i.height);if(s.state=O.Opened,s.isMine&&i.firstMove&&(ye(i),s.isMine=!1,$e(i)),!s.isMine&&s.numNeighborMines===0)for(let n=0;n<9;n++){const r=Math.floor(n/3)-1,a=n%3-1,o=l+r,f=t+a;if(o<0||o>=i.width||f<0||f>=i.height||r===0&&a===0)continue;const u=f*i.width+o;i.board[u].state===O.Closed&&ge(i,u)}if(s.isMine){i.state=D.Lost,i.lostToCell=e;for(let n=0;n<i.width*i.height;n++){let r=i.board[n];r.isMine&&(r.state=O.Opened)}}let c=!0;for(let n=0;n<i.width*i.height;n++)!i.board[n].isMine&&i.board[n].state!==O.Opened&&(c=!1);c&&(i.state=D.Won),i.firstMove=!1},Oe=(i,e)=>{let s=i.board[e];s.state===O.Closed?s.state=O.Flagged:s.state===O.Flagged&&(s.state=O.Closed)};function Le(i){let e=i[0].numNeighborMines+"",s;return{c(){s=M(e)},l(l){s=w(l,e)},m(l,t){I(l,s,t)},p(l,t){t&1&&e!==(e=l[0].numNeighborMines+"")&&Y(s,e)},d(l){l&&g(s)}}}function Se(i){let e,s;return{c(){e=y("img"),this.h()},l(l){e=$(l,"IMG",{alt:!0,src:!0,class:!0}),this.h()},h(){k(e,"alt","M"),ue(e.src,s=Ie)||k(e,"src",s),k(e,"class","svelte-t8gmc5")},m(l,t){I(l,e,t)},p:T,d(l){l&&g(e)}}}function ne(i){let e,s,l;return{c(){e=y("div"),this.h()},l(t){e=$(t,"DIV",{class:!0}),N(e).forEach(g),this.h()},h(){k(e,"class","cover svelte-t8gmc5")},m(t,c){I(t,e,c),l=!0},i(t){l||(fe(()=>{s||(s=J(e,X,{duration:100},!0)),s.run(1)}),l=!0)},o(t){s||(s=J(e,X,{duration:100},!1)),s.run(0),l=!1},d(t){t&&g(e),t&&s&&s.end()}}}function re(i){let e,s,l,t;return{c(){e=y("img"),this.h()},l(c){e=$(c,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ue(e.src,s=Ge)||k(e,"src",s),k(e,"alt","F"),k(e,"class","flag svelte-t8gmc5")},m(c,n){I(c,e,n),t=!0},p:T,i(c){t||(fe(()=>{l||(l=J(e,X,{duration:100},!0)),l.run(1)}),t=!0)},o(c){l||(l=J(e,X,{duration:100},!1)),l.run(0),t=!1},d(c){c&&g(e),c&&l&&l.end()}}}function Be(i){let e,s,l,t,c,n,r;function a(h,m){if(h[0].isMine)return Se;if(h[0].numNeighborMines!==0)return Le}let o=a(i),f=o&&o(i),u=i[0].state!==O.Opened&&ne(),_=i[0].state===O.Flagged&&re();return{c(){e=y("div"),f&&f.c(),s=B(),u&&u.c(),l=B(),_&&_.c(),this.h()},l(h){e=$(h,"DIV",{class:!0});var m=N(e);f&&f.l(m),s=P(m),u&&u.l(m),l=P(m),_&&_.l(m),m.forEach(g),this.h()},h(){k(e,"class",t="wrapper "+i[0].state+" svelte-t8gmc5")},m(h,m){I(h,e,m),f&&f.m(e,null),p(e,s),u&&u.m(e,null),p(e,l),_&&_.m(e,null),c=!0,n||(r=[R(e,"click",i[1]),R(e,"contextmenu",be(i[2]))],n=!0)},p(h,[m]){o===(o=a(h))&&f?f.p(h,m):(f&&f.d(1),f=o&&o(h),f&&(f.c(),f.m(e,s))),h[0].state!==O.Opened?u?m&1&&G(u,1):(u=ne(),u.c(),G(u,1),u.m(e,l)):u&&(U(),S(u,1,1,()=>{u=null}),H()),h[0].state===O.Flagged?_?(_.p(h,m),m&1&&G(_,1)):(_=re(),_.c(),G(_,1),_.m(e,null)):_&&(U(),S(_,1,1,()=>{_=null}),H()),(!c||m&1&&t!==(t="wrapper "+h[0].state+" svelte-t8gmc5"))&&k(e,"class",t)},i(h){c||(G(u),G(_),c=!0)},o(h){S(u),S(_),c=!1},d(h){h&&g(e),f&&f.d(),u&&u.d(),_&&_.d(),n=!1,ce(r)}}}function Pe(i,e,s){let{cell:l}=e,{index:t}=e;const c=r=>{r.button===0&&A.update(a=>(ge(a,t),a))},n=()=>{A.update(r=>(Oe(r,t),r))};return i.$$set=r=>{"cell"in r&&s(0,l=r.cell),"index"in r&&s(3,t=r.index)},[l,c,n,t]}class Ye extends z{constructor(e){super(),K(this,e,Pe,Be,Q,{cell:0,index:3})}}function ae(i,e,s){const l=i.slice();return l[1]=e[s],l[3]=s,l}function De(i){let e;return{c(){e=M("Loading...")},l(s){e=w(s,"Loading...")},m(s,l){I(s,e,l)},p:T,i:T,o:T,d(s){s&&g(e)}}}function Fe(i){let e,s,l=i[0].board,t=[];for(let n=0;n<l.length;n+=1)t[n]=oe(ae(i,l,n));const c=n=>S(t[n],1,1,()=>{t[n]=null});return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=le()},l(n){for(let r=0;r<t.length;r+=1)t[r].l(n);e=le()},m(n,r){for(let a=0;a<t.length;a+=1)t[a].m(n,r);I(n,e,r),s=!0},p(n,r){if(r&1){l=n[0].board;let a;for(a=0;a<l.length;a+=1){const o=ae(n,l,a);t[a]?(t[a].p(o,r),G(t[a],1)):(t[a]=oe(o),t[a].c(),G(t[a],1),t[a].m(e.parentNode,e))}for(U(),a=l.length;a<t.length;a+=1)c(a);H()}},i(n){if(!s){for(let r=0;r<l.length;r+=1)G(t[r]);s=!0}},o(n){t=t.filter(Boolean);for(let r=0;r<t.length;r+=1)S(t[r]);s=!1},d(n){ke(t,n),n&&g(e)}}}function oe(i){let e,s;return e=new Ye({props:{cell:i[1],index:i[3]}}),{c(){de(e.$$.fragment)},l(l){he(e.$$.fragment,l)},m(l,t){me(e,l,t),s=!0},p(l,t){const c={};t&1&&(c.cell=l[1]),e.$set(c)},i(l){s||(G(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){pe(e,l)}}}function Ve(i){let e,s,l,t,c;const n=[Fe,De],r=[];function a(o,f){return o[0]?0:1}return s=a(i),l=r[s]=n[s](i),{c(){e=y("div"),l.c(),this.h()},l(o){e=$(o,"DIV",{class:!0,style:!0});var f=N(e);l.l(f),f.forEach(g),this.h()},h(){var o,f,u,_;k(e,"class","board svelte-gq0y7i"),k(e,"style",t=`grid-template-columns: repeat(${(f=(o=i[0])==null?void 0:o.width)!=null?f:2}, 1fr); grid-template-rows: repeat(${(_=(u=i[0])==null?void 0:u.height)!=null?_:2}, 1fr);`)},m(o,f){I(o,e,f),r[s].m(e,null),c=!0},p(o,[f]){var _,h,m,d;let u=s;s=a(o),s===u?r[s].p(o,f):(U(),S(r[u],1,1,()=>{r[u]=null}),H(),l=r[s],l?l.p(o,f):(l=r[s]=n[s](o),l.c()),G(l,1),l.m(e,null)),(!c||f&1&&t!==(t=`grid-template-columns: repeat(${(h=(_=o[0])==null?void 0:_.width)!=null?h:2}, 1fr); grid-template-rows: repeat(${(d=(m=o[0])==null?void 0:m.height)!=null?d:2}, 1fr);`))&&k(e,"style",t)},i(o){c||(G(l),c=!0)},o(o){S(l),c=!1},d(o){o&&g(e),r[s].d()}}}function je(i,e,s){let l;return _e(i,A,t=>s(0,l=t)),[l]}class Te extends z{constructor(e){super(),K(this,e,je,Ve,Q,{})}}function Ae(i){let e,s,l,t,c,n=i[1].width+"",r,a,o=i[1].height+"",f,u,_=i[1].numMines+"",h,m;return{c(){e=y("h2"),s=M("You Lost!"),l=B(),t=y("p"),c=M("You lost on a "),r=M(n),a=M("x"),f=M(o),u=M(`\r
                    board with `),h=M(_),m=M(" mines.")},l(d){e=$(d,"H2",{});var v=N(e);s=w(v,"You Lost!"),v.forEach(g),l=P(d),t=$(d,"P",{});var b=N(t);c=w(b,"You lost on a "),r=w(b,n),a=w(b,"x"),f=w(b,o),u=w(b,`\r
                    board with `),h=w(b,_),m=w(b," mines."),b.forEach(g)},m(d,v){I(d,e,v),p(e,s),I(d,l,v),I(d,t,v),p(t,c),p(t,r),p(t,a),p(t,f),p(t,u),p(t,h),p(t,m)},p(d,v){v&2&&n!==(n=d[1].width+"")&&Y(r,n),v&2&&o!==(o=d[1].height+"")&&Y(f,o),v&2&&_!==(_=d[1].numMines+"")&&Y(h,_)},d(d){d&&g(e),d&&g(l),d&&g(t)}}}function We(i){let e,s,l,t,c,n=i[1].width+"",r,a,o=i[1].height+"",f,u,_=i[1].numMines+"",h,m;return{c(){e=y("h2"),s=M("You Won!"),l=B(),t=y("p"),c=M("Congratulations, you won on a "),r=M(n),a=M("x"),f=M(o),u=M(`\r
                    board with `),h=M(_),m=M(" mines.")},l(d){e=$(d,"H2",{});var v=N(e);s=w(v,"You Won!"),v.forEach(g),l=P(d),t=$(d,"P",{});var b=N(t);c=w(b,"Congratulations, you won on a "),r=w(b,n),a=w(b,"x"),f=w(b,o),u=w(b,`\r
                    board with `),h=w(b,_),m=w(b," mines."),b.forEach(g)},m(d,v){I(d,e,v),p(e,s),I(d,l,v),I(d,t,v),p(t,c),p(t,r),p(t,a),p(t,f),p(t,u),p(t,h),p(t,m)},p(d,v){v&2&&n!==(n=d[1].width+"")&&Y(r,n),v&2&&o!==(o=d[1].height+"")&&Y(f,o),v&2&&_!==(_=d[1].numMines+"")&&Y(h,_)},d(d){d&&g(e),d&&g(l),d&&g(t)}}}function qe(i){let e,s,l,t,c,n,r,a,o,f,u,_,h,m,d,v,b,Z;c=new Te({});function x(E,L){var V,j;if(((V=E[1])==null?void 0:V.state)===D.Won)return We;if(((j=E[1])==null?void 0:j.state)===D.Lost)return Ae}let F=x(i),C=F&&F(i);return{c(){e=y("main"),s=y("section"),l=y("div"),t=B(),de(c.$$.fragment),n=B(),r=y("dialog"),a=y("div"),C&&C.c(),o=B(),f=y("div"),u=y("button"),_=M("Back to Menu"),h=B(),m=y("button"),d=M("New Game"),this.h()},l(E){e=$(E,"MAIN",{class:!0});var L=N(e);s=$(L,"SECTION",{class:!0});var V=N(s);l=$(V,"DIV",{class:!0}),N(l).forEach(g),V.forEach(g),t=P(L),he(c.$$.fragment,L),n=P(L),r=$(L,"DIALOG",{class:!0});var j=N(r);a=$(j,"DIV",{class:!0});var W=N(a);C&&C.l(W),o=P(W),f=$(W,"DIV",{class:!0});var q=N(f);u=$(q,"BUTTON",{class:!0});var ee=N(u);_=w(ee,"Back to Menu"),ee.forEach(g),h=P(q),m=$(q,"BUTTON",{class:!0});var te=N(m);d=w(te,"New Game"),te.forEach(g),q.forEach(g),W.forEach(g),j.forEach(g),L.forEach(g),this.h()},h(){k(l,"class","click-type-container"),k(s,"class","save-game-sidebar"),k(u,"class","goto-menu"),k(m,"class","new-game"),k(f,"class","buttons-container-vertical svelte-c2sjrf"),k(a,"class","modal-main svelte-c2sjrf"),k(r,"class","aftergame-modal svelte-c2sjrf"),k(e,"class","wrapper svelte-c2sjrf")},m(E,L){I(E,e,L),p(e,s),p(s,l),p(e,t),me(c,e,null),p(e,n),p(e,r),p(r,a),C&&C.m(a,null),p(a,o),p(a,f),p(f,u),p(u,_),p(f,h),p(f,m),p(m,d),i[4](r),v=!0,b||(Z=[R(u,"click",i[3]),R(m,"click",i[2])],b=!0)},p(E,[L]){F===(F=x(E))&&C?C.p(E,L):(C&&C.d(1),C=F&&F(E),C&&(C.c(),C.m(a,o)))},i(E){v||(G(c.$$.fragment,E),v=!0)},o(E){S(c.$$.fragment,E),v=!1},d(E){E&&g(e),pe(c),C&&C.d(),i[4](null),b=!1,ce(Z)}}}function Re(i,e,s){let l;_e(i,A,a=>s(1,l=a));let t;A.subscribe(a=>{var o;(a==null?void 0:a.state)!==D.Playing&&((o=t==null?void 0:t.showModal)==null||o.call(t))}),Me(()=>{l===null?se(`${ie}`):l.state!==D.Playing&&t.showModal()});const c=()=>{Ce(Ee[l.width]),t.close()},n=()=>{localStorage.removeItem(Ne),se(`${ie}`),t.close()};function r(a){we[a?"unshift":"push"](()=>{t=a,s(0,t)})}return[t,l,c,n,r]}class Xe extends z{constructor(e){super(),K(this,e,Re,qe,Q,{})}}export{Xe as default};
