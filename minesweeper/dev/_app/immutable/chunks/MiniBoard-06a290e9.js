var Ke=Object.defineProperty;var Qe=(e,t,s)=>t in e?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var B=(e,t,s)=>(Qe(e,typeof t!="symbol"?t+"":t,s),s);import{I as Ce,S as F,i as q,s as X,B as ue,k as y,a as k,l as b,m as v,c as M,h as p,n as g,J as Ne,p as A,b as j,G as _,K as Je,D as he,E as de,F as ge,f as N,t as R,H as Ze,L as me,M as xe,q as te,v as se,r as le,w as ne,x as ie,y as ae,N as $e,O as _e,P as Ie,Q as Le,R as et,g as tt,d as st,T as Oe,A as pe,U as lt,V as Pe,o as nt,W as it}from"./index-445e7c1b.js";import{w as C,d as z,c as oe}from"./singletons-4bbeb226.js";const at=""+new URL("../assets/stats-08c66cd3.svg",import.meta.url).href,ot=""+new URL("../assets/settings-4a18c9a1.svg",import.meta.url).href,rt=""+new URL("../assets/home-b3ebdf43.svg",import.meta.url).href,Ue="MINESWEEPER_SETTINGS",Tt=[0,5,10,15,20],W=[{hue:200,accent:"darkcyan",cellHue:200,light:!1},{hue:100,accent:"green",cellHue:100,light:!1},{hue:300,accent:"darkviolet",cellHue:300,light:!1},{hue:0,accent:"brown",cellHue:0,light:!1},{hue:50,accent:"orange",cellHue:70,light:!0}],ct=()=>{var s,l,n;const e=JSON.parse((s=localStorage[Ue])!=null?s:"{}");return{theme:(l=e==null?void 0:e.theme)!=null?l:0,saturation:(n=e==null?void 0:e.saturation)!=null?n:10}},ft=e=>{localStorage[Ue]=JSON.stringify(e)},be="MINESWEEPER_SAVE_GAME",ut=e=>{let t=localStorage[be+`_${e}`];return t?JSON.parse(t):null},Be=(e,t)=>{De(e),localStorage[be+`_${e}`]=JSON.stringify(t)},De=e=>{localStorage.removeItem(be+`_${e}`)},Ht=e=>{V.update(t=>(t.splice(t.findIndex(s=>s.index===e),1),t)),De(e)},jt=e=>{let t=Ce(V),s;for(let l=0;;l++)if(t.findIndex(n=>n.index===l)===-1){s=l;break}e.title+=s,Be(s,e),D.set(-1),D.set(s),V.update(l=>(l.push({index:s,selected:!1}),l)),Se.set(e)},Fe="MINESWEEPER_OVERALL_STATS",ht=()=>{var s,l,n,a;const e=JSON.parse((s=localStorage[Fe])!=null?s:"{}");return{gamesWon:(l=e==null?void 0:e.gamesWon)!=null?l:0,gamesLost:(n=e==null?void 0:e.gamesLost)!=null?n:0,cellsOpened:(a=e==null?void 0:e.cellsOpened)!=null?a:0}},dt=e=>{localStorage[Fe]=JSON.stringify(e)},qe="MINESWEEPER_SAVE_SLOTS";let Se=C(null);Se.subscribe(e=>{if(typeof window<"u"&&e!=null){let t=Ce(D);Be(t,e)}});let D=C(-1);D.subscribe(e=>{e!==-1&&Se.set(ut(e))});let V=C();var Ve;typeof window<"u"&&V.set(JSON.parse((Ve=localStorage[qe])!=null?Ve:"[]").map(e=>({index:e,selected:!1})));V.subscribe(e=>{typeof window>"u"||e==null||(localStorage[qe]=JSON.stringify(e.map(t=>t.index)))});const Xe=C();typeof window<"u"&&Xe.set(ht());Xe.subscribe(e=>{typeof window>"u"||e==null||dt(e)});const Ee=C();typeof window<"u"&&Ee.set(ct());Ee.subscribe(e=>{if(typeof window>"u"||e==null)return;const t=W[e.theme];document.documentElement.style.setProperty("--brand-hue",""+t.hue),document.documentElement.style.setProperty("--sat-mul",""+e.saturation),document.documentElement.style.setProperty("--accent",""+t.accent),document.documentElement.style.setProperty("--cell-hue",""+t.cellHue),t.light?(document.documentElement.style.setProperty("--light-offset","60%"),document.documentElement.style.setProperty("--font-color","black")):(document.documentElement.style.setProperty("--light-offset","0%"),document.documentElement.style.setProperty("--font-color","whitesmoke")),ft(e)});function Re(e){let t,s;return{c(){t=y("img"),this.h()},l(l){t=b(l,"IMG",{src:!0,alt:!0,draggable:!0,class:!0}),this.h()},h(){var l,n;me(t.src,s=e[3])||g(t,"src",s),g(t,"alt",""),g(t,"draggable","false"),g(t,"class","svelte-1bt4tps"),A(t,"filter",(n=W[(l=e[6])==null?void 0:l.theme])!=null&&n.light?"invert()":null,!1)},m(l,n){j(l,t,n)},p(l,n){var a,c;n&8&&!me(t.src,s=l[3])&&g(t,"src",s),n&64&&A(t,"filter",(c=W[(a=l[6])==null?void 0:a.theme])!=null&&c.light?"invert()":null,!1)},d(l){l&&p(t)}}}function gt(e){let t,s,l,n=`${e[4]}rem`,a,c,f,u=e[1]==="icon"&&Re(e);const d=e[8].default,o=ue(d,e,e[7],null);return{c(){t=y("button"),u&&u.c(),s=k(),o&&o.c(),this.h()},l(i){t=b(i,"BUTTON",{class:!0,title:!0});var r=v(t);u&&u.l(r),s=M(r),o&&o.l(r),r.forEach(p),this.h()},h(){var i,r;t.disabled=e[0],g(t,"class",l=Ne(["unstyled",e[1],e[2],(r=W[(i=e[6])==null?void 0:i.theme])!=null&&r.light?"light":"dark"].join(" "))+" svelte-1bt4tps"),g(t,"title",e[5]),A(t,"padding",n,!1)},m(i,r){j(i,t,r),u&&u.m(t,null),_(t,s),o&&o.m(t,null),a=!0,c||(f=Je(t,"click",e[9]),c=!0)},p(i,[r]){var h,I;i[1]==="icon"?u?u.p(i,r):(u=Re(i),u.c(),u.m(t,s)):u&&(u.d(1),u=null),o&&o.p&&(!a||r&128)&&he(o,d,i,i[7],a?ge(d,i[7],r,null):de(i[7]),null),(!a||r&1)&&(t.disabled=i[0]),(!a||r&70&&l!==(l=Ne(["unstyled",i[1],i[2],(I=W[(h=i[6])==null?void 0:h.theme])!=null&&I.light?"light":"dark"].join(" "))+" svelte-1bt4tps"))&&g(t,"class",l),(!a||r&32)&&g(t,"title",i[5]),r&16&&n!==(n=`${i[4]}rem`)&&A(t,"padding",n,!1)},i(i){a||(N(o,i),a=!0)},o(i){R(o,i),a=!1},d(i){i&&p(t),u&&u.d(),o&&o.d(i),c=!1,f()}}}function mt(e,t,s){let l;Ze(e,Ee,h=>s(6,l=h));let{$$slots:n={},$$scope:a}=t,{disabled:c=!1}=t,{type:f="normal"}=t,{size:u="medium"}=t,{iconSrc:d=""}=t,{padding:o=null}=t,{title:i=null}=t;function r(h){xe.call(this,e,h)}return e.$$set=h=>{"disabled"in h&&s(0,c=h.disabled),"type"in h&&s(1,f=h.type),"size"in h&&s(2,u=h.size),"iconSrc"in h&&s(3,d=h.iconSrc),"padding"in h&&s(4,o=h.padding),"title"in h&&s(5,i=h.title),"$$scope"in h&&s(7,a=h.$$scope)},[c,f,u,d,o,i,l,a,n,r]}class re extends F{constructor(t){super(),q(this,t,mt,gt,X,{disabled:0,type:1,size:2,iconSrc:3,padding:4,title:5})}}z.disable_scroll_handling;const ce=z.goto;z.invalidate;z.invalidateAll;z.prefetch;z.prefetch_routes;z.before_navigate;z.after_navigate;const Ae="",ze="Minesweeper",Ge="SFG + TMH Games";function _t(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}function Wt(e){const t=Math.floor(e/3600),s=Math.floor(e/60)%60,l=e%60;let n="";return t>0&&(n+=t.toString().padStart(2,"0")+":"),n+=s.toString().padStart(2,"0")+":",n+=l.toString().padStart(2,"0"),n}const pt=e=>({}),Te=e=>({}),yt=e=>({}),He=e=>({});function bt(e){let t,s,l,n,a,c,f,u,d,o,i,r,h,I,L,Y,J,K,Q,G,Z,T,x,O;i=new re({props:{type:"icon",size:"large",iconSrc:rt,padding:.2,title:"Home"}}),i.$on("click",e[2]),h=new re({props:{type:"icon",size:"large",iconSrc:at,padding:.2,title:"Stats"}}),h.$on("click",e[3]),L=new re({props:{type:"icon",size:"large",iconSrc:ot,padding:.2,title:"Settings"}}),L.$on("click",e[4]);const $=e[1].sidebar,S=ue($,e,e[0],He),ee=e[1].content,E=ue(ee,e,e[0],Te);return{c(){t=y("main"),s=y("aside"),l=y("header"),n=y("h1"),a=te(ze),c=k(),f=y("h3"),u=te(Ge),d=k(),o=y("div"),se(i.$$.fragment),r=k(),se(h.$$.fragment),I=k(),se(L.$$.fragment),Y=k(),J=y("hr"),K=k(),S&&S.c(),Q=k(),G=y("div"),E&&E.c(),Z=k(),T=y("footer"),x=te(Ae),this.h()},l(m){t=b(m,"MAIN",{class:!0});var w=v(t);s=b(w,"ASIDE",{class:!0});var P=v(s);l=b(P,"HEADER",{class:!0});var U=v(l);n=b(U,"H1",{id:!0,class:!0});var we=v(n);a=le(we,ze),we.forEach(p),c=M(U),f=b(U,"H3",{id:!0,class:!0});var ve=v(f);u=le(ve,Ge),ve.forEach(p),U.forEach(p),d=M(P),o=b(P,"DIV",{class:!0});var H=v(o);ne(i.$$.fragment,H),r=M(H),ne(h.$$.fragment,H),I=M(H),ne(L.$$.fragment,H),H.forEach(p),Y=M(P),J=b(P,"HR",{class:!0}),K=M(P),S&&S.l(P),P.forEach(p),Q=M(w),G=b(w,"DIV",{class:!0});var ke=v(G);E&&E.l(ke),ke.forEach(p),Z=M(w),T=b(w,"FOOTER",{class:!0});var Me=v(T);x=le(Me,Ae),Me.forEach(p),w.forEach(p),this.h()},h(){g(n,"id","title"),g(n,"class","svelte-1lkzwj2"),g(f,"id","creator"),g(f,"class","svelte-1lkzwj2"),g(l,"class","svelte-1lkzwj2"),g(o,"class","menus svelte-1lkzwj2"),g(J,"class","svelte-1lkzwj2"),g(s,"class","sidebar svelte-1lkzwj2"),g(G,"class","content svelte-1lkzwj2"),g(T,"class","version svelte-1lkzwj2"),g(t,"class","wrapper svelte-1lkzwj2")},m(m,w){j(m,t,w),_(t,s),_(s,l),_(l,n),_(n,a),_(l,c),_(l,f),_(f,u),_(s,d),_(s,o),ie(i,o,null),_(o,r),ie(h,o,null),_(o,I),ie(L,o,null),_(s,Y),_(s,J),_(s,K),S&&S.m(s,null),_(t,Q),_(t,G),E&&E.m(G,null),_(t,Z),_(t,T),_(T,x),O=!0},p(m,[w]){S&&S.p&&(!O||w&1)&&he(S,$,m,m[0],O?ge($,m[0],w,yt):de(m[0]),He),E&&E.p&&(!O||w&1)&&he(E,ee,m,m[0],O?ge(ee,m[0],w,pt):de(m[0]),Te)},i(m){O||(N(i.$$.fragment,m),N(h.$$.fragment,m),N(L.$$.fragment,m),N(S,m),N(E,m),O=!0)},o(m){R(i.$$.fragment,m),R(h.$$.fragment,m),R(L.$$.fragment,m),R(S,m),R(E,m),O=!1},d(m){m&&p(t),ae(i),ae(h),ae(L),S&&S.d(m),E&&E.d(m)}}}function St(e,t,s){let{$$slots:l={},$$scope:n}=t;const a=()=>{ce(`${oe}`)},c=()=>{ce(`${oe}/stats`)},f=()=>{ce(`${oe}/settings`)};return e.$$set=u=>{"$$scope"in u&&s(0,n=u.$$scope)},[n,l,a,c,f]}class Vt extends F{constructor(t){super(),q(this,t,St,bt,X,{})}}var ye=(e=>(e.Closed="closed",e.Opened="opened",e.Flagged="flagged",e))(ye||{}),Ye=(e=>(e.Empty="empty",e.Mine="mine",e))(Ye||{}),Et=(e=>(e.Playing="playing",e.Won="won",e.Lost="lost",e))(Et||{}),Ot,Pt,Rt;class fe{}Ot=8,Pt=12,Rt=16,B(fe,Ot,{width:8,height:8,numMines:10}),B(fe,Pt,{width:12,height:12,numMines:20}),B(fe,Rt,{width:16,height:16,numMines:40});const Ct=e=>{const t=Array(e.width*e.height);for(let l=0;l<e.height*e.width;l++)t[l]={state:"closed",numNeighborMines:0,type:"empty"};const s={board:t,...e,firstMove:!0,state:"playing",lostToCell:-1,title:"Save Game ",stats:{timePlayed:0}};for(let l=0;l<e.numMines;l++)wt(s);return vt(s),s},wt=(e,t=[])=>{const s=[];for(let n=0;n<e.width*e.height;n++)e.board[n].type==="empty"&&t.indexOf(n)===-1&&s.push(n);const l=s[_t(0,s.length)];e.board[l].type="mine"},vt=e=>{for(let t=0;t<e.width;t++)for(let s=0;s<e.height;s++){let l=0;for(let a=0;a<9;a++){const c=Math.floor(a/3)-1,f=a%3-1,u=t+c,d=s+f;if(u<0||u>=e.width||d<0||d>=e.height)continue;const o=d*e.width+u;e.board[o].type==="mine"&&(l+=1)}const n=s*e.width+t;e.board[n].numNeighborMines=l}};function je(e,{delay:t=0,duration:s=400,easing:l=$e}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:s,easing:l,css:a=>`opacity: ${a*n}`}}const kt=""+new URL("../assets/check-ce7a5ec0.svg",import.meta.url).href;function We(e){let t,s,l,n;return{c(){t=y("img"),this.h()},l(a){t=b(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){me(t.src,s=kt)||g(t,"src",s),g(t,"alt",""),g(t,"class","svelte-zd59fy")},m(a,c){j(a,t,c),n=!0},p:pe,i(a){n||(a&&lt(()=>{l||(l=Pe(t,je,{duration:50},!0)),l.run(1)}),n=!0)},o(a){a&&(l||(l=Pe(t,je,{duration:50},!1)),l.run(0)),n=!1},d(a){a&&p(t),a&&l&&l.end()}}}function Mt(e){let t,s,l,n=`${e[1]}rem`,a=`${e[1]}rem`,c,f,u=[{type:"checkbox"},e[2]],d={};for(let i=0;i<u.length;i+=1)d=_e(d,u[i]);let o=e[0]&&We();return{c(){t=y("div"),s=y("input"),l=k(),o&&o.c(),this.h()},l(i){t=b(i,"DIV",{class:!0});var r=v(t);s=b(r,"INPUT",{type:!0}),l=M(r),o&&o.l(r),r.forEach(p),this.h()},h(){Ie(s,d),Le(s,"svelte-zd59fy",!0),g(t,"class","wrapper svelte-zd59fy"),A(t,"width",n,!1),A(t,"height",a,!1)},m(i,r){j(i,t,r),_(t,s),s.autofocus&&s.focus(),s.checked=e[0],_(t,l),o&&o.m(t,null),c||(f=Je(s,"change",e[3]),c=!0)},p(i,[r]){Ie(s,d=et(u,[{type:"checkbox"},r&4&&i[2]])),r&1&&(s.checked=i[0]),Le(s,"svelte-zd59fy",!0),i[0]?o?(o.p(i,r),r&1&&N(o,1)):(o=We(),o.c(),N(o,1),o.m(t,null)):o&&(tt(),R(o,1,1,()=>{o=null}),st()),r&2&&n!==(n=`${i[1]}rem`)&&A(t,"width",n,!1),r&2&&a!==(a=`${i[1]}rem`)&&A(t,"height",a,!1)},i(i){N(o)},o(i){R(o)},d(i){i&&p(t),o&&o.d(),c=!1,f()}}}function Nt(e,t,s){let{checked:l}=t,{size:n=1.5}=t;function a(){l=this.checked,s(0,l)}return e.$$set=c=>{s(2,t=_e(_e({},t),Oe(c))),"checked"in c&&s(0,l=c.checked),"size"in c&&s(1,n=c.size)},t=Oe(t),[l,n,t,a]}class Jt extends F{constructor(t){super(),q(this,t,Nt,Mt,X,{checked:0,size:1})}}function It(e){let t,s,l;return{c(){t=y("canvas"),this.h()},l(n){t=b(n,"CANVAS",{width:!0,height:!0,class:!0}),v(t).forEach(p),this.h()},h(){g(t,"width",s=e[0].width+"px"),g(t,"height",l=e[0].height+"px"),g(t,"class","svelte-jhkqpr")},m(n,a){j(n,t,a),e[4](t)},p(n,[a]){a&1&&s!==(s=n[0].width+"px")&&g(t,"width",s),a&1&&l!==(l=n[0].height+"px")&&g(t,"height",l)},i:pe,o:pe,d(n){n&&p(t),e[4](null)}}}function Lt(e,t,s){let{showMines:l=!1}=t,{game:n}=t;const a={mine:"red",closed:"navy",empty:"blue",flag:"gold",clickedMine:"violet"};let c,f;nt(()=>{s(3,f=c.getContext("2d")),s(3,f.imageSmoothingEnabled=!1,f),f.clearRect(0,0,c.width,c.height)});function u(d){it[d?"unshift":"push"](()=>{c=d,s(1,c)})}return e.$$set=d=>{"showMines"in d&&s(2,l=d.showMines),"game"in d&&s(0,n=d.game)},e.$$.update=()=>{if(e.$$.dirty&15&&f){const d=c.width/n.width,o=c.height/n.height;for(let i=0;i<n.width*n.height;i++){const r=n.board[i],h=i%n.width,I=Math.floor(i/n.height);i===n.lostToCell&&l?s(3,f.fillStyle=a.clickedMine,f):r.state===ye.Closed?s(3,f.fillStyle=a.closed,f):r.type===Ye.Mine&&l?s(3,f.fillStyle=a.mine,f):r.state===ye.Flagged?s(3,f.fillStyle=a.flag,f):s(3,f.fillStyle=a.empty,f),f.fillRect(h*d,I*o,d,o)}}},[n,c,l,f,u]}class Ut extends F{constructor(t){super(),q(this,t,Lt,It,X,{showMines:2,game:0})}}export{re as B,Jt as C,Et as G,Ut as M,Vt as S,fe as a,ut as b,D as c,Ht as d,ye as e,Ye as f,ce as g,wt as h,je as i,Se as j,Ee as k,jt as l,W as m,Ct as n,Tt as o,vt as r,Xe as s,Wt as t,V as u};
