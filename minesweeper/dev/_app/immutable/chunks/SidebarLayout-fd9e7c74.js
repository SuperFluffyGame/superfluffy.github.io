var Me=Object.defineProperty;var Ee=(e,t,s)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var R=(e,t,s)=>(Ee(e,typeof t!="symbol"?t+"":t,s),s);import{w as X,d as k}from"./singletons-04806306.js";import{T as me,S as Y,i as Z,s as K,k as w,l as M,m as v,h as y,n as d,b as V,A as x,o as Se,L as ve,U as ke,V as D,a as I,c as A,W as se,p as j,X as le,G as _,J as Ne,Y as Ie,f as G,g as Ae,t as T,d as Ce,Z as ne,I as Ge,_ as Oe,$ as ie,B as oe,q as B,r as J,D as ae,E as re,F as ce}from"./index-a63c78df.js";function Le(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}const pe="MINESWEEPER_SAVE_SLOTS",Q="MINESWEEPER_SAVE_GAME",Re=e=>{let t=localStorage[Q+`_${e}`];return t?JSON.parse(t):null},be=(e,t)=>{ye(e),localStorage[Q+`_${e}`]=JSON.stringify(t)},ye=e=>{localStorage.removeItem(Q+`_${e}`)},he="v0.2.0";let z=X(null);z.subscribe(e=>{if(typeof window<"u"&&e!=null){let t=me(H);be(t,e)}});let H=X(-1);H.subscribe(e=>{typeof window<"u"&&e!=null&&e!=-1&&z.set(Re(e))});let O=X(null);O.subscribe(e=>{typeof window<"u"&&e!=null&&(localStorage[pe]=JSON.stringify(e))});var ge;typeof window<"u"&&O.set(JSON.parse((ge=localStorage[pe])!=null?ge:"[]"));var U=(e=>(e.Closed="closed",e.Opened="opened",e.Flagged="flagged",e))(U||{}),we=(e=>(e.Empty="empty",e.Mine="mine",e))(we||{}),je=(e=>(e.Playing="playing",e.Won="won",e.Lost="lost",e))(je||{}),Ue,Xe,Ye;class q{}Ue=8,Xe=12,Ye=16,R(q,Ue,{width:8,height:8,numMines:10}),R(q,Xe,{width:12,height:12,numMines:20}),R(q,Ye,{width:16,height:16,numMines:40});const ze=e=>{const t=Array(e.width*e.height);for(let l=0;l<e.height*e.width;l++)t[l]={state:"closed",numNeighborMines:0,type:"empty"};const s={board:t,...e,firstMove:!0,state:"playing",lostToCell:-1,title:"Save Game "};for(let l=0;l<e.numMines;l++)Te(s);return He(s),s},Te=(e,t=[])=>{const s=[];for(let n=0;n<e.width*e.height;n++)e.board[n].type==="empty"&&s.push(n);const l=s[Le(0,s.length)];e.board[l].type="mine"},He=e=>{for(let t=0;t<(e==null?void 0:e.width);t++)for(let s=0;s<(e==null?void 0:e.height);s++){let l=0;for(let i=0;i<9;i++){const o=Math.floor(i/3)-1,c=i%3-1,g=t+o,h=s+c;if(g<0||g>=e.width||h<0||h>=e.height)continue;const a=h*e.width+g;e.board[a].type==="mine"&&(l+=1)}const n=s*e.width+t;e.board[n].numNeighborMines=l}};k.disable_scroll_handling;const $e=k.goto;k.invalidate;k.invalidateAll;k.prefetch;k.prefetch_routes;k.before_navigate;k.after_navigate;const et=e=>{O.update(t=>(t.splice(t.indexOf(e),1),t)),ye(e)},tt=e=>{let t=me(O),s;for(let l=0;;l++)if(t.indexOf(l)===-1){s=l;break}e.title+=s,be(s,e),H.set(-1),H.set(s),O.update(l=>{var n;return(n=l==null?void 0:l.push)==null||n.call(l,s),l}),z.set(e)};function Ve(e){let t,s,l;return{c(){t=w("canvas"),this.h()},l(n){t=M(n,"CANVAS",{width:!0,height:!0,class:!0}),v(t).forEach(y),this.h()},h(){d(t,"width",s=e[0].width+"px"),d(t,"height",l=e[0].height+"px"),d(t,"class","svelte-jhkqpr")},m(n,i){V(n,t,i),e[4](t)},p(n,[i]){i&1&&s!==(s=n[0].width+"px")&&d(t,"width",s),i&1&&l!==(l=n[0].height+"px")&&d(t,"height",l)},i:x,o:x,d(n){n&&y(t),e[4](null)}}}function We(e,t,s){let{showMines:l=!1}=t,{game:n}=t,i,o;Se(()=>{s(3,o=i.getContext("2d")),s(3,o.imageSmoothingEnabled=!1,o),o.fillRect(0,0,i.width,i.height)});const c={mine:"red",closed:"navy",empty:"blue",flag:"gold",clickedMine:"magenta"};function g(h){ve[h?"unshift":"push"](()=>{i=h,s(1,i)})}return e.$$set=h=>{"showMines"in h&&s(2,l=h.showMines),"game"in h&&s(0,n=h.game)},e.$$.update=()=>{if(e.$$.dirty&15&&o){const h=i.width/n.width,a=i.height/n.height;for(let r=0;r<n.width*n.height;r++){const u=n.board[r],C=r%n.width,E=Math.floor(r/n.height);u.state===U.Closed?s(3,o.fillStyle=c.closed,o):r===n.lostToCell&&l?s(3,o.fillStyle=c.clickedMine,o):u.type===we.Mine&&l?s(3,o.fillStyle=c.mine,o):u.state===U.Flagged?s(3,o.fillStyle=c.flag,o):s(3,o.fillStyle=c.empty,o),o.fillRect(C*h,E*a,h,a)}}},[n,i,l,o,g]}class st extends Y{constructor(t){super(),Z(this,t,We,Ve,K,{showMines:2,game:0})}}function fe(e,{delay:t=0,duration:s=400,easing:l=ke}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:s,easing:l,css:i=>`opacity: ${i*n}`}}const Fe=""+new URL("../assets/check-ce7a5ec0.svg",import.meta.url).href;function ue(e){let t,s,l,n;return{c(){t=w("img"),this.h()},l(i){t=M(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ge(t.src,s=Fe)||d(t,"src",s),d(t,"alt",""),d(t,"class","svelte-143f2yf")},m(i,o){V(i,t,o),n=!0},p:x,i(i){n||(Oe(()=>{l||(l=ie(t,fe,{duration:50},!0)),l.run(1)}),n=!0)},o(i){l||(l=ie(t,fe,{duration:50},!1)),l.run(0),n=!1},d(i){i&&y(t),i&&l&&l.end()}}}function Pe(e){let t,s,l,n=`${e[2]}rem`,i,o,c,g=[{type:"checkbox"},e[3]],h={};for(let r=0;r<g.length;r+=1)h=D(h,g[r]);let a=e[0]&&ue();return{c(){t=w("div"),s=w("input"),l=I(),a&&a.c(),this.h()},l(r){t=M(r,"DIV",{class:!0});var u=v(t);s=M(u,"INPUT",{type:!0}),l=A(u),a&&a.l(u),u.forEach(y),this.h()},h(){se(s,h),j(s,"border-color",e[1],!1),le(s,"svelte-143f2yf",!0),d(t,"class","wrapper svelte-143f2yf"),j(t,"width",n,!1)},m(r,u){V(r,t,u),_(t,s),s.autofocus&&s.focus(),s.checked=e[0],_(t,l),a&&a.m(t,null),i=!0,o||(c=Ne(s,"change",e[4]),o=!0)},p(r,[u]){se(s,h=Ie(g,[{type:"checkbox"},u&8&&r[3]])),u&1&&(s.checked=r[0]),j(s,"border-color",r[1],!1),le(s,"svelte-143f2yf",!0),r[0]?a?(a.p(r,u),u&1&&G(a,1)):(a=ue(),a.c(),G(a,1),a.m(t,null)):a&&(Ae(),T(a,1,1,()=>{a=null}),Ce()),u&4&&n!==(n=`${r[2]}rem`)&&j(t,"width",n,!1)},i(r){i||(G(a),i=!0)},o(r){T(a),i=!1},d(r){r&&y(t),a&&a.d(),o=!1,c()}}}function Be(e,t,s){let{checked:l}=t,{borderColor:n="black"}=t,{size:i=1.5}=t;function o(){l=this.checked,s(0,l)}return e.$$set=c=>{s(3,t=D(D({},t),ne(c))),"checked"in c&&s(0,l=c.checked),"borderColor"in c&&s(1,n=c.borderColor),"size"in c&&s(2,i=c.size)},t=ne(t),[l,n,i,t,o]}class lt extends Y{constructor(t){super(),Z(this,t,Be,Pe,K,{checked:0,borderColor:1,size:2})}}const Je=e=>({}),de=e=>({class:"content"}),qe=e=>({}),_e=e=>({});function xe(e){let t,s,l,n,i,o,c,g,h,a,r,u,C,E,W,S;const F=e[1].sidebar,m=oe(F,e,e[0],_e),P=e[1].content,p=oe(P,e,e[0],de);return{c(){t=w("main"),s=w("aside"),l=w("header"),n=w("h1"),i=B("MineSweeper"),o=I(),c=w("h3"),g=B("By SFG and TMH"),h=I(),a=w("hr"),r=I(),m&&m.c(),u=I(),p&&p.c(),C=I(),E=w("footer"),W=B(he),this.h()},l(f){t=M(f,"MAIN",{class:!0});var b=v(t);s=M(b,"ASIDE",{class:!0});var N=v(s);l=M(N,"HEADER",{class:!0});var L=v(l);n=M(L,"H1",{id:!0,class:!0});var $=v(n);i=J($,"MineSweeper"),$.forEach(y),o=A(L),c=M(L,"H3",{id:!0,class:!0});var ee=v(c);g=J(ee,"By SFG and TMH"),ee.forEach(y),L.forEach(y),h=A(N),a=M(N,"HR",{class:!0}),r=A(N),m&&m.l(N),N.forEach(y),u=A(b),p&&p.l(b),C=A(b),E=M(b,"FOOTER",{class:!0});var te=v(E);W=J(te,he),te.forEach(y),b.forEach(y),this.h()},h(){d(n,"id","title"),d(n,"class","svelte-1oaj3m2"),d(c,"id","creator"),d(c,"class","svelte-1oaj3m2"),d(l,"class","svelte-1oaj3m2"),d(a,"class","svelte-1oaj3m2"),d(s,"class","sidebar svelte-1oaj3m2"),d(E,"class","version svelte-1oaj3m2"),d(t,"class","wrapper svelte-1oaj3m2")},m(f,b){V(f,t,b),_(t,s),_(s,l),_(l,n),_(n,i),_(l,o),_(l,c),_(c,g),_(s,h),_(s,a),_(s,r),m&&m.m(s,null),_(t,u),p&&p.m(t,null),_(t,C),_(t,E),_(E,W),S=!0},p(f,[b]){m&&m.p&&(!S||b&1)&&ae(m,F,f,f[0],S?ce(F,f[0],b,qe):re(f[0]),_e),p&&p.p&&(!S||b&1)&&ae(p,P,f,f[0],S?ce(P,f[0],b,Je):re(f[0]),de)},i(f){S||(G(m,f),G(p,f),S=!0)},o(f){T(m,f),T(p,f),S=!1},d(f){f&&y(t),m&&m.d(f),p&&p.d(f)}}}function De(e,t,s){let{$$slots:l={},$$scope:n}=t;return e.$$set=i=>{"$$scope"in i&&s(0,n=i.$$scope)},[n,l]}class nt extends Y{constructor(t){super(),Z(this,t,De,xe,K,{})}}export{q as B,lt as C,je as G,st as M,nt as S,tt as a,U as b,H as c,et as d,we as e,fe as f,$e as g,z as h,Re as l,ze as n,He as r,Te as s,O as u};
