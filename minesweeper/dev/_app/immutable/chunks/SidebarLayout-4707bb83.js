var Ie=Object.defineProperty;var Le=(e,t,s)=>t in e?Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var T=(e,t,s)=>(Le(e,typeof t!="symbol"?t+"":t,s),s);import{T as Oe,S as K,i as Z,s as Q,U as X,k as S,a as I,l as E,m as v,c as L,h as y,V as ne,p as A,W as ie,n as u,b as V,G as _,J as Se,X as Ce,f as C,g as Ge,t as W,d as Re,Y as oe,K as Te,A as Y,Z as We,_ as ae,o as Pe,M as Ve,$ as Ee,B as re,q as D,r as B,D as ce,E as he,F as fe}from"./index-896152e9.js";import{w as J,d as k,c as Je}from"./singletons-34e8a7fe.js";function de(e,{delay:t=0,duration:s=400,easing:l=Oe}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:s,easing:l,css:i=>`opacity: ${i*n}`}}const He=""+new URL("../assets/check-ce7a5ec0.svg",import.meta.url).href;function ue(e){let t,s,l,n;return{c(){t=S("img"),this.h()},l(i){t=E(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Te(t.src,s=He)||u(t,"src",s),u(t,"alt",""),u(t,"class","svelte-8hkayd")},m(i,c){V(i,t,c),n=!0},p:Y,i(i){n||(i&&We(()=>{l||(l=ae(t,de,{duration:50},!0)),l.run(1)}),n=!0)},o(i){i&&(l||(l=ae(t,de,{duration:50},!1)),l.run(0)),n=!1},d(i){i&&y(t),i&&l&&l.end()}}}function xe(e){let t,s,l,n=`${e[2]}rem`,i=`${e[2]}rem`,c,o,g=[{type:"checkbox"},e[3]],h={};for(let r=0;r<g.length;r+=1)h=X(h,g[r]);let a=e[0]&&ue();return{c(){t=S("div"),s=S("input"),l=I(),a&&a.c(),this.h()},l(r){t=E(r,"DIV",{class:!0});var d=v(t);s=E(d,"INPUT",{type:!0}),l=L(d),a&&a.l(d),d.forEach(y),this.h()},h(){ne(s,h),A(s,"border-color",e[1],!1),ie(s,"svelte-8hkayd",!0),u(t,"class","wrapper svelte-8hkayd"),A(t,"width",n,!1),A(t,"height",i,!1)},m(r,d){V(r,t,d),_(t,s),s.autofocus&&s.focus(),s.checked=e[0],_(t,l),a&&a.m(t,null),c||(o=Se(s,"change",e[4]),c=!0)},p(r,[d]){ne(s,h=Ce(g,[{type:"checkbox"},d&8&&r[3]])),d&1&&(s.checked=r[0]),A(s,"border-color",r[1],!1),ie(s,"svelte-8hkayd",!0),r[0]?a?(a.p(r,d),d&1&&C(a,1)):(a=ue(),a.c(),C(a,1),a.m(t,null)):a&&(Ge(),W(a,1,1,()=>{a=null}),Re()),d&4&&n!==(n=`${r[2]}rem`)&&A(t,"width",n,!1),d&4&&i!==(i=`${r[2]}rem`)&&A(t,"height",i,!1)},i(r){C(a)},o(r){W(a)},d(r){r&&y(t),a&&a.d(),c=!1,o()}}}function Fe(e,t,s){let{checked:l}=t,{borderColor:n="black"}=t,{size:i=1.5}=t;function c(){l=this.checked,s(0,l)}return e.$$set=o=>{s(3,t=X(X({},t),oe(o))),"checked"in o&&s(0,l=o.checked),"borderColor"in o&&s(1,n=o.borderColor),"size"in o&&s(2,i=o.size)},t=oe(t),[l,n,i,t,c]}class rt extends K{constructor(t){super(),Z(this,t,Fe,xe,Q,{checked:0,borderColor:1,size:2})}}const _e="v0.3.0",ge="Minesweeper",me="SFG + TMH Games";function qe(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}function ct(e){const t=Math.floor(e/3600),s=Math.floor(e/60)%60,l=e%60;let n="";return t>0&&(n+=t.toString().padStart(2,"0")+":"),n+=s.toString().padStart(2,"0")+":",n+=l.toString().padStart(2,"0"),n}var j=(e=>(e.Closed="closed",e.Opened="opened",e.Flagged="flagged",e))(j||{}),we=(e=>(e.Empty="empty",e.Mine="mine",e))(we||{}),De=(e=>(e.Playing="playing",e.Won="won",e.Lost="lost",e))(De||{}),st,lt,nt;class U{}st=8,lt=12,nt=16,T(U,st,{width:8,height:8,numMines:10}),T(U,lt,{width:12,height:12,numMines:20}),T(U,nt,{width:16,height:16,numMines:40});const ht=e=>{const t=Array(e.width*e.height);for(let l=0;l<e.height*e.width;l++)t[l]={state:"closed",numNeighborMines:0,type:"empty"};const s={board:t,...e,firstMove:!0,state:"playing",lostToCell:-1,title:"Save Game ",stats:{timePlayed:0}};for(let l=0;l<e.numMines;l++)Be(s);return Ue(s),s},Be=(e,t=[])=>{const s=[];for(let n=0;n<e.width*e.height;n++)e.board[n].type==="empty"&&t.indexOf(n)===-1&&s.push(n);const l=s[qe(0,s.length)];e.board[l].type="mine"},Ue=e=>{for(let t=0;t<e.width;t++)for(let s=0;s<e.height;s++){let l=0;for(let i=0;i<9;i++){const c=Math.floor(i/3)-1,o=i%3-1,g=t+c,h=s+o;if(g<0||g>=e.width||h<0||h>=e.height)continue;const a=h*e.width+g;e.board[a].type==="mine"&&(l+=1)}const n=s*e.width+t;e.board[n].numNeighborMines=l}};function Xe(e){let t,s,l;return{c(){t=S("canvas"),this.h()},l(n){t=E(n,"CANVAS",{width:!0,height:!0,class:!0}),v(t).forEach(y),this.h()},h(){u(t,"width",s=e[0].width+"px"),u(t,"height",l=e[0].height+"px"),u(t,"class","svelte-jhkqpr")},m(n,i){V(n,t,i),e[4](t)},p(n,[i]){i&1&&s!==(s=n[0].width+"px")&&u(t,"width",s),i&1&&l!==(l=n[0].height+"px")&&u(t,"height",l)},i:Y,o:Y,d(n){n&&y(t),e[4](null)}}}function Ye(e,t,s){let{showMines:l=!1}=t,{game:n}=t;const i={mine:"red",closed:"navy",empty:"blue",flag:"gold",clickedMine:"violet"};let c,o;Pe(()=>{s(3,o=c.getContext("2d")),s(3,o.imageSmoothingEnabled=!1,o),o.clearRect(0,0,c.width,c.height)});function g(h){Ve[h?"unshift":"push"](()=>{c=h,s(1,c)})}return e.$$set=h=>{"showMines"in h&&s(2,l=h.showMines),"game"in h&&s(0,n=h.game)},e.$$.update=()=>{if(e.$$.dirty&15&&o){const h=c.width/n.width,a=c.height/n.height;for(let r=0;r<n.width*n.height;r++){const d=n.board[r],O=r%n.width,w=Math.floor(r/n.height);r===n.lostToCell&&l?s(3,o.fillStyle=i.clickedMine,o):d.state===j.Closed?s(3,o.fillStyle=i.closed,o):d.type===we.Mine&&l?s(3,o.fillStyle=i.mine,o):d.state===j.Flagged?s(3,o.fillStyle=i.flag,o):s(3,o.fillStyle=i.empty,o),o.fillRect(O*h,w*a,h,a)}}},[n,c,l,o,g]}class ft extends K{constructor(t){super(),Z(this,t,Ye,Xe,Q,{showMines:2,game:0})}}const Me="MINESWEEPER_OVERALL_STATS",je=()=>{var s,l,n,i;const e=JSON.parse((s=localStorage[Me])!=null?s:"{}");return{gamesWon:(l=e==null?void 0:e.gamesWon)!=null?l:0,gamesLost:(n=e==null?void 0:e.gamesLost)!=null?n:0,cellsOpened:(i=e==null?void 0:e.cellsOpened)!=null?i:0}},Ke=e=>{localStorage[Me]=JSON.stringify(e)},ve="MINESWEEPER_SAVE_SLOTS";let z=J(null);z.subscribe(e=>{if(typeof window<"u"&&e!=null){let t=Ee(P);Ne(t,e)}});let P=J(-1);P.subscribe(e=>{typeof window<"u"&&e!=null&&e!=-1&&z.set(Ze(e))});let G=J(null);G.subscribe(e=>{typeof window<"u"&&e!=null&&(localStorage[ve]=JSON.stringify(e.map(t=>t.index)))});var ye;typeof window<"u"&&G.set(JSON.parse((ye=localStorage[ve])!=null?ye:"[]").map(e=>({index:e,selected:!1})));const ke=J(null);ke.subscribe(e=>{typeof window<"u"&&e!=null&&Ke(e)});typeof window<"u"&&ke.set(je());const $="MINESWEEPER_SAVE_GAME",Ze=e=>{let t=localStorage[$+`_${e}`];return t?JSON.parse(t):null},Ne=(e,t)=>{Ae(e),localStorage[$+`_${e}`]=JSON.stringify(t)},Ae=e=>{localStorage.removeItem($+`_${e}`)},dt=e=>{G.update(t=>(t.splice(t.findIndex(s=>s.index===e),1),t)),Ae(e)},ut=e=>{let t=Ee(G),s;for(let l=0;;l++)if(t.findIndex(n=>n.index===l)===-1){s=l;break}e.title+=s,Ne(s,e),P.set(-1),P.set(s),G.update(l=>(l==null||l.push({index:s,selected:!1}),l)),z.set(e)};k.disable_scroll_handling;const Qe=k.goto;k.invalidate;k.invalidateAll;k.prefetch;k.prefetch_routes;k.before_navigate;k.after_navigate;const ze=e=>({}),pe=e=>({class:"content"}),$e=e=>({}),be=e=>({});function et(e){let t,s,l,n,i,c,o,g,h,a,r,d,O,w,H,M,x,ee;const F=e[2].sidebar,m=re(F,e,e[1],be),q=e[2].content,p=re(q,e,e[1],pe);return{c(){t=S("main"),s=S("aside"),l=S("header"),n=S("h1"),i=D(ge),c=I(),o=S("h3"),g=D(me),h=I(),a=S("hr"),r=I(),m&&m.c(),d=I(),p&&p.c(),O=I(),w=S("footer"),H=D(_e),this.h()},l(f){t=E(f,"MAIN",{class:!0});var b=v(t);s=E(b,"ASIDE",{class:!0});var N=v(s);l=E(N,"HEADER",{class:!0});var R=v(l);n=E(R,"H1",{id:!0,class:!0});var te=v(n);i=B(te,ge),te.forEach(y),c=L(R),o=E(R,"H3",{id:!0,class:!0});var se=v(o);g=B(se,me),se.forEach(y),R.forEach(y),h=L(N),a=E(N,"HR",{class:!0}),r=L(N),m&&m.l(N),N.forEach(y),d=L(b),p&&p.l(b),O=L(b),w=E(b,"FOOTER",{class:!0});var le=v(w);H=B(le,_e),le.forEach(y),b.forEach(y),this.h()},h(){u(n,"id","title"),u(n,"class","svelte-18eget0"),u(o,"id","creator"),u(o,"class","svelte-18eget0"),u(l,"class","svelte-18eget0"),u(a,"class","svelte-18eget0"),u(s,"class","sidebar svelte-18eget0"),u(w,"class","version svelte-18eget0"),u(t,"class","wrapper svelte-18eget0")},m(f,b){V(f,t,b),_(t,s),_(s,l),_(l,n),_(n,i),_(l,c),_(l,o),_(o,g),_(s,h),_(s,a),_(s,r),m&&m.m(s,null),_(t,d),p&&p.m(t,null),_(t,O),_(t,w),_(w,H),M=!0,x||(ee=Se(l,"click",e[0]),x=!0)},p(f,[b]){m&&m.p&&(!M||b&2)&&ce(m,F,f,f[1],M?fe(F,f[1],b,$e):he(f[1]),be),p&&p.p&&(!M||b&2)&&ce(p,q,f,f[1],M?fe(q,f[1],b,ze):he(f[1]),pe)},i(f){M||(C(m,f),C(p,f),M=!0)},o(f){W(m,f),W(p,f),M=!1},d(f){f&&y(t),m&&m.d(f),p&&p.d(f),x=!1,ee()}}}function tt(e,t,s){let{$$slots:l={},$$scope:n}=t;const i=()=>{Qe(`${Je}`)};return e.$$set=c=>{"$$scope"in c&&s(1,n=c.$$scope)},[i,n,l]}class _t extends K{constructor(t){super(),Z(this,t,tt,et,Q,{})}}export{U as B,rt as C,De as G,ft as M,_t as S,ut as a,j as b,P as c,dt as d,we as e,Be as f,Qe as g,de as h,z as i,Ze as l,ht as n,Ue as r,ke as s,ct as t,G as u};
