var je=Object.defineProperty;var qe=(t,e,s)=>e in t?je(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var U=(t,e,s)=>(qe(t,typeof e!="symbol"?e+"":e,s),s);import{S as D,i as F,s as j,B as ce,k as b,a as E,l as p,m as k,c as M,h as m,n as _,I as we,p as O,b as W,G as g,J as Pe,D as fe,E as ue,F as de,f as N,t as R,K as he,L as ze,q as $,v as ee,r as te,w as se,x as le,y as ne,M as Ve,N as Xe,O as _e,P as Ee,Q as Me,R as Ye,g as Ke,d as Qe,T as ke,A as ge,U as xe,V as Ne,o as Ze,W as $e}from"./index-35ca9ab3.js";import{d as G,c as ie,w as q}from"./singletons-2a96e98d.js";const et=""+new URL("../assets/stats-08c66cd3.svg",import.meta.url).href,tt=""+new URL("../assets/settings-4a18c9a1.svg",import.meta.url).href,st=""+new URL("../assets/home-b3ebdf43.svg",import.meta.url).href;function Ie(t){let e,s;return{c(){e=b("img"),this.h()},l(l){e=p(l,"IMG",{src:!0,alt:!0,draggable:!0,class:!0}),this.h()},h(){he(e.src,s=t[3])||_(e,"src",s),_(e,"alt",""),_(e,"draggable","false"),_(e,"class","svelte-na658s")},m(l,n){W(l,e,n)},p(l,n){n&8&&!he(e.src,s=l[3])&&_(e,"src",s)},d(l){l&&m(e)}}}function lt(t){let e,s,l,n=`${t[4]}rem`,a,u,c,f=t[1]==="icon"&&Ie(t);const d=t[7].default,o=ce(d,t,t[6],null);return{c(){e=b("button"),f&&f.c(),s=E(),o&&o.c(),this.h()},l(i){e=p(i,"BUTTON",{class:!0,title:!0});var r=k(e);f&&f.l(r),s=M(r),o&&o.l(r),r.forEach(m),this.h()},h(){e.disabled=t[0],_(e,"class",l=we(["unstyled",t[1],t[2]].join(" "))+" svelte-na658s"),_(e,"title",t[5]),O(e,"padding",n,!1)},m(i,r){W(i,e,r),f&&f.m(e,null),g(e,s),o&&o.m(e,null),a=!0,u||(c=Pe(e,"click",t[8]),u=!0)},p(i,[r]){i[1]==="icon"?f?f.p(i,r):(f=Ie(i),f.c(),f.m(e,s)):f&&(f.d(1),f=null),o&&o.p&&(!a||r&64)&&fe(o,d,i,i[6],a?de(d,i[6],r,null):ue(i[6]),null),(!a||r&1)&&(e.disabled=i[0]),(!a||r&6&&l!==(l=we(["unstyled",i[1],i[2]].join(" "))+" svelte-na658s"))&&_(e,"class",l),(!a||r&32)&&_(e,"title",i[5]),r&16&&n!==(n=`${i[4]}rem`)&&O(e,"padding",n,!1)},i(i){a||(N(o,i),a=!0)},o(i){R(o,i),a=!1},d(i){i&&m(e),f&&f.d(),o&&o.d(i),u=!1,c()}}}function nt(t,e,s){let{$$slots:l={},$$scope:n}=e,{disabled:a=!1}=e,{type:u="normal"}=e,{size:c="medium"}=e,{iconSrc:f=""}=e,{padding:d=null}=e,{title:o=null}=e;function i(r){ze.call(this,t,r)}return t.$$set=r=>{"disabled"in r&&s(0,a=r.disabled),"type"in r&&s(1,u=r.type),"size"in r&&s(2,c=r.size),"iconSrc"in r&&s(3,f=r.iconSrc),"padding"in r&&s(4,d=r.padding),"title"in r&&s(5,o=r.title),"$$scope"in r&&s(6,n=r.$$scope)},[a,u,c,f,d,o,n,l,i]}class ae extends D{constructor(e){super(),F(this,e,nt,lt,j,{disabled:0,type:1,size:2,iconSrc:3,padding:4,title:5})}}G.disable_scroll_handling;const oe=G.goto;G.invalidate;G.invalidateAll;G.prefetch;G.prefetch_routes;G.before_navigate;G.after_navigate;const Le="v0.3.0",Ae="Minesweeper",Oe="SFG + TMH Games";function it(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t)+t)}function It(t){const e=Math.floor(t/3600),s=Math.floor(t/60)%60,l=t%60;let n="";return e>0&&(n+=e.toString().padStart(2,"0")+":"),n+=s.toString().padStart(2,"0")+":",n+=l.toString().padStart(2,"0"),n}const at=t=>({}),Re=t=>({class:"content"}),ot=t=>({}),Ge=t=>({});function rt(t){let e,s,l,n,a,u,c,f,d,o,i,r,w,P,I,z,H,X,Y,K,C,Q,L;i=new ae({props:{type:"icon",size:"large",iconSrc:st,padding:.2,title:"Home"}}),i.$on("click",t[2]),w=new ae({props:{type:"icon",size:"large",iconSrc:et,padding:.2,title:"Stats"}}),w.$on("click",t[3]),I=new ae({props:{type:"icon",size:"large",iconSrc:tt,padding:.2,title:"Settings"}}),I.$on("click",t[4]);const x=t[1].sidebar,S=ce(x,t,t[0],Ge),Z=t[1].content,y=ce(Z,t,t[0],Re);return{c(){e=b("main"),s=b("aside"),l=b("header"),n=b("h1"),a=$(Ae),u=E(),c=b("h3"),f=$(Oe),d=E(),o=b("div"),ee(i.$$.fragment),r=E(),ee(w.$$.fragment),P=E(),ee(I.$$.fragment),z=E(),H=b("hr"),X=E(),S&&S.c(),Y=E(),y&&y.c(),K=E(),C=b("footer"),Q=$(Le),this.h()},l(h){e=p(h,"MAIN",{class:!0});var v=k(e);s=p(v,"ASIDE",{class:!0});var A=k(s);l=p(A,"HEADER",{class:!0});var J=k(l);n=p(J,"H1",{id:!0,class:!0});var Se=k(n);a=te(Se,Ae),Se.forEach(m),u=M(J),c=p(J,"H3",{id:!0,class:!0});var ye=k(c);f=te(ye,Oe),ye.forEach(m),J.forEach(m),d=M(A),o=p(A,"DIV",{class:!0});var T=k(o);se(i.$$.fragment,T),r=M(T),se(w.$$.fragment,T),P=M(T),se(I.$$.fragment,T),T.forEach(m),z=M(A),H=p(A,"HR",{class:!0}),X=M(A),S&&S.l(A),A.forEach(m),Y=M(v),y&&y.l(v),K=M(v),C=p(v,"FOOTER",{class:!0});var ve=k(C);Q=te(ve,Le),ve.forEach(m),v.forEach(m),this.h()},h(){_(n,"id","title"),_(n,"class","svelte-1xix0ss"),_(c,"id","creator"),_(c,"class","svelte-1xix0ss"),_(l,"class","svelte-1xix0ss"),_(o,"class","menus svelte-1xix0ss"),_(H,"class","svelte-1xix0ss"),_(s,"class","sidebar svelte-1xix0ss"),_(C,"class","version svelte-1xix0ss"),_(e,"class","wrapper svelte-1xix0ss")},m(h,v){W(h,e,v),g(e,s),g(s,l),g(l,n),g(n,a),g(l,u),g(l,c),g(c,f),g(s,d),g(s,o),le(i,o,null),g(o,r),le(w,o,null),g(o,P),le(I,o,null),g(s,z),g(s,H),g(s,X),S&&S.m(s,null),g(e,Y),y&&y.m(e,null),g(e,K),g(e,C),g(C,Q),L=!0},p(h,[v]){S&&S.p&&(!L||v&1)&&fe(S,x,h,h[0],L?de(x,h[0],v,ot):ue(h[0]),Ge),y&&y.p&&(!L||v&1)&&fe(y,Z,h,h[0],L?de(Z,h[0],v,at):ue(h[0]),Re)},i(h){L||(N(i.$$.fragment,h),N(w.$$.fragment,h),N(I.$$.fragment,h),N(S,h),N(y,h),L=!0)},o(h){R(i.$$.fragment,h),R(w.$$.fragment,h),R(I.$$.fragment,h),R(S,h),R(y,h),L=!1},d(h){h&&m(e),ne(i),ne(w),ne(I),S&&S.d(h),y&&y.d(h)}}}function ct(t,e,s){let{$$slots:l={},$$scope:n}=e;const a=()=>{oe(`${ie}`)},u=()=>{oe(`${ie}/stats`)},c=()=>{oe(`${ie}/settings`)};return t.$$set=f=>{"$$scope"in f&&s(0,n=f.$$scope)},[n,l,a,u,c]}class Lt extends D{constructor(e){super(),F(this,e,ct,rt,j,{})}}var me=(t=>(t.Closed="closed",t.Opened="opened",t.Flagged="flagged",t))(me||{}),He=(t=>(t.Empty="empty",t.Mine="mine",t))(He||{}),ft=(t=>(t.Playing="playing",t.Won="won",t.Lost="lost",t))(ft||{}),vt,wt,Et;class re{}vt=8,wt=12,Et=16,U(re,vt,{width:8,height:8,numMines:10}),U(re,wt,{width:12,height:12,numMines:20}),U(re,Et,{width:16,height:16,numMines:40});const At=t=>{const e=Array(t.width*t.height);for(let l=0;l<t.height*t.width;l++)e[l]={state:"closed",numNeighborMines:0,type:"empty"};const s={board:e,...t,firstMove:!0,state:"playing",lostToCell:-1,title:"Save Game ",stats:{timePlayed:0}};for(let l=0;l<t.numMines;l++)ut(s);return dt(s),s},ut=(t,e=[])=>{const s=[];for(let n=0;n<t.width*t.height;n++)t.board[n].type==="empty"&&e.indexOf(n)===-1&&s.push(n);const l=s[it(0,s.length)];t.board[l].type="mine"},dt=t=>{for(let e=0;e<t.width;e++)for(let s=0;s<t.height;s++){let l=0;for(let a=0;a<9;a++){const u=Math.floor(a/3)-1,c=a%3-1,f=e+u,d=s+c;if(f<0||f>=t.width||d<0||d>=t.height)continue;const o=d*t.width+f;t.board[o].type==="mine"&&(l+=1)}const n=s*t.width+e;t.board[n].numNeighborMines=l}},Je="MINESWEEPER_OVERALL_STATS",ht=()=>{var s,l,n,a;const t=JSON.parse((s=localStorage[Je])!=null?s:"{}");return{gamesWon:(l=t==null?void 0:t.gamesWon)!=null?l:0,gamesLost:(n=t==null?void 0:t.gamesLost)!=null?n:0,cellsOpened:(a=t==null?void 0:t.cellsOpened)!=null?a:0}},_t=t=>{localStorage[Je]=JSON.stringify(t)},Ue="MINESWEEPER_SAVE_SLOTS";let be=q(null);be.subscribe(t=>{if(typeof window<"u"&&t!=null){let e=Ve(B);De(e,t)}});let B=q(-1);B.subscribe(t=>{typeof window<"u"&&t!=null&&t!=-1&&be.set(gt(t))});let V=q(null);V.subscribe(t=>{typeof window<"u"&&t!=null&&(localStorage[Ue]=JSON.stringify(t.map(e=>e.index)))});var We;typeof window<"u"&&V.set(JSON.parse((We=localStorage[Ue])!=null?We:"[]").map(t=>({index:t,selected:!1})));const Be=q(null);Be.subscribe(t=>{typeof window<"u"&&t!=null&&_t(t)});typeof window<"u"&&Be.set(ht());const pe="MINESWEEPER_SAVE_GAME",gt=t=>{let e=localStorage[pe+`_${t}`];return e?JSON.parse(e):null},De=(t,e)=>{Fe(t),localStorage[pe+`_${t}`]=JSON.stringify(e)},Fe=t=>{localStorage.removeItem(pe+`_${t}`)},Ot=t=>{V.update(e=>(e.splice(e.findIndex(s=>s.index===t),1),e)),Fe(t)},Rt=t=>{let e=Ve(V),s;for(let l=0;;l++)if(e.findIndex(n=>n.index===l)===-1){s=l;break}t.title+=s,De(s,t),B.set(-1),B.set(s),V.update(l=>(l==null||l.push({index:s,selected:!1}),l)),be.set(t)};function Ce(t,{delay:e=0,duration:s=400,easing:l=Xe}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:s,easing:l,css:a=>`opacity: ${a*n}`}}const mt=""+new URL("../assets/check-ce7a5ec0.svg",import.meta.url).href;function Te(t){let e,s,l,n;return{c(){e=b("img"),this.h()},l(a){e=p(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){he(e.src,s=mt)||_(e,"src",s),_(e,"alt",""),_(e,"class","svelte-8hkayd")},m(a,u){W(a,e,u),n=!0},p:ge,i(a){n||(a&&xe(()=>{l||(l=Ne(e,Ce,{duration:50},!0)),l.run(1)}),n=!0)},o(a){a&&(l||(l=Ne(e,Ce,{duration:50},!1)),l.run(0)),n=!1},d(a){a&&m(e),a&&l&&l.end()}}}function bt(t){let e,s,l,n=`${t[2]}rem`,a=`${t[2]}rem`,u,c,f=[{type:"checkbox"},t[3]],d={};for(let i=0;i<f.length;i+=1)d=_e(d,f[i]);let o=t[0]&&Te();return{c(){e=b("div"),s=b("input"),l=E(),o&&o.c(),this.h()},l(i){e=p(i,"DIV",{class:!0});var r=k(e);s=p(r,"INPUT",{type:!0}),l=M(r),o&&o.l(r),r.forEach(m),this.h()},h(){Ee(s,d),O(s,"border-color",t[1],!1),Me(s,"svelte-8hkayd",!0),_(e,"class","wrapper svelte-8hkayd"),O(e,"width",n,!1),O(e,"height",a,!1)},m(i,r){W(i,e,r),g(e,s),s.autofocus&&s.focus(),s.checked=t[0],g(e,l),o&&o.m(e,null),u||(c=Pe(s,"change",t[4]),u=!0)},p(i,[r]){Ee(s,d=Ye(f,[{type:"checkbox"},r&8&&i[3]])),r&1&&(s.checked=i[0]),O(s,"border-color",i[1],!1),Me(s,"svelte-8hkayd",!0),i[0]?o?(o.p(i,r),r&1&&N(o,1)):(o=Te(),o.c(),N(o,1),o.m(e,null)):o&&(Ke(),R(o,1,1,()=>{o=null}),Qe()),r&4&&n!==(n=`${i[2]}rem`)&&O(e,"width",n,!1),r&4&&a!==(a=`${i[2]}rem`)&&O(e,"height",a,!1)},i(i){N(o)},o(i){R(o)},d(i){i&&m(e),o&&o.d(),u=!1,c()}}}function pt(t,e,s){let{checked:l}=e,{borderColor:n="black"}=e,{size:a=1.5}=e;function u(){l=this.checked,s(0,l)}return t.$$set=c=>{s(3,e=_e(_e({},e),ke(c))),"checked"in c&&s(0,l=c.checked),"borderColor"in c&&s(1,n=c.borderColor),"size"in c&&s(2,a=c.size)},e=ke(e),[l,n,a,e,u]}class Gt extends D{constructor(e){super(),F(this,e,pt,bt,j,{checked:0,borderColor:1,size:2})}}function St(t){let e,s,l;return{c(){e=b("canvas"),this.h()},l(n){e=p(n,"CANVAS",{width:!0,height:!0,class:!0}),k(e).forEach(m),this.h()},h(){_(e,"width",s=t[0].width+"px"),_(e,"height",l=t[0].height+"px"),_(e,"class","svelte-jhkqpr")},m(n,a){W(n,e,a),t[4](e)},p(n,[a]){a&1&&s!==(s=n[0].width+"px")&&_(e,"width",s),a&1&&l!==(l=n[0].height+"px")&&_(e,"height",l)},i:ge,o:ge,d(n){n&&m(e),t[4](null)}}}function yt(t,e,s){let{showMines:l=!1}=e,{game:n}=e;const a={mine:"red",closed:"navy",empty:"blue",flag:"gold",clickedMine:"violet"};let u,c;Ze(()=>{s(3,c=u.getContext("2d")),s(3,c.imageSmoothingEnabled=!1,c),c.clearRect(0,0,u.width,u.height)});function f(d){$e[d?"unshift":"push"](()=>{u=d,s(1,u)})}return t.$$set=d=>{"showMines"in d&&s(2,l=d.showMines),"game"in d&&s(0,n=d.game)},t.$$.update=()=>{if(t.$$.dirty&15&&c){const d=u.width/n.width,o=u.height/n.height;for(let i=0;i<n.width*n.height;i++){const r=n.board[i],w=i%n.width,P=Math.floor(i/n.height);i===n.lostToCell&&l?s(3,c.fillStyle=a.clickedMine,c):r.state===me.Closed?s(3,c.fillStyle=a.closed,c):r.type===He.Mine&&l?s(3,c.fillStyle=a.mine,c):r.state===me.Flagged?s(3,c.fillStyle=a.flag,c):s(3,c.fillStyle=a.empty,c),c.fillRect(w*d,P*o,d,o)}}},[n,u,l,c,f]}class Ct extends D{constructor(e){super(),F(this,e,yt,St,j,{showMines:2,game:0})}}export{ae as B,Gt as C,ft as G,Ct as M,Lt as S,re as a,gt as b,B as c,Ot as d,me as e,He as f,oe as g,ut as h,Ce as i,be as j,Rt as l,At as n,dt as r,Be as s,It as t,V as u};
