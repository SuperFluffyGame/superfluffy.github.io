var A=Object.defineProperty;var v=(e,t,o)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var c=(e,t,o)=>(v(e,typeof t!="symbol"?t+"":t,o),o);import{w as h,d as r}from"./singletons-f1e67e30.js";function p(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}const M="MINESWEEPER_SAVE_SLOTS",b="MINESWEEPER_SAVE_GAME",G=e=>{let t=localStorage[b+`_${e}`];return t?JSON.parse(t):null},_=(e,t)=>{localStorage[b+`_${e}`]=JSON.stringify(t)},T=e=>{localStorage.removeItem(b+`_${e}`)};let y=h(null);y.subscribe(e=>{if(typeof window<"u"&&e!=null){let t;w.subscribe(o=>t=o),_(t,e)}});let w=h(-1);w.subscribe(e=>{typeof window<"u"&&e!=null&&y.set(G(e))});const $="v0.0.1";let E=h(null);E.subscribe(e=>{typeof window<"u"&&e!=null&&(localStorage[M]=JSON.stringify(e))});var S;typeof window<"u"&&E.set(JSON.parse((S=localStorage[M])!=null?S:"[]"));var I=(e=>(e.Opened="opened",e.Closed="closed",e.Flagged="flagged",e))(I||{}),O=(e=>(e.Playing="playing",e.Won="won",e.Lost="lost",e))(O||{});function x({width:e,height:t,numMines:o}){let i=Array(e*t),s=Array(e*t).fill(0);for(let n=0;n<e;n++)for(let l=0;l<t;l++){const a=l*e+n;i[a]={state:"closed",numNeighborMines:0,isMine:s[a]===1}}return i}var W,J,R;class u{}W=8,J=12,R=16,c(u,W,{width:8,height:8,numMines:10}),c(u,J,{width:12,height:12,numMines:20}),c(u,R,{width:16,height:16,numMines:40});const k=e=>{const o={board:x(e),...e,firstMove:!0,state:"playing",lostToCell:-1,title:"Save Game "};for(let n=0;n<e.numMines;n++)N(o);P(o);let i=localStorage[M],s;for(let n=0;;n++)if(i.indexOf(n)===-1){s=n;break}o.title+=s,_(s,o),w.set(s),E.update(n=>{var l;return(l=n==null?void 0:n.push)==null||l.call(n,s),n})},N=e=>{const t=p(0,e.width),o=p(0,e.height);e.board[o*e.width+t].isMine?N(e):e.board[o*e.width+t].isMine=!0},P=e=>{for(let t=0;t<(e==null?void 0:e.width);t++)for(let o=0;o<(e==null?void 0:e.height);o++){let i=0;for(let n=0;n<9;n++){const l=Math.floor(n/3)-1,a=n%3-1,d=t+l,f=o+a;if(d<0||d>=e.width||f<0||f>=e.height)continue;const g=f*e.width+d;e.board[g].isMine&&(i+=1)}const s=o*e.width+t;e.board[s].numNeighborMines=i}};r.disable_scroll_handling;const X=r.goto;r.invalidate;r.invalidateAll;r.prefetch;r.prefetch_routes;r.before_navigate;r.after_navigate;export{u as B,I as C,O as G,b as M,y as a,w as c,T as d,X as g,G as l,k as n,P as r,N as s,E as u,$ as v};
