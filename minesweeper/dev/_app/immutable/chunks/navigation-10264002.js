var A=Object.defineProperty;var v=(e,t,o)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var c=(e,t,o)=>(v(e,typeof t!="symbol"?t+"":t,o),o);import{w as M,d as r}from"./singletons-2c3c9f42.js";function p(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}const b="MINESWEEPER_SAVE_SLOTS",w="MINESWEEPER_SAVE_GAME",G=e=>{let t=localStorage[w+`_${e}`];return t?JSON.parse(t):null},_=(e,t)=>{I(e),localStorage[w+`_${e}`]=JSON.stringify(t)},I=e=>{localStorage.removeItem(w+`_${e}`)},$="v0.0.1";let y=M(null);y.subscribe(e=>{if(typeof window<"u"&&e!=null){let t;d.subscribe(o=>t=o),_(t,e)}});let d=M(-1);d.subscribe(e=>{typeof window<"u"&&e!=null&&e!=-1&&y.set(G(e))});let E=M(null);E.subscribe(e=>{typeof window<"u"&&e!=null&&(localStorage[b]=JSON.stringify(e))});var S;typeof window<"u"&&E.set(JSON.parse((S=localStorage[b])!=null?S:"[]"));var O=(e=>(e.Opened="opened",e.Closed="closed",e.Flagged="flagged",e))(O||{}),x=(e=>(e.Playing="playing",e.Won="won",e.Lost="lost",e))(x||{});function P({width:e,height:t,numMines:o}){let i=Array(e*t),s=Array(e*t).fill(0);for(let n=0;n<e;n++)for(let l=0;l<t;l++){const a=l*e+n;i[a]={state:"closed",numNeighborMines:0,isMine:s[a]===1}}return i}var J,R,V;class h{}J=8,R=12,V=16,c(h,J,{width:8,height:8,numMines:10}),c(h,R,{width:12,height:12,numMines:20}),c(h,V,{width:16,height:16,numMines:40});const k=e=>{const o={board:P(e),...e,firstMove:!0,state:"playing",lostToCell:-1,title:"Save Game "};for(let n=0;n<e.numMines;n++)N(o);W(o);let i=localStorage[b],s;for(let n=0;;n++)if(i.indexOf(n)===-1){s=n;break}o.title+=s,_(s,o),d.set(-1),d.set(s),E.update(n=>{var l;return(l=n==null?void 0:n.push)==null||l.call(n,s),n})},N=e=>{const t=p(0,e.width),o=p(0,e.height);e.board[o*e.width+t].isMine?N(e):e.board[o*e.width+t].isMine=!0},W=e=>{for(let t=0;t<(e==null?void 0:e.width);t++)for(let o=0;o<(e==null?void 0:e.height);o++){let i=0;for(let n=0;n<9;n++){const l=Math.floor(n/3)-1,a=n%3-1,f=t+l,u=o+a;if(f<0||f>=e.width||u<0||u>=e.height)continue;const g=u*e.width+f;e.board[g].isMine&&(i+=1)}const s=o*e.width+t;e.board[s].numNeighborMines=i}};r.disable_scroll_handling;const X=r.goto;r.invalidate;r.invalidateAll;r.prefetch;r.prefetch_routes;r.before_navigate;r.after_navigate;export{h as B,O as C,x as G,w as M,y as a,d as c,I as d,X as g,G as l,k as n,W as r,N as s,E as u,$ as v};
