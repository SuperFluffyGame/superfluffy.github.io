var qe=Object.defineProperty;var Xe=(e,t,s)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var J=(e,t,s)=>(Xe(e,typeof t!="symbol"?t+"":t,s),s);import{S as D,i as F,s as q,B as fe,k as b,a as k,l as S,m as p,c as M,h as m,n as g,I as ke,p as N,b as P,G as _,J as He,D as ue,E as he,F as de,f as I,t as j,K as ge,L as Ye,q as ee,v as te,r as se,w as le,x as ne,y as ie,M as We,N as Ke,O as _e,P as Me,Q as Ne,R as Qe,g as Ze,d as xe,T as Ie,A as me,U as $e,V as Le,o as et,W as tt}from"./index-15bc321e.js";import{d as C,c as ae,w as H}from"./singletons-03eff704.js";const st=""+new URL("../assets/stats-08c66cd3.svg",import.meta.url).href,lt=""+new URL("../assets/settings-4a18c9a1.svg",import.meta.url).href,nt=""+new URL("../assets/home-b3ebdf43.svg",import.meta.url).href;function Oe(e){let t,s;return{c(){t=b("img"),this.h()},l(l){t=S(l,"IMG",{src:!0,alt:!0,draggable:!0,class:!0}),this.h()},h(){ge(t.src,s=e[3])||g(t,"src",s),g(t,"alt",""),g(t,"draggable","false"),g(t,"class","svelte-1xmrl36")},m(l,n){P(l,t,n)},p(l,n){n&8&&!ge(t.src,s=l[3])&&g(t,"src",s)},d(l){l&&m(t)}}}function it(e){let t,s,l,n=`${e[4]}rem`,a,h,r,f=e[1]==="icon"&&Oe(e);const u=e[7].default,o=fe(u,e,e[6],null);return{c(){t=b("button"),f&&f.c(),s=k(),o&&o.c(),this.h()},l(i){t=S(i,"BUTTON",{class:!0,title:!0});var c=p(t);f&&f.l(c),s=M(c),o&&o.l(c),c.forEach(m),this.h()},h(){t.disabled=e[0],g(t,"class",l=ke(["unstyled",e[1],e[2]].join(" "))+" svelte-1xmrl36"),g(t,"title",e[5]),N(t,"padding",n,!1)},m(i,c){P(i,t,c),f&&f.m(t,null),_(t,s),o&&o.m(t,null),a=!0,h||(r=He(t,"click",e[8]),h=!0)},p(i,[c]){i[1]==="icon"?f?f.p(i,c):(f=Oe(i),f.c(),f.m(t,s)):f&&(f.d(1),f=null),o&&o.p&&(!a||c&64)&&ue(o,u,i,i[6],a?de(u,i[6],c,null):he(i[6]),null),(!a||c&1)&&(t.disabled=i[0]),(!a||c&6&&l!==(l=ke(["unstyled",i[1],i[2]].join(" "))+" svelte-1xmrl36"))&&g(t,"class",l),(!a||c&32)&&g(t,"title",i[5]),c&16&&n!==(n=`${i[4]}rem`)&&N(t,"padding",n,!1)},i(i){a||(I(o,i),a=!0)},o(i){j(o,i),a=!1},d(i){i&&m(t),f&&f.d(),o&&o.d(i),h=!1,r()}}}function at(e,t,s){let{$$slots:l={},$$scope:n}=t,{disabled:a=!1}=t,{type:h="normal"}=t,{size:r="medium"}=t,{iconSrc:f=""}=t,{padding:u=null}=t,{title:o=null}=t;function i(c){Ye.call(this,e,c)}return e.$$set=c=>{"disabled"in c&&s(0,a=c.disabled),"type"in c&&s(1,h=c.type),"size"in c&&s(2,r=c.size),"iconSrc"in c&&s(3,f=c.iconSrc),"padding"in c&&s(4,u=c.padding),"title"in c&&s(5,o=c.title),"$$scope"in c&&s(6,n=c.$$scope)},[a,h,r,f,u,o,n,l,i]}class oe extends D{constructor(t){super(),F(this,t,at,it,q,{disabled:0,type:1,size:2,iconSrc:3,padding:4,title:5})}}C.disable_scroll_handling;const ce=C.goto;C.invalidate;C.invalidateAll;C.prefetch;C.prefetch_routes;C.before_navigate;C.after_navigate;const Re="v0.3.0",Ae="Minesweeper",je="SFG + TMH Games";function ot(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}function Gt(e){const t=Math.floor(e/3600),s=Math.floor(e/60)%60,l=e%60;let n="";return t>0&&(n+=t.toString().padStart(2,"0")+":"),n+=s.toString().padStart(2,"0")+":",n+=l.toString().padStart(2,"0"),n}const ct=e=>({}),Ce=e=>({}),rt=e=>({}),Ge=e=>({});function ft(e){let t,s,l,n,a,h,r,f,u,o,i,c,w,z,L,X,W,Y,K,O,Q,G,Z,R;i=new oe({props:{type:"icon",size:"large",iconSrc:nt,padding:.2,title:"Home"}}),i.$on("click",e[3]),w=new oe({props:{type:"icon",size:"large",iconSrc:st,padding:.2,title:"Stats"}}),w.$on("click",e[4]),L=new oe({props:{type:"icon",size:"large",iconSrc:lt,padding:.2,title:"Settings"}}),L.$on("click",e[5]);const x=e[2].sidebar,y=fe(x,e,e[1],Ge),$=e[2].content,E=fe($,e,e[1],Ce);return{c(){t=b("main"),s=b("aside"),l=b("header"),n=b("h1"),a=ee(Ae),h=k(),r=b("h3"),f=ee(je),u=k(),o=b("div"),te(i.$$.fragment),c=k(),te(w.$$.fragment),z=k(),te(L.$$.fragment),X=k(),W=b("hr"),Y=k(),y&&y.c(),K=k(),O=b("div"),E&&E.c(),Q=k(),G=b("footer"),Z=ee(Re),this.h()},l(d){t=S(d,"MAIN",{class:!0});var v=p(t);s=S(v,"ASIDE",{class:!0});var A=p(s);l=S(A,"HEADER",{class:!0});var V=p(l);n=S(V,"H1",{id:!0,class:!0});var ye=p(n);a=se(ye,Ae),ye.forEach(m),h=M(V),r=S(V,"H3",{id:!0,class:!0});var Ee=p(r);f=se(Ee,je),Ee.forEach(m),V.forEach(m),u=M(A),o=S(A,"DIV",{class:!0});var T=p(o);le(i.$$.fragment,T),c=M(T),le(w.$$.fragment,T),z=M(T),le(L.$$.fragment,T),T.forEach(m),X=M(A),W=S(A,"HR",{class:!0}),Y=M(A),y&&y.l(A),A.forEach(m),K=M(v),O=S(v,"DIV",{class:!0});var pe=p(O);E&&E.l(pe),pe.forEach(m),Q=M(v),G=S(v,"FOOTER",{class:!0});var we=p(G);Z=se(we,Re),we.forEach(m),v.forEach(m),this.h()},h(){g(n,"id","title"),g(n,"class","svelte-1lkzwj2"),g(r,"id","creator"),g(r,"class","svelte-1lkzwj2"),g(l,"class","svelte-1lkzwj2"),g(o,"class","menus svelte-1lkzwj2"),g(W,"class","svelte-1lkzwj2"),g(s,"class","sidebar svelte-1lkzwj2"),g(O,"class","content svelte-1lkzwj2"),N(O,"width",e[0]?"fit-content":null,!1),g(G,"class","version svelte-1lkzwj2"),g(t,"class","wrapper svelte-1lkzwj2")},m(d,v){P(d,t,v),_(t,s),_(s,l),_(l,n),_(n,a),_(l,h),_(l,r),_(r,f),_(s,u),_(s,o),ne(i,o,null),_(o,c),ne(w,o,null),_(o,z),ne(L,o,null),_(s,X),_(s,W),_(s,Y),y&&y.m(s,null),_(t,K),_(t,O),E&&E.m(O,null),_(t,Q),_(t,G),_(G,Z),R=!0},p(d,[v]){y&&y.p&&(!R||v&2)&&ue(y,x,d,d[1],R?de(x,d[1],v,rt):he(d[1]),Ge),E&&E.p&&(!R||v&2)&&ue(E,$,d,d[1],R?de($,d[1],v,ct):he(d[1]),Ce),v&1&&N(O,"width",d[0]?"fit-content":null,!1)},i(d){R||(I(i.$$.fragment,d),I(w.$$.fragment,d),I(L.$$.fragment,d),I(y,d),I(E,d),R=!0)},o(d){j(i.$$.fragment,d),j(w.$$.fragment,d),j(L.$$.fragment,d),j(y,d),j(E,d),R=!1},d(d){d&&m(t),ie(i),ie(w),ie(L),y&&y.d(d),E&&E.d(d)}}}function ut(e,t,s){let{$$slots:l={},$$scope:n}=t,{fitContent:a=!0}=t;const h=()=>{ce(`${ae}`)},r=()=>{ce(`${ae}/stats`)},f=()=>{ce(`${ae}/settings`)};return e.$$set=u=>{"fitContent"in u&&s(0,a=u.fitContent),"$$scope"in u&&s(1,n=u.$$scope)},[a,n,l,h,r,f]}class Tt extends D{constructor(t){super(),F(this,t,ut,ft,q,{fitContent:0})}}var be=(e=>(e.Closed="closed",e.Opened="opened",e.Flagged="flagged",e))(be||{}),Ve=(e=>(e.Empty="empty",e.Mine="mine",e))(Ve||{}),ht=(e=>(e.Playing="playing",e.Won="won",e.Lost="lost",e))(ht||{}),Lt,Ot,Rt;class re{}Lt=8,Ot=12,Rt=16,J(re,Lt,{width:8,height:8,numMines:10}),J(re,Ot,{width:12,height:12,numMines:20}),J(re,Rt,{width:16,height:16,numMines:40});const Pt=e=>{const t=Array(e.width*e.height);for(let l=0;l<e.height*e.width;l++)t[l]={state:"closed",numNeighborMines:0,type:"empty"};const s={board:t,...e,firstMove:!0,state:"playing",lostToCell:-1,title:"Save Game ",stats:{timePlayed:0}};for(let l=0;l<e.numMines;l++)dt(s);return gt(s),s},dt=(e,t=[])=>{const s=[];for(let n=0;n<e.width*e.height;n++)e.board[n].type==="empty"&&t.indexOf(n)===-1&&s.push(n);const l=s[ot(0,s.length)];e.board[l].type="mine"},gt=e=>{for(let t=0;t<e.width;t++)for(let s=0;s<e.height;s++){let l=0;for(let a=0;a<9;a++){const h=Math.floor(a/3)-1,r=a%3-1,f=t+h,u=s+r;if(f<0||f>=e.width||u<0||u>=e.height)continue;const o=u*e.width+f;e.board[o].type==="mine"&&(l+=1)}const n=s*e.width+t;e.board[n].numNeighborMines=l}},Je="MINESWEEPER_OVERALL_STATS",_t=()=>{var s,l,n,a;const e=JSON.parse((s=localStorage[Je])!=null?s:"{}");return{gamesWon:(l=e==null?void 0:e.gamesWon)!=null?l:0,gamesLost:(n=e==null?void 0:e.gamesLost)!=null?n:0,cellsOpened:(a=e==null?void 0:e.cellsOpened)!=null?a:0}},mt=e=>{localStorage[Je]=JSON.stringify(e)},Ue="MINESWEEPER_SETTINGS",zt=[0,5,10,15,20],bt=[{hue:200,accent:"darkcyan",cellHue:200,light:!1},{hue:100,accent:"green",cellHue:100,light:!1},{hue:300,accent:"darkviolet",cellHue:300,light:!1},{hue:0,accent:"coral",cellHue:0,light:!1},{hue:50,accent:"gold",cellHue:70,light:!1}],St=()=>{var s,l,n;const e=JSON.parse((s=localStorage[Ue])!=null?s:"{}");return{theme:(l=e==null?void 0:e.theme)!=null?l:0,saturation:(n=e==null?void 0:e.saturation)!=null?n:5}},vt=e=>{localStorage[Ue]=JSON.stringify(e)},Be="MINESWEEPER_SAVE_SLOTS";let Se=H(null);Se.subscribe(e=>{if(typeof window<"u"&&e!=null){let t=We(U);De(t,e)}});let U=H(-1);U.subscribe(e=>{e!==-1&&Se.set(pt(e))});var ze;let B=H(JSON.parse((ze=localStorage[Be])!=null?ze:"[]").map(e=>({index:e,selected:!1})));B.subscribe(e=>{localStorage[Be]=JSON.stringify(e.map(t=>t.index))});const yt=H(_t());yt.subscribe(e=>{mt(e)});const Et=H(St());Et.subscribe(e=>{const t=bt[e.theme];document.documentElement.style.setProperty("--brand-hue",""+t.hue),document.documentElement.style.setProperty("--sat-mul",""+e.saturation),document.documentElement.style.setProperty("--accent",""+t.accent),document.documentElement.style.setProperty("--cell-hue",""+t.cellHue),vt(e)});const ve="MINESWEEPER_SAVE_GAME",pt=e=>{let t=localStorage[ve+`_${e}`];return t?JSON.parse(t):null},De=(e,t)=>{Fe(e),localStorage[ve+`_${e}`]=JSON.stringify(t)},Fe=e=>{localStorage.removeItem(ve+`_${e}`)},Ht=e=>{B.update(t=>(t.splice(t.findIndex(s=>s.index===e),1),t)),Fe(e)},Wt=e=>{let t=We(B),s;for(let l=0;;l++)if(t.findIndex(n=>n.index===l)===-1){s=l;break}e.title+=s,De(s,e),U.set(-1),U.set(s),B.update(l=>(l.push({index:s,selected:!1}),l)),Se.set(e)};function Te(e,{delay:t=0,duration:s=400,easing:l=Ke}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:s,easing:l,css:a=>`opacity: ${a*n}`}}const wt=""+new URL("../assets/check-ce7a5ec0.svg",import.meta.url).href;function Pe(e){let t,s,l,n;return{c(){t=b("img"),this.h()},l(a){t=S(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ge(t.src,s=wt)||g(t,"src",s),g(t,"alt",""),g(t,"class","svelte-vyg07j")},m(a,h){P(a,t,h),n=!0},p:me,i(a){n||(a&&$e(()=>{l||(l=Le(t,Te,{duration:50},!0)),l.run(1)}),n=!0)},o(a){a&&(l||(l=Le(t,Te,{duration:50},!1)),l.run(0)),n=!1},d(a){a&&m(t),a&&l&&l.end()}}}function kt(e){let t,s,l,n=`${e[2]}rem`,a=`${e[2]}rem`,h,r,f=[{type:"checkbox"},e[3]],u={};for(let i=0;i<f.length;i+=1)u=_e(u,f[i]);let o=e[0]&&Pe();return{c(){t=b("div"),s=b("input"),l=k(),o&&o.c(),this.h()},l(i){t=S(i,"DIV",{class:!0});var c=p(t);s=S(c,"INPUT",{type:!0}),l=M(c),o&&o.l(c),c.forEach(m),this.h()},h(){Me(s,u),N(s,"border-color",e[1],!1),Ne(s,"svelte-vyg07j",!0),g(t,"class","wrapper svelte-vyg07j"),N(t,"width",n,!1),N(t,"height",a,!1)},m(i,c){P(i,t,c),_(t,s),s.autofocus&&s.focus(),s.checked=e[0],_(t,l),o&&o.m(t,null),h||(r=He(s,"change",e[4]),h=!0)},p(i,[c]){Me(s,u=Qe(f,[{type:"checkbox"},c&8&&i[3]])),c&1&&(s.checked=i[0]),N(s,"border-color",i[1],!1),Ne(s,"svelte-vyg07j",!0),i[0]?o?(o.p(i,c),c&1&&I(o,1)):(o=Pe(),o.c(),I(o,1),o.m(t,null)):o&&(Ze(),j(o,1,1,()=>{o=null}),xe()),c&4&&n!==(n=`${i[2]}rem`)&&N(t,"width",n,!1),c&4&&a!==(a=`${i[2]}rem`)&&N(t,"height",a,!1)},i(i){I(o)},o(i){j(o)},d(i){i&&m(t),o&&o.d(),h=!1,r()}}}function Mt(e,t,s){let{checked:l}=t,{borderColor:n="black"}=t,{size:a=1.5}=t;function h(){l=this.checked,s(0,l)}return e.$$set=r=>{s(3,t=_e(_e({},t),Ie(r))),"checked"in r&&s(0,l=r.checked),"borderColor"in r&&s(1,n=r.borderColor),"size"in r&&s(2,a=r.size)},t=Ie(t),[l,n,a,t,h]}class Vt extends D{constructor(t){super(),F(this,t,Mt,kt,q,{checked:0,borderColor:1,size:2})}}function Nt(e){let t,s,l;return{c(){t=b("canvas"),this.h()},l(n){t=S(n,"CANVAS",{width:!0,height:!0,class:!0}),p(t).forEach(m),this.h()},h(){g(t,"width",s=e[0].width+"px"),g(t,"height",l=e[0].height+"px"),g(t,"class","svelte-jhkqpr")},m(n,a){P(n,t,a),e[4](t)},p(n,[a]){a&1&&s!==(s=n[0].width+"px")&&g(t,"width",s),a&1&&l!==(l=n[0].height+"px")&&g(t,"height",l)},i:me,o:me,d(n){n&&m(t),e[4](null)}}}function It(e,t,s){let{showMines:l=!1}=t,{game:n}=t;const a={mine:"red",closed:"navy",empty:"blue",flag:"gold",clickedMine:"violet"};let h,r;et(()=>{s(3,r=h.getContext("2d")),s(3,r.imageSmoothingEnabled=!1,r),r.clearRect(0,0,h.width,h.height)});function f(u){tt[u?"unshift":"push"](()=>{h=u,s(1,h)})}return e.$$set=u=>{"showMines"in u&&s(2,l=u.showMines),"game"in u&&s(0,n=u.game)},e.$$.update=()=>{if(e.$$.dirty&15&&r){const u=h.width/n.width,o=h.height/n.height;for(let i=0;i<n.width*n.height;i++){const c=n.board[i],w=i%n.width,z=Math.floor(i/n.height);i===n.lostToCell&&l?s(3,r.fillStyle=a.clickedMine,r):c.state===be.Closed?s(3,r.fillStyle=a.closed,r):c.type===Ve.Mine&&l?s(3,r.fillStyle=a.mine,r):c.state===be.Flagged?s(3,r.fillStyle=a.flag,r):s(3,r.fillStyle=a.empty,r),r.fillRect(w*u,z*o,u,o)}}},[n,h,l,r,f]}class Jt extends D{constructor(t){super(),F(this,t,It,Nt,q,{showMines:2,game:0})}}export{oe as B,Vt as C,ht as G,Jt as M,Tt as S,re as a,pt as b,U as c,Ht as d,be as e,Ve as f,ce as g,dt as h,Te as i,Se as j,Et as k,Wt as l,bt as m,Pt as n,zt as o,gt as r,yt as s,Gt as t,B as u};
