var et=Object.defineProperty;var tt=(e,t,s)=>t in e?et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var q=(e,t,s)=>(tt(e,typeof t!="symbol"?t+"":t,s),s);import{I as Be,S as ee,i as te,s as se,B as ge,k as p,a as k,l as y,m as M,c as I,h as v,n as h,J as Oe,p as H,b as z,G as _,K as qe,D as me,E as _e,F as be,f as N,t as R,H as st,L as ve,M as nt,q as fe,v as F,r as he,w as j,N as x,x as X,y as Y,O as lt,P as pe,Q as Pe,R as it,g as at,d as ot,T as Ae,A as ye,U as rt,V as Ge,o as ct,W as ut}from"./index-5591f0db.js";import{w as J,d as C,c as K}from"./singletons-40119890.js";const ft=""+new URL("../assets/stats-08c66cd3.svg",import.meta.url).href,ht=""+new URL("../assets/settings-4a18c9a1.svg",import.meta.url).href,dt=""+new URL("../assets/home-b3ebdf43.svg",import.meta.url).href,gt=""+new URL("../assets/info-d260f4fb.svg",import.meta.url).href,Ee="MINESWEEPER_SAVE_GAME",mt=e=>{let t=localStorage[Ee+`_${e}`];return t?JSON.parse(t):null},Fe=(e,t)=>{je(e),localStorage[Ee+`_${e}`]=JSON.stringify(t)},je=e=>{localStorage.removeItem(Ee+`_${e}`)},Ut=e=>{U.update(t=>(t==null||t.splice(t.findIndex(s=>s.index===e),1),t)),je(e)},Dt=e=>{let t=Be(U),s;for(let n=0;;n++)if(t.findIndex(l=>l.index===n)===-1){s=n;break}e.title+=s,Fe(s,e),$.set(-1),$.set(s),U.update(n=>(n==null||n.push({index:s,selected:!1}),n)),we.set(e)},Xe="MINESWEEPER_OVERALL_STATS",_t=()=>{var s,n,l,i;const e=JSON.parse((s=localStorage[Xe])!=null?s:"{}");return{gamesWon:(n=e==null?void 0:e.gamesWon)!=null?n:0,gamesLost:(l=e==null?void 0:e.gamesLost)!=null?l:0,cellsOpened:(i=e==null?void 0:e.cellsOpened)!=null?i:0}},bt=e=>{localStorage[Xe]=JSON.stringify(e)},Ye="MINESWEEPER_SETTINGS",Bt=[0,5,10,15,20],Ke=[{hue:200,accent:"darkcyan",cellHue:200,light:!1},{hue:100,accent:"green",cellHue:100,light:!1},{hue:300,accent:"darkviolet",cellHue:300,light:!1},{hue:0,accent:"brown",cellHue:0,light:!1},{hue:50,accent:"orange",cellHue:60,light:!0}],vt=()=>{var s,n,l;const e=JSON.parse((s=localStorage[Ye])!=null?s:"{}");return{theme:(n=e==null?void 0:e.theme)!=null?n:0,saturation:(l=e==null?void 0:e.saturation)!=null?l:10}},pt=e=>{localStorage[Ye]=JSON.stringify(e)},Qe="MINESWEEPER_SAVE_SLOTS";let we=J(null);we.subscribe(e=>{if(typeof window<"u"&&e!=null){let t=Be($);Fe(t,e)}});let $=J(-1);$.subscribe(e=>{e!==-1&&we.set(mt(e))});let U=J();var De;typeof window<"u"&&U.set(JSON.parse((De=localStorage[Qe])!=null?De:"[]").map(e=>({index:e,selected:!1})));U.subscribe(e=>{typeof window>"u"||e==null||(localStorage[Qe]=JSON.stringify(e.map(t=>t.index)))});const Ze=J();typeof window<"u"&&Ze.set(_t());Ze.subscribe(e=>{typeof window>"u"||e==null||bt(e)});const Me=J();typeof window<"u"&&Me.set(vt());Me.subscribe(e=>{if(typeof window>"u"||e==null)return;const t=Ke[e.theme];document.documentElement.style.setProperty("--brand-hue",""+t.hue),document.documentElement.style.setProperty("--sat-mul",""+e.saturation),document.documentElement.style.setProperty("--accent",""+t.accent),document.documentElement.style.setProperty("--cell-hue",""+t.cellHue),t.light?(document.documentElement.style.setProperty("--light-offset","60%"),document.documentElement.style.setProperty("--font-color","black")):(document.documentElement.style.setProperty("--light-offset","0%"),document.documentElement.style.setProperty("--font-color","whitesmoke")),pt(e)});const xe=J(null);Me.subscribe(e=>{!e||xe.set(Ke[e.theme])});function Te(e){let t,s;return{c(){t=p("img"),this.h()},l(n){t=y(n,"IMG",{src:!0,alt:!0,draggable:!0,class:!0}),this.h()},h(){var n;ve(t.src,s=e[3])||h(t,"src",s),h(t,"alt",""),h(t,"draggable","false"),h(t,"class","svelte-1bt4tps"),H(t,"filter",(n=e[7])!=null&&n.light?"invert()":null,!1)},m(n,l){z(n,t,l)},p(n,l){var i;l&8&&!ve(t.src,s=n[3])&&h(t,"src",s),l&128&&H(t,"filter",(i=n[7])!=null&&i.light?"invert()":null,!1)},d(n){n&&v(t)}}}function yt(e){let t,s,n,l,i=`${e[4]}rem`,u,f,b,c=e[1]==="icon"&&Te(e);const r=e[9].default,o=ge(r,e,e[8],null);return{c(){t=p("button"),c&&c.c(),s=k(),o&&o.c(),this.h()},l(a){t=y(a,"BUTTON",{class:!0,title:!0,type:!0});var m=M(t);c&&c.l(m),s=I(m),o&&o.l(m),m.forEach(v),this.h()},h(){var a;t.disabled=e[0],h(t,"class",n=Oe(["unstyled",e[1],e[2],(a=e[7])!=null&&a.light?"light":"dark"].join(" "))+" svelte-1bt4tps"),h(t,"title",e[5]),h(t,"type",l=e[6]?"submit":"button"),H(t,"padding",i,!1)},m(a,m){z(a,t,m),c&&c.m(t,null),_(t,s),o&&o.m(t,null),u=!0,f||(b=qe(t,"click",e[10]),f=!0)},p(a,[m]){var g;a[1]==="icon"?c?c.p(a,m):(c=Te(a),c.c(),c.m(t,s)):c&&(c.d(1),c=null),o&&o.p&&(!u||m&256)&&me(o,r,a,a[8],u?be(r,a[8],m,null):_e(a[8]),null),(!u||m&1)&&(t.disabled=a[0]),(!u||m&134&&n!==(n=Oe(["unstyled",a[1],a[2],(g=a[7])!=null&&g.light?"light":"dark"].join(" "))+" svelte-1bt4tps"))&&h(t,"class",n),(!u||m&32)&&h(t,"title",a[5]),(!u||m&64&&l!==(l=a[6]?"submit":"button"))&&h(t,"type",l),m&16&&i!==(i=`${a[4]}rem`)&&H(t,"padding",i,!1)},i(a){u||(N(o,a),u=!0)},o(a){R(o,a),u=!1},d(a){a&&v(t),c&&c.d(),o&&o.d(a),f=!1,b()}}}function St(e,t,s){let n;st(e,xe,g=>s(7,n=g));let{$$slots:l={},$$scope:i}=t,{disabled:u=!1}=t,{type:f="normal"}=t,{size:b="medium"}=t,{iconSrc:c=""}=t,{padding:r=null}=t,{title:o=null}=t,{submit:a=!1}=t;function m(g){nt.call(this,e,g)}return e.$$set=g=>{"disabled"in g&&s(0,u=g.disabled),"type"in g&&s(1,f=g.type),"size"in g&&s(2,b=g.size),"iconSrc"in g&&s(3,c=g.iconSrc),"padding"in g&&s(4,r=g.padding),"title"in g&&s(5,o=g.title),"submit"in g&&s(6,a=g.submit),"$$scope"in g&&s(8,i=g.$$scope)},[u,f,b,c,r,o,a,n,i,l,m]}class Q extends ee{constructor(t){super(),te(this,t,St,yt,se,{disabled:0,type:1,size:2,iconSrc:3,padding:4,title:5,submit:6})}}C.disable_scroll_handling;const Z=C.goto;C.invalidate;C.invalidateAll;C.prefetch;C.prefetch_routes;C.before_navigate;C.after_navigate;const He="",Ce="Minesweeper",We="SFG + TMH Games";function Et(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}function qt(e){const t=Math.floor(e/3600),s=Math.floor(e/60)%60,n=e%60;let l="";return t>0&&(l+=t.toString().padStart(2,"0")+":"),l+=s.toString().padStart(2,"0")+":",l+=n.toString().padStart(2,"0"),l}const wt=e=>({}),Ve=e=>({}),Mt=e=>({}),ze=e=>({});function kt(e){let t,s,n,l,i,u,f,b,c,r,o,a,m,g,O,ne,P,le,D,ie,ae,W,A,oe,V,re,L;o=new Q({props:{type:"icon",size:"large",iconSrc:dt,padding:.2,title:"Home"}}),o.$on("click",e[3]),m=new Q({props:{type:"icon",size:"large",iconSrc:ft,padding:.2,title:"Stats"}}),m.$on("click",e[4]),O=new Q({props:{type:"icon",size:"large",iconSrc:ht,padding:.2,title:"Settings"}}),O.$on("click",e[5]),P=new Q({props:{type:"icon",size:"large",iconSrc:gt,padding:.2,title:"Info"}}),P.$on("click",e[6]);const ce=e[2].sidebar,E=ge(ce,e,e[1],ze),ue=e[2].content,w=ge(ue,e,e[1],Ve);return{c(){t=p("main"),s=p("aside"),n=p("header"),l=p("h1"),i=fe(Ce),u=k(),f=p("h3"),b=fe(We),c=k(),r=p("div"),F(o.$$.fragment),a=k(),F(m.$$.fragment),g=k(),F(O.$$.fragment),ne=k(),F(P.$$.fragment),le=k(),D=p("hr"),ie=k(),E&&E.c(),ae=k(),W=p("div"),A=p("div"),w&&w.c(),oe=k(),V=p("footer"),re=fe(He),this.h()},l(d){t=y(d,"MAIN",{class:!0});var S=M(t);s=y(S,"ASIDE",{class:!0});var G=M(s);n=y(G,"HEADER",{class:!0});var B=M(n);l=y(B,"H1",{id:!0,class:!0});var ke=M(l);i=he(ke,Ce),ke.forEach(v),u=I(B),f=y(B,"H3",{id:!0,class:!0});var Ie=M(f);b=he(Ie,We),Ie.forEach(v),B.forEach(v),c=I(G),r=y(G,"DIV",{class:!0});var T=M(r);j(o.$$.fragment,T),a=I(T),j(m.$$.fragment,T),g=I(T),j(O.$$.fragment,T),ne=I(T),j(P.$$.fragment,T),T.forEach(v),le=I(G),D=y(G,"HR",{class:!0}),ie=I(G),E&&E.l(G),G.forEach(v),ae=I(S),W=y(S,"DIV",{class:!0});var Ne=M(W);A=y(Ne,"DIV",{class:!0});var Le=M(A);w&&w.l(Le),Le.forEach(v),Ne.forEach(v),oe=I(S),V=y(S,"FOOTER",{class:!0});var Re=M(V);re=he(Re,He),Re.forEach(v),S.forEach(v),this.h()},h(){h(l,"id","title"),h(l,"class","svelte-1vrgvue"),h(f,"id","creator"),h(f,"class","svelte-1vrgvue"),h(n,"class","svelte-1vrgvue"),h(r,"class","menus svelte-1vrgvue"),h(D,"class","svelte-1vrgvue"),h(s,"class","sidebar svelte-1vrgvue"),h(A,"class","fit-content svelte-1vrgvue"),x(A,"full",e[0]),h(W,"class","full-content svelte-1vrgvue"),h(V,"class","version svelte-1vrgvue"),h(t,"class","wrapper svelte-1vrgvue")},m(d,S){z(d,t,S),_(t,s),_(s,n),_(n,l),_(l,i),_(n,u),_(n,f),_(f,b),_(s,c),_(s,r),X(o,r,null),_(r,a),X(m,r,null),_(r,g),X(O,r,null),_(r,ne),X(P,r,null),_(s,le),_(s,D),_(s,ie),E&&E.m(s,null),_(t,ae),_(t,W),_(W,A),w&&w.m(A,null),_(t,oe),_(t,V),_(V,re),L=!0},p(d,[S]){E&&E.p&&(!L||S&2)&&me(E,ce,d,d[1],L?be(ce,d[1],S,Mt):_e(d[1]),ze),w&&w.p&&(!L||S&2)&&me(w,ue,d,d[1],L?be(ue,d[1],S,wt):_e(d[1]),Ve),(!L||S&1)&&x(A,"full",d[0])},i(d){L||(N(o.$$.fragment,d),N(m.$$.fragment,d),N(O.$$.fragment,d),N(P.$$.fragment,d),N(E,d),N(w,d),L=!0)},o(d){R(o.$$.fragment,d),R(m.$$.fragment,d),R(O.$$.fragment,d),R(P.$$.fragment,d),R(E,d),R(w,d),L=!1},d(d){d&&v(t),Y(o),Y(m),Y(O),Y(P),E&&E.d(d),w&&w.d(d)}}}function It(e,t,s){let{$$slots:n={},$$scope:l}=t,{fullContent:i=!1}=t;const u=()=>{Z(`${K}`)},f=()=>{Z(`${K}/stats`)},b=()=>{Z(`${K}/settings`)},c=()=>{Z(`${K}/info`)};return e.$$set=r=>{"fullContent"in r&&s(0,i=r.fullContent),"$$scope"in r&&s(1,l=r.$$scope)},[i,l,n,u,f,b,c]}class Ft extends ee{constructor(t){super(),te(this,t,It,kt,se,{fullContent:0})}}var Se=(e=>(e.Closed="closed",e.Opened="opened",e.Flagged="flagged",e))(Se||{}),$e=(e=>(e.Empty="empty",e.Mine="mine",e))($e||{}),Nt=(e=>(e.Playing="playing",e.Won="won",e.Lost="lost",e))(Nt||{}),Ht,Ct,Wt;class de{}Ht=8,Ct=12,Wt=16,q(de,Ht,{width:8,height:8,numMines:10}),q(de,Ct,{width:12,height:12,numMines:20}),q(de,Wt,{width:16,height:16,numMines:40});const jt=e=>{const t=Array(e.width*e.height);for(let n=0;n<e.height*e.width;n++)t[n]={state:"closed",numNeighborMines:0,type:"empty"};const s={board:t,...e,firstMove:!0,state:"playing",lostToCell:-1,title:"Save Game ",stats:{timePlayed:0}};for(let n=0;n<e.numMines;n++)Lt(s);return Rt(s),s},Lt=(e,t=[])=>{const s=[];for(let l=0;l<e.width*e.height;l++)e.board[l].type==="empty"&&t.indexOf(l)===-1&&s.push(l);const n=s[Et(0,s.length)];e.board[n].type="mine"},Rt=e=>{for(let t=0;t<e.width;t++)for(let s=0;s<e.height;s++){let n=0;for(let i=0;i<9;i++){const u=Math.floor(i/3)-1,f=i%3-1,b=t+u,c=s+f;if(b<0||b>=e.width||c<0||c>=e.height)continue;const r=c*e.width+b;e.board[r].type==="mine"&&(n+=1)}const l=s*e.width+t;e.board[l].numNeighborMines=n}};function Je(e,{delay:t=0,duration:s=400,easing:n=lt}={}){const l=+getComputedStyle(e).opacity;return{delay:t,duration:s,easing:n,css:i=>`opacity: ${i*l}`}}const Ot=""+new URL("../assets/check-ce7a5ec0.svg",import.meta.url).href;function Ue(e){let t,s,n,l;return{c(){t=p("img"),this.h()},l(i){t=y(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ve(t.src,s=Ot)||h(t,"src",s),h(t,"alt",""),h(t,"class","svelte-zd59fy")},m(i,u){z(i,t,u),l=!0},p:ye,i(i){l||(i&&rt(()=>{n||(n=Ge(t,Je,{duration:50},!0)),n.run(1)}),l=!0)},o(i){i&&(n||(n=Ge(t,Je,{duration:50},!1)),n.run(0)),l=!1},d(i){i&&v(t),i&&n&&n.end()}}}function Pt(e){let t,s,n,l=`${e[1]}rem`,i=`${e[1]}rem`,u,f,b=[{type:"checkbox"},e[2]],c={};for(let o=0;o<b.length;o+=1)c=pe(c,b[o]);let r=e[0]&&Ue();return{c(){t=p("div"),s=p("input"),n=k(),r&&r.c(),this.h()},l(o){t=y(o,"DIV",{class:!0});var a=M(t);s=y(a,"INPUT",{type:!0}),n=I(a),r&&r.l(a),a.forEach(v),this.h()},h(){Pe(s,c),x(s,"svelte-zd59fy",!0),h(t,"class","wrapper svelte-zd59fy"),H(t,"width",l,!1),H(t,"height",i,!1)},m(o,a){z(o,t,a),_(t,s),s.autofocus&&s.focus(),s.checked=e[0],_(t,n),r&&r.m(t,null),u||(f=qe(s,"change",e[3]),u=!0)},p(o,[a]){Pe(s,c=it(b,[{type:"checkbox"},a&4&&o[2]])),a&1&&(s.checked=o[0]),x(s,"svelte-zd59fy",!0),o[0]?r?(r.p(o,a),a&1&&N(r,1)):(r=Ue(),r.c(),N(r,1),r.m(t,null)):r&&(at(),R(r,1,1,()=>{r=null}),ot()),a&2&&l!==(l=`${o[1]}rem`)&&H(t,"width",l,!1),a&2&&i!==(i=`${o[1]}rem`)&&H(t,"height",i,!1)},i(o){N(r)},o(o){R(r)},d(o){o&&v(t),r&&r.d(),u=!1,f()}}}function At(e,t,s){let{checked:n}=t,{size:l=1.5}=t;function i(){n=this.checked,s(0,n)}return e.$$set=u=>{s(2,t=pe(pe({},t),Ae(u))),"checked"in u&&s(0,n=u.checked),"size"in u&&s(1,l=u.size)},t=Ae(t),[n,l,t,i]}class Xt extends ee{constructor(t){super(),te(this,t,At,Pt,se,{checked:0,size:1})}}function Gt(e){let t,s,n;return{c(){t=p("canvas"),this.h()},l(l){t=y(l,"CANVAS",{width:!0,height:!0,class:!0}),M(t).forEach(v),this.h()},h(){h(t,"width",s=e[0].width+"px"),h(t,"height",n=e[0].height+"px"),h(t,"class","svelte-jhkqpr")},m(l,i){z(l,t,i),e[4](t)},p(l,[i]){i&1&&s!==(s=l[0].width+"px")&&h(t,"width",s),i&1&&n!==(n=l[0].height+"px")&&h(t,"height",n)},i:ye,o:ye,d(l){l&&v(t),e[4](null)}}}function Tt(e,t,s){let{showMines:n=!1}=t,{game:l}=t;const i={mine:"red",closed:"navy",empty:"blue",flag:"gold",clickedMine:"violet"};let u,f;ct(()=>{s(3,f=u.getContext("2d")),s(3,f.imageSmoothingEnabled=!1,f),f.clearRect(0,0,u.width,u.height)});function b(c){ut[c?"unshift":"push"](()=>{u=c,s(1,u)})}return e.$$set=c=>{"showMines"in c&&s(2,n=c.showMines),"game"in c&&s(0,l=c.game)},e.$$.update=()=>{if(e.$$.dirty&15&&f){const c=u.width/l.width,r=u.height/l.height;for(let o=0;o<l.width*l.height;o++){const a=l.board[o],m=o%l.width,g=Math.floor(o/l.height);o===l.lostToCell&&n?s(3,f.fillStyle=i.clickedMine,f):a.state===Se.Closed?s(3,f.fillStyle=i.closed,f):a.type===$e.Mine&&n?s(3,f.fillStyle=i.mine,f):a.state===Se.Flagged?s(3,f.fillStyle=i.flag,f):s(3,f.fillStyle=i.empty,f),f.fillRect(m*c,g*r,c,r)}}},[l,u,n,f,b]}class Yt extends ee{constructor(t){super(),te(this,t,Tt,Gt,se,{showMines:2,game:0})}}export{Q as B,Xt as C,Nt as G,Yt as M,Ft as S,de as a,mt as b,$ as c,Ut as d,Se as e,Ze as f,Z as g,$e as h,Lt as i,xe as j,Je as k,Dt as l,we as m,jt as n,Me as o,Ke as p,Bt as q,Rt as r,Fe as s,qt as t,U as u};
