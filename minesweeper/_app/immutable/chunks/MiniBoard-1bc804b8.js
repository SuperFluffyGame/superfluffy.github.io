var et=Object.defineProperty;var tt=(e,t,s)=>t in e?et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var $=(e,t,s)=>(tt(e,typeof t!="symbol"?t+"":t,s),s);import{I as Je,S as re,i as ce,s as fe,B as de,k as v,a as O,l as E,m as I,c as T,h as y,n as d,J as Te,p as H,b as K,G as b,K as Ue,D as ge,E as _e,F as be,f as R,t as G,H as st,L as ye,M as lt,q as ue,v as ee,r as he,w as te,N as Y,x as se,y as le,O as nt,P as Se,Q as Re,R as it,g as ot,d as at,T as Pe,A as pe,U as rt,V as Ae,o as ct,W as ft}from"./index-4f1aec18.js";import{w as Q,d as C,c as ne}from"./singletons-7fe40bc0.js";const ut=""+new URL("../assets/stats-08c66cd3.svg",import.meta.url).href,ht=""+new URL("../assets/settings-4a18c9a1.svg",import.meta.url).href,mt=""+new URL("../assets/home-b3ebdf43.svg",import.meta.url).href,dt=""+new URL("../assets/info-d260f4fb.svg",import.meta.url).href,Ee="MINESWEEPER_SAVE_GAME",gt=e=>{var s;return JSON.parse((s=localStorage[Ee+`_${e}`])!=null?s:{})},Be=(e,t)=>{je(e),localStorage[Ee+`_${e}`]=JSON.stringify(t)},je=e=>{localStorage.removeItem(Ee+`_${e}`)},Dt=e=>{Z.update(t=>(t==null||t.splice(t.findIndex(s=>s.index===e),1),t)),je(e)},Jt=e=>{let t=Je(Z),s;for(let l=0;;l++)if(t.findIndex(n=>n.index===l)===-1){s=l;break}e.title+=s,Be(s,e),ae.set(-1),ae.set(s),Z.update(l=>(l==null||l.push({index:s,selected:!1}),l)),we.set(e)},Xe="MINESWEEPER_OVERALL_STATS",_t=()=>{var s,l,n,a,f,u,_,c,r,i,o,g,M,m,V,L,z,F,D,J,P,k,U,A,B,N,j,S,X,p,h;const e=JSON.parse((s=localStorage[Xe])!=null?s:"{}");return{easy:{gamesWon:(n=(l=e==null?void 0:e.easy)==null?void 0:l.gamesWon)!=null?n:0,gamesLost:(f=(a=e==null?void 0:e.easy)==null?void 0:a.gamesLost)!=null?f:0,cellsOpened:(_=(u=e==null?void 0:e.easy)==null?void 0:u.cellsOpened)!=null?_:0,times:(r=(c=e==null?void 0:e.easy)==null?void 0:c.times)!=null?r:[],averageTime:(o=(i=e==null?void 0:e.easy)==null?void 0:i.averageTime)!=null?o:0},medium:{gamesWon:(M=(g=e==null?void 0:e.medium)==null?void 0:g.gamesWon)!=null?M:0,gamesLost:(V=(m=e==null?void 0:e.medium)==null?void 0:m.gamesLost)!=null?V:0,cellsOpened:(z=(L=e==null?void 0:e.medium)==null?void 0:L.cellsOpened)!=null?z:0,times:(D=(F=e==null?void 0:e.medium)==null?void 0:F.times)!=null?D:[],averageTime:(P=(J=e==null?void 0:e.medium)==null?void 0:J.averageTime)!=null?P:0},hard:{gamesWon:(U=(k=e==null?void 0:e.hard)==null?void 0:k.gamesWon)!=null?U:0,gamesLost:(B=(A=e==null?void 0:e.hard)==null?void 0:A.gamesLost)!=null?B:0,cellsOpened:(j=(N=e==null?void 0:e.hard)==null?void 0:N.cellsOpened)!=null?j:0,times:(X=(S=e==null?void 0:e.hard)==null?void 0:S.times)!=null?X:[],averageTime:(h=(p=e==null?void 0:e.hard)==null?void 0:p.averageTime)!=null?h:0}}},bt=e=>{localStorage[Xe]=JSON.stringify(e)},Ye="MINESWEEPER_SETTINGS",Ut=[0,5,10,15,20],Ke=[{hue:200,accent:"darkcyan",cellHue:200,light:!1},{hue:100,accent:"green",cellHue:100,light:!1},{hue:300,accent:"darkviolet",cellHue:300,light:!1},{hue:0,accent:"brown",cellHue:0,light:!1},{hue:50,accent:"orange",cellHue:60,light:!0}],yt=()=>{var s,l,n;const e=JSON.parse((s=localStorage[Ye])!=null?s:"{}");return{theme:(l=e==null?void 0:e.theme)!=null?l:0,saturation:(n=e==null?void 0:e.saturation)!=null?n:0}},St=e=>{localStorage[Ye]=JSON.stringify(e)},Qe="MINESWEEPER_SAVE_SLOTS";let we=Q(null);we.subscribe(e=>{if(typeof window<"u"&&e!=null){let t=Je(ae);Be(t,e)}});let ae=Q(-1);ae.subscribe(e=>{e!==-1&&we.set(gt(e))});let Z=Q();var De;typeof window<"u"&&Z.set(JSON.parse((De=localStorage[Qe])!=null?De:"[]").map(e=>({index:e,selected:!1})));Z.subscribe(e=>{typeof window>"u"||e==null||(localStorage[Qe]=JSON.stringify(e.map(t=>t.index)))});const Ze=Q();typeof window<"u"&&Ze.set(_t());Ze.subscribe(e=>{typeof window>"u"||e==null||bt(e)});const Me=Q();typeof window<"u"&&Me.set(yt());Me.subscribe(e=>{if(typeof window>"u"||e==null)return;const t=Ke[e.theme];document.documentElement.style.setProperty("--brand-hue",""+t.hue),document.documentElement.style.setProperty("--sat-mul",""+e.saturation),document.documentElement.style.setProperty("--accent",""+t.accent),document.documentElement.style.setProperty("--cell-hue",""+t.cellHue),t.light?(document.documentElement.style.setProperty("--light-offset","60%"),document.documentElement.style.setProperty("--font-color","black")):(document.documentElement.style.setProperty("--light-offset","0%"),document.documentElement.style.setProperty("--font-color","whitesmoke")),St(e)});const xe=Q(null);Me.subscribe(e=>{!e||xe.set(Ke[e.theme])});function Ge(e){let t,s;return{c(){t=v("img"),this.h()},l(l){t=E(l,"IMG",{src:!0,alt:!0,draggable:!0,class:!0}),this.h()},h(){var l;ye(t.src,s=e[3])||d(t,"src",s),d(t,"alt",""),d(t,"draggable","false"),d(t,"class","svelte-1bt4tps"),H(t,"filter",(l=e[8])!=null&&l.light?"invert()":null,!1)},m(l,n){K(l,t,n)},p(l,n){var a;n&8&&!ye(t.src,s=l[3])&&d(t,"src",s),n&256&&H(t,"filter",(a=l[8])!=null&&a.light?"invert()":null,!1)},d(l){l&&y(t)}}}function pt(e){let t,s,l,n,a=`${e[4]}rem`,f,u,_,c=e[1]==="icon"&&Ge(e);const r=e[10].default,i=de(r,e,e[9],null);return{c(){t=v("button"),c&&c.c(),s=O(),i&&i.c(),this.h()},l(o){t=E(o,"BUTTON",{class:!0,title:!0,type:!0,style:!0});var g=I(t);c&&c.l(g),s=T(g),i&&i.l(g),g.forEach(y),this.h()},h(){var o;t.disabled=e[0],d(t,"class",l=Te(["unstyled",e[1],e[2],(o=e[8])!=null&&o.light?"light":"dark"].join(" "))+" svelte-1bt4tps"),d(t,"title",e[5]),d(t,"type",n=e[6]?"submit":"button"),d(t,"style",e[7]),H(t,"padding",a,!1)},m(o,g){K(o,t,g),c&&c.m(t,null),b(t,s),i&&i.m(t,null),f=!0,u||(_=Ue(t,"click",e[11]),u=!0)},p(o,[g]){var M;o[1]==="icon"?c?c.p(o,g):(c=Ge(o),c.c(),c.m(t,s)):c&&(c.d(1),c=null),i&&i.p&&(!f||g&512)&&ge(i,r,o,o[9],f?be(r,o[9],g,null):_e(o[9]),null),(!f||g&1)&&(t.disabled=o[0]),(!f||g&262&&l!==(l=Te(["unstyled",o[1],o[2],(M=o[8])!=null&&M.light?"light":"dark"].join(" "))+" svelte-1bt4tps"))&&d(t,"class",l),(!f||g&32)&&d(t,"title",o[5]),(!f||g&64&&n!==(n=o[6]?"submit":"button"))&&d(t,"type",n),(!f||g&128)&&d(t,"style",o[7]),g&16&&a!==(a=`${o[4]}rem`)&&H(t,"padding",a,!1)},i(o){f||(R(i,o),f=!0)},o(o){G(i,o),f=!1},d(o){o&&y(t),c&&c.d(),i&&i.d(o),u=!1,_()}}}function vt(e,t,s){let l;st(e,xe,m=>s(8,l=m));let{$$slots:n={},$$scope:a}=t,{disabled:f=!1}=t,{type:u="normal"}=t,{size:_="medium"}=t,{iconSrc:c=""}=t,{padding:r=null}=t,{title:i=null}=t,{submit:o=!1}=t,{style:g=null}=t;function M(m){lt.call(this,e,m)}return e.$$set=m=>{"disabled"in m&&s(0,f=m.disabled),"type"in m&&s(1,u=m.type),"size"in m&&s(2,_=m.size),"iconSrc"in m&&s(3,c=m.iconSrc),"padding"in m&&s(4,r=m.padding),"title"in m&&s(5,i=m.title),"submit"in m&&s(6,o=m.submit),"style"in m&&s(7,g=m.style),"$$scope"in m&&s(9,a=m.$$scope)},[f,u,_,c,r,i,o,g,l,a,n,M]}class ie extends re{constructor(t){super(),ce(this,t,vt,pt,fe,{disabled:0,type:1,size:2,iconSrc:3,padding:4,title:5,submit:6,style:7})}}C.disable_scroll_handling;const oe=C.goto;C.invalidate;C.invalidateAll;C.prefetch;C.prefetch_routes;C.before_navigate;C.after_navigate;const We="",qe="Minesweeper",He="SFG + TMH Games";function Et(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}function Bt(e){const t=Math.floor(e/3600),s=Math.floor(e/60)%60,l=e%60;let n="";return t>0&&(n+=t.toString().padStart(2,"0")+":"),n+=s.toString().padStart(2,"0")+":",n+=l.toString().padStart(2,"0"),n}const wt=new Intl.NumberFormat("en-us",{compactDisplay:"short",notation:"compact",maximumFractionDigits:2}),jt=wt.format;const Mt=e=>({}),Ce=e=>({}),kt=e=>({}),Fe=e=>({});function Nt(e){let t,s,l,n,a,f,u,_,c,r,i,o,g,M,m,V,L,z,F,D,J,P,k,U,A,B,N;i=new ie({props:{type:"icon",size:"large",iconSrc:mt,padding:.2,title:"Home"}}),i.$on("click",e[4]),g=new ie({props:{type:"icon",size:"large",iconSrc:ut,padding:.2,title:"Stats"}}),g.$on("click",e[5]),m=new ie({props:{type:"icon",size:"large",iconSrc:ht,padding:.2,title:"Settings"}}),m.$on("click",e[6]),L=new ie({props:{type:"icon",size:"large",iconSrc:dt,padding:.2,title:"Info"}}),L.$on("click",e[7]);const j=e[3].sidebar,S=de(j,e,e[2],Fe),X=e[3].content,p=de(X,e,e[2],Ce);return{c(){t=v("main"),s=v("aside"),l=v("header"),n=v("h1"),a=ue(qe),f=O(),u=v("h3"),_=ue(He),c=O(),r=v("div"),ee(i.$$.fragment),o=O(),ee(g.$$.fragment),M=O(),ee(m.$$.fragment),V=O(),ee(L.$$.fragment),z=O(),F=v("hr"),D=O(),S&&S.c(),J=O(),P=v("div"),k=v("div"),p&&p.c(),U=O(),A=v("footer"),B=ue(We),this.h()},l(h){t=E(h,"MAIN",{class:!0});var w=I(t);s=E(w,"ASIDE",{class:!0});var W=I(s);l=E(W,"HEADER",{class:!0});var x=I(l);n=E(x,"H1",{id:!0,class:!0});var ke=I(n);a=he(ke,qe),ke.forEach(y),f=T(x),u=E(x,"H3",{id:!0,class:!0});var Ne=I(u);_=he(Ne,He),Ne.forEach(y),x.forEach(y),c=T(W),r=E(W,"DIV",{class:!0});var q=I(r);te(i.$$.fragment,q),o=T(q),te(g.$$.fragment,q),M=T(q),te(m.$$.fragment,q),V=T(q),te(L.$$.fragment,q),q.forEach(y),z=T(W),F=E(W,"HR",{class:!0}),D=T(W),S&&S.l(W),W.forEach(y),J=T(w),P=E(w,"DIV",{class:!0});var Ie=I(P);k=E(Ie,"DIV",{class:!0});var Le=I(k);p&&p.l(Le),Le.forEach(y),Ie.forEach(y),U=T(w),A=E(w,"FOOTER",{class:!0});var Oe=I(A);B=he(Oe,We),Oe.forEach(y),w.forEach(y),this.h()},h(){d(n,"id","title"),d(n,"class","svelte-18m32q0"),d(u,"id","creator"),d(u,"class","svelte-18m32q0"),d(l,"class","svelte-18m32q0"),d(r,"class","menus svelte-18m32q0"),d(F,"class","svelte-18m32q0"),d(s,"class","sidebar svelte-18m32q0"),d(k,"class","fit-content svelte-18m32q0"),Y(k,"full",e[0]),Y(k,"disable-flex",e[1]),d(P,"class","full-content svelte-18m32q0"),d(A,"class","version svelte-18m32q0"),d(t,"class","wrapper svelte-18m32q0")},m(h,w){K(h,t,w),b(t,s),b(s,l),b(l,n),b(n,a),b(l,f),b(l,u),b(u,_),b(s,c),b(s,r),se(i,r,null),b(r,o),se(g,r,null),b(r,M),se(m,r,null),b(r,V),se(L,r,null),b(s,z),b(s,F),b(s,D),S&&S.m(s,null),b(t,J),b(t,P),b(P,k),p&&p.m(k,null),b(t,U),b(t,A),b(A,B),N=!0},p(h,[w]){S&&S.p&&(!N||w&4)&&ge(S,j,h,h[2],N?be(j,h[2],w,kt):_e(h[2]),Fe),p&&p.p&&(!N||w&4)&&ge(p,X,h,h[2],N?be(X,h[2],w,Mt):_e(h[2]),Ce),(!N||w&1)&&Y(k,"full",h[0]),(!N||w&2)&&Y(k,"disable-flex",h[1])},i(h){N||(R(i.$$.fragment,h),R(g.$$.fragment,h),R(m.$$.fragment,h),R(L.$$.fragment,h),R(S,h),R(p,h),N=!0)},o(h){G(i.$$.fragment,h),G(g.$$.fragment,h),G(m.$$.fragment,h),G(L.$$.fragment,h),G(S,h),G(p,h),N=!1},d(h){h&&y(t),le(i),le(g),le(m),le(L),S&&S.d(h),p&&p.d(h)}}}function It(e,t,s){let{$$slots:l={},$$scope:n}=t,{fullContent:a=!1}=t,{disableFlex:f=!1}=t;const u=()=>{oe(`${ne}`)},_=()=>{oe(`${ne}/stats`)},c=()=>{oe(`${ne}/settings`)},r=()=>{oe(`${ne}/info`)};return e.$$set=i=>{"fullContent"in i&&s(0,a=i.fullContent),"disableFlex"in i&&s(1,f=i.disableFlex),"$$scope"in i&&s(2,n=i.$$scope)},[a,f,n,l,u,_,c,r]}class Xt extends re{constructor(t){super(),ce(this,t,It,Nt,fe,{fullContent:0,disableFlex:1})}}var ve=(e=>(e.Closed="closed",e.Opened="opened",e.Flagged="flagged",e))(ve||{}),$e=(e=>(e.Empty="empty",e.Mine="mine",e))($e||{}),Lt=(e=>(e.Playing="playing",e.Won="won",e.Lost="lost",e))(Lt||{}),qt,Ht,Ct;class me{}qt=8,Ht=12,Ct=16,$(me,qt,{width:8,height:8,numMines:10}),$(me,Ht,{width:12,height:12,numMines:20}),$(me,Ct,{width:16,height:16,numMines:40});const Yt=(e,t)=>{const s=Array(e.width*e.height);for(let n=0;n<e.height*e.width;n++)s[n]={state:"closed",numNeighborMines:0,type:"empty"};const l={board:s,...e,sizeDesc:t,firstMove:!0,state:"playing",lostToCell:-1,title:"Save Game ",stats:{timePlayed:0}};for(let n=0;n<e.numMines;n++)Ot(l);return Tt(l),l},Ot=(e,t=[])=>{const s=[];for(let n=0;n<e.width*e.height;n++)e.board[n].type==="empty"&&t.indexOf(n)===-1&&s.push(n);const l=s[Et(0,s.length)];e.board[l].type="mine"},Tt=e=>{for(let t=0;t<e.width;t++)for(let s=0;s<e.height;s++){let l=0;for(let a=0;a<9;a++){const f=Math.floor(a/3)-1,u=a%3-1,_=t+f,c=s+u;if(_<0||_>=e.width||c<0||c>=e.height)continue;const r=c*e.width+_;e.board[r].type==="mine"&&(l+=1)}const n=s*e.width+t;e.board[n].numNeighborMines=l}};function Ve(e,{delay:t=0,duration:s=400,easing:l=nt}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:s,easing:l,css:a=>`opacity: ${a*n}`}}const Rt=""+new URL("../assets/check-ce7a5ec0.svg",import.meta.url).href;function ze(e){let t,s,l,n;return{c(){t=v("img"),this.h()},l(a){t=E(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ye(t.src,s=Rt)||d(t,"src",s),d(t,"alt",""),d(t,"class","svelte-zd59fy")},m(a,f){K(a,t,f),n=!0},p:pe,i(a){n||(a&&rt(()=>{l||(l=Ae(t,Ve,{duration:50},!0)),l.run(1)}),n=!0)},o(a){a&&(l||(l=Ae(t,Ve,{duration:50},!1)),l.run(0)),n=!1},d(a){a&&y(t),a&&l&&l.end()}}}function Pt(e){let t,s,l,n=`${e[1]}rem`,a=`${e[1]}rem`,f,u,_=[{type:"checkbox"},e[2]],c={};for(let i=0;i<_.length;i+=1)c=Se(c,_[i]);let r=e[0]&&ze();return{c(){t=v("div"),s=v("input"),l=O(),r&&r.c(),this.h()},l(i){t=E(i,"DIV",{class:!0});var o=I(t);s=E(o,"INPUT",{type:!0}),l=T(o),r&&r.l(o),o.forEach(y),this.h()},h(){Re(s,c),Y(s,"svelte-zd59fy",!0),d(t,"class","wrapper svelte-zd59fy"),H(t,"width",n,!1),H(t,"height",a,!1)},m(i,o){K(i,t,o),b(t,s),s.autofocus&&s.focus(),s.checked=e[0],b(t,l),r&&r.m(t,null),f||(u=Ue(s,"change",e[3]),f=!0)},p(i,[o]){Re(s,c=it(_,[{type:"checkbox"},o&4&&i[2]])),o&1&&(s.checked=i[0]),Y(s,"svelte-zd59fy",!0),i[0]?r?(r.p(i,o),o&1&&R(r,1)):(r=ze(),r.c(),R(r,1),r.m(t,null)):r&&(ot(),G(r,1,1,()=>{r=null}),at()),o&2&&n!==(n=`${i[1]}rem`)&&H(t,"width",n,!1),o&2&&a!==(a=`${i[1]}rem`)&&H(t,"height",a,!1)},i(i){R(r)},o(i){G(r)},d(i){i&&y(t),r&&r.d(),f=!1,u()}}}function At(e,t,s){let{checked:l}=t,{size:n=1.5}=t;function a(){l=this.checked,s(0,l)}return e.$$set=f=>{s(2,t=Se(Se({},t),Pe(f))),"checked"in f&&s(0,l=f.checked),"size"in f&&s(1,n=f.size)},t=Pe(t),[l,n,t,a]}class Kt extends re{constructor(t){super(),ce(this,t,At,Pt,fe,{checked:0,size:1})}}function Gt(e){let t,s,l;return{c(){t=v("canvas"),this.h()},l(n){t=E(n,"CANVAS",{width:!0,height:!0,class:!0}),I(t).forEach(y),this.h()},h(){d(t,"width",s=e[0].width+"px"),d(t,"height",l=e[0].height+"px"),d(t,"class","svelte-jhkqpr")},m(n,a){K(n,t,a),e[4](t)},p(n,[a]){a&1&&s!==(s=n[0].width+"px")&&d(t,"width",s),a&1&&l!==(l=n[0].height+"px")&&d(t,"height",l)},i:pe,o:pe,d(n){n&&y(t),e[4](null)}}}function Wt(e,t,s){let{showMines:l=!1}=t,{game:n}=t;const a={mine:"red",closed:"navy",empty:"blue",flag:"gold",clickedMine:"violet"};let f,u;ct(()=>{s(3,u=f.getContext("2d")),s(3,u.imageSmoothingEnabled=!1,u),u.clearRect(0,0,f.width,f.height)});function _(c){ft[c?"unshift":"push"](()=>{f=c,s(1,f)})}return e.$$set=c=>{"showMines"in c&&s(2,l=c.showMines),"game"in c&&s(0,n=c.game)},e.$$.update=()=>{if(e.$$.dirty&15&&u){const c=f.width/n.width,r=f.height/n.height;for(let i=0;i<n.width*n.height;i++){const o=n.board[i],g=i%n.width,M=Math.floor(i/n.height);i===n.lostToCell&&l?s(3,u.fillStyle=a.clickedMine,u):o.state===ve.Closed?s(3,u.fillStyle=a.closed,u):o.type===$e.Mine&&l?s(3,u.fillStyle=a.mine,u):o.state===ve.Flagged?s(3,u.fillStyle=a.flag,u):s(3,u.fillStyle=a.empty,u),u.fillRect(g*c,M*r,c,r)}}},[n,f,l,u,_]}class Qt extends re{constructor(t){super(),ce(this,t,Wt,Gt,fe,{showMines:2,game:0})}}export{ie as B,Kt as C,Lt as G,Qt as M,Xt as S,me as a,gt as b,ae as c,Dt as d,ve as e,Ze as f,oe as g,$e as h,Ot as i,xe as j,Ve as k,Jt as l,we as m,Yt as n,Me as o,Ke as p,Ut as q,Tt as r,Be as s,Bt as t,Z as u,jt as v};
