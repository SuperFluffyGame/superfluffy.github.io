var Ye=Object.defineProperty;var Ke=(e,t,s)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var U=(e,t,s)=>(Ke(e,typeof t!="symbol"?t+"":t,s),s);import{S as D,i as F,s as q,B as fe,k as b,a as k,l as S,m as E,c as M,h as m,n as h,I as ke,p as R,b as z,G as _,J as He,D as ue,E as de,F as he,f as N,t as A,K as ge,L as Qe,q as ee,v as te,r as se,w as le,x as ne,y as ie,M as We,N as Ze,O as _e,P as Me,Q as Ne,R as xe,g as $e,d as et,T as Ie,A as me,U as tt,V as Le,o as st,W as lt}from"./index-15bc321e.js";import{d as j,c as ae,w as W}from"./singletons-fb8f8fe6.js";const nt=""+new URL("../assets/stats-08c66cd3.svg",import.meta.url).href,it=""+new URL("../assets/settings-4a18c9a1.svg",import.meta.url).href,at=""+new URL("../assets/home-b3ebdf43.svg",import.meta.url).href;function Oe(e){let t,s;return{c(){t=b("img"),this.h()},l(l){t=S(l,"IMG",{src:!0,alt:!0,draggable:!0,class:!0}),this.h()},h(){ge(t.src,s=e[3])||h(t,"src",s),h(t,"alt",""),h(t,"draggable","false"),h(t,"class","svelte-1xmrl36")},m(l,n){z(l,t,n)},p(l,n){n&8&&!ge(t.src,s=l[3])&&h(t,"src",s)},d(l){l&&m(t)}}}function ot(e){let t,s,l,n=`${e[4]}rem`,a,u,c,f=e[1]==="icon"&&Oe(e);const d=e[7].default,o=fe(d,e,e[6],null);return{c(){t=b("button"),f&&f.c(),s=k(),o&&o.c(),this.h()},l(i){t=S(i,"BUTTON",{class:!0,title:!0});var r=E(t);f&&f.l(r),s=M(r),o&&o.l(r),r.forEach(m),this.h()},h(){t.disabled=e[0],h(t,"class",l=ke(["unstyled",e[1],e[2]].join(" "))+" svelte-1xmrl36"),h(t,"title",e[5]),R(t,"padding",n,!1)},m(i,r){z(i,t,r),f&&f.m(t,null),_(t,s),o&&o.m(t,null),a=!0,u||(c=He(t,"click",e[8]),u=!0)},p(i,[r]){i[1]==="icon"?f?f.p(i,r):(f=Oe(i),f.c(),f.m(t,s)):f&&(f.d(1),f=null),o&&o.p&&(!a||r&64)&&ue(o,d,i,i[6],a?he(d,i[6],r,null):de(i[6]),null),(!a||r&1)&&(t.disabled=i[0]),(!a||r&6&&l!==(l=ke(["unstyled",i[1],i[2]].join(" "))+" svelte-1xmrl36"))&&h(t,"class",l),(!a||r&32)&&h(t,"title",i[5]),r&16&&n!==(n=`${i[4]}rem`)&&R(t,"padding",n,!1)},i(i){a||(N(o,i),a=!0)},o(i){A(o,i),a=!1},d(i){i&&m(t),f&&f.d(),o&&o.d(i),u=!1,c()}}}function rt(e,t,s){let{$$slots:l={},$$scope:n}=t,{disabled:a=!1}=t,{type:u="normal"}=t,{size:c="medium"}=t,{iconSrc:f=""}=t,{padding:d=null}=t,{title:o=null}=t;function i(r){Qe.call(this,e,r)}return e.$$set=r=>{"disabled"in r&&s(0,a=r.disabled),"type"in r&&s(1,u=r.type),"size"in r&&s(2,c=r.size),"iconSrc"in r&&s(3,f=r.iconSrc),"padding"in r&&s(4,d=r.padding),"title"in r&&s(5,o=r.title),"$$scope"in r&&s(6,n=r.$$scope)},[a,u,c,f,d,o,n,l,i]}class oe extends D{constructor(t){super(),F(this,t,rt,ot,q,{disabled:0,type:1,size:2,iconSrc:3,padding:4,title:5})}}j.disable_scroll_handling;const re=j.goto;j.invalidate;j.invalidateAll;j.prefetch;j.prefetch_routes;j.before_navigate;j.after_navigate;const Re="",Ae="Minesweeper",je="SFG + TMH Games";function ct(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}function Tt(e){const t=Math.floor(e/3600),s=Math.floor(e/60)%60,l=e%60;let n="";return t>0&&(n+=t.toString().padStart(2,"0")+":"),n+=s.toString().padStart(2,"0")+":",n+=l.toString().padStart(2,"0"),n}const ft=e=>({}),Ge=e=>({}),ut=e=>({}),Te=e=>({});function dt(e){let t,s,l,n,a,u,c,f,d,o,i,r,w,C,I,X,V,Y,K,G,Q,T,Z,L;i=new oe({props:{type:"icon",size:"large",iconSrc:at,padding:.2,title:"Home"}}),i.$on("click",e[2]),w=new oe({props:{type:"icon",size:"large",iconSrc:nt,padding:.2,title:"Stats"}}),w.$on("click",e[3]),I=new oe({props:{type:"icon",size:"large",iconSrc:it,padding:.2,title:"Settings"}}),I.$on("click",e[4]);const x=e[1].sidebar,y=fe(x,e,e[0],Te),$=e[1].content,p=fe($,e,e[0],Ge);return{c(){t=b("main"),s=b("aside"),l=b("header"),n=b("h1"),a=ee(Ae),u=k(),c=b("h3"),f=ee(je),d=k(),o=b("div"),te(i.$$.fragment),r=k(),te(w.$$.fragment),C=k(),te(I.$$.fragment),X=k(),V=b("hr"),Y=k(),y&&y.c(),K=k(),G=b("div"),p&&p.c(),Q=k(),T=b("footer"),Z=ee(Re),this.h()},l(g){t=S(g,"MAIN",{class:!0});var v=E(t);s=S(v,"ASIDE",{class:!0});var O=E(s);l=S(O,"HEADER",{class:!0});var J=E(l);n=S(J,"H1",{id:!0,class:!0});var pe=E(n);a=se(pe,Ae),pe.forEach(m),u=M(J),c=S(J,"H3",{id:!0,class:!0});var ve=E(c);f=se(ve,je),ve.forEach(m),J.forEach(m),d=M(O),o=S(O,"DIV",{class:!0});var P=E(o);le(i.$$.fragment,P),r=M(P),le(w.$$.fragment,P),C=M(P),le(I.$$.fragment,P),P.forEach(m),X=M(O),V=S(O,"HR",{class:!0}),Y=M(O),y&&y.l(O),O.forEach(m),K=M(v),G=S(v,"DIV",{class:!0});var Ee=E(G);p&&p.l(Ee),Ee.forEach(m),Q=M(v),T=S(v,"FOOTER",{class:!0});var we=E(T);Z=se(we,Re),we.forEach(m),v.forEach(m),this.h()},h(){h(n,"id","title"),h(n,"class","svelte-1lkzwj2"),h(c,"id","creator"),h(c,"class","svelte-1lkzwj2"),h(l,"class","svelte-1lkzwj2"),h(o,"class","menus svelte-1lkzwj2"),h(V,"class","svelte-1lkzwj2"),h(s,"class","sidebar svelte-1lkzwj2"),h(G,"class","content svelte-1lkzwj2"),h(T,"class","version svelte-1lkzwj2"),h(t,"class","wrapper svelte-1lkzwj2")},m(g,v){z(g,t,v),_(t,s),_(s,l),_(l,n),_(n,a),_(l,u),_(l,c),_(c,f),_(s,d),_(s,o),ne(i,o,null),_(o,r),ne(w,o,null),_(o,C),ne(I,o,null),_(s,X),_(s,V),_(s,Y),y&&y.m(s,null),_(t,K),_(t,G),p&&p.m(G,null),_(t,Q),_(t,T),_(T,Z),L=!0},p(g,[v]){y&&y.p&&(!L||v&1)&&ue(y,x,g,g[0],L?he(x,g[0],v,ut):de(g[0]),Te),p&&p.p&&(!L||v&1)&&ue(p,$,g,g[0],L?he($,g[0],v,ft):de(g[0]),Ge)},i(g){L||(N(i.$$.fragment,g),N(w.$$.fragment,g),N(I.$$.fragment,g),N(y,g),N(p,g),L=!0)},o(g){A(i.$$.fragment,g),A(w.$$.fragment,g),A(I.$$.fragment,g),A(y,g),A(p,g),L=!1},d(g){g&&m(t),ie(i),ie(w),ie(I),y&&y.d(g),p&&p.d(g)}}}function ht(e,t,s){let{$$slots:l={},$$scope:n}=t;const a=()=>{re(`${ae}`)},u=()=>{re(`${ae}/stats`)},c=()=>{re(`${ae}/settings`)};return e.$$set=f=>{"$$scope"in f&&s(0,n=f.$$scope)},[n,l,a,u,c]}class Pt extends D{constructor(t){super(),F(this,t,ht,dt,q,{})}}var be=(e=>(e.Closed="closed",e.Opened="opened",e.Flagged="flagged",e))(be||{}),Ve=(e=>(e.Empty="empty",e.Mine="mine",e))(Ve||{}),gt=(e=>(e.Playing="playing",e.Won="won",e.Lost="lost",e))(gt||{}),Lt,Ot,Rt;class ce{}Lt=8,Ot=12,Rt=16,U(ce,Lt,{width:8,height:8,numMines:10}),U(ce,Ot,{width:12,height:12,numMines:20}),U(ce,Rt,{width:16,height:16,numMines:40});const zt=e=>{const t=Array(e.width*e.height);for(let l=0;l<e.height*e.width;l++)t[l]={state:"closed",numNeighborMines:0,type:"empty"};const s={board:t,...e,firstMove:!0,state:"playing",lostToCell:-1,title:"Save Game ",stats:{timePlayed:0}};for(let l=0;l<e.numMines;l++)_t(s);return mt(s),s},_t=(e,t=[])=>{const s=[];for(let n=0;n<e.width*e.height;n++)e.board[n].type==="empty"&&t.indexOf(n)===-1&&s.push(n);const l=s[ct(0,s.length)];e.board[l].type="mine"},mt=e=>{for(let t=0;t<e.width;t++)for(let s=0;s<e.height;s++){let l=0;for(let a=0;a<9;a++){const u=Math.floor(a/3)-1,c=a%3-1,f=t+u,d=s+c;if(f<0||f>=e.width||d<0||d>=e.height)continue;const o=d*e.width+f;e.board[o].type==="mine"&&(l+=1)}const n=s*e.width+t;e.board[n].numNeighborMines=l}},Je="MINESWEEPER_OVERALL_STATS",bt=()=>{var s,l,n,a;const e=JSON.parse((s=localStorage[Je])!=null?s:"{}");return{gamesWon:(l=e==null?void 0:e.gamesWon)!=null?l:0,gamesLost:(n=e==null?void 0:e.gamesLost)!=null?n:0,cellsOpened:(a=e==null?void 0:e.cellsOpened)!=null?a:0}},St=e=>{localStorage[Je]=JSON.stringify(e)},Ue="MINESWEEPER_SETTINGS",Ct=[0,5,10,15,20],yt=[{hue:200,accent:"darkcyan",cellHue:200,light:!1},{hue:100,accent:"green",cellHue:100,light:!1},{hue:300,accent:"darkviolet",cellHue:300,light:!1},{hue:0,accent:"coral",cellHue:0,light:!1},{hue:50,accent:"gold",cellHue:70,light:!1}],pt=()=>{var s,l,n;const e=JSON.parse((s=localStorage[Ue])!=null?s:"{}");return{theme:(l=e==null?void 0:e.theme)!=null?l:0,saturation:(n=e==null?void 0:e.saturation)!=null?n:5}},vt=e=>{localStorage[Ue]=JSON.stringify(e)},Be="MINESWEEPER_SAVE_SLOTS";let Se=W(null);Se.subscribe(e=>{if(typeof window<"u"&&e!=null){let t=We(B);qe(t,e)}});let B=W(-1);B.subscribe(e=>{e!==-1&&Se.set(Et(e))});let H=W();var Ce;typeof window<"u"&&H.set(JSON.parse((Ce=localStorage[Be])!=null?Ce:"[]").map(e=>({index:e,selected:!1})));H.subscribe(e=>{typeof window>"u"||e==null||(localStorage[Be]=JSON.stringify(e.map(t=>t.index)))});const De=W();typeof window<"u"&&De.set(bt());De.subscribe(e=>{typeof window>"u"||e==null||St(e)});const Fe=W();typeof window<"u"&&Fe.set(pt());Fe.subscribe(e=>{if(typeof window>"u"||e==null)return;const t=yt[e.theme];document.documentElement.style.setProperty("--brand-hue",""+t.hue),document.documentElement.style.setProperty("--sat-mul",""+e.saturation),document.documentElement.style.setProperty("--accent",""+t.accent),document.documentElement.style.setProperty("--cell-hue",""+t.cellHue),vt(e)});const ye="MINESWEEPER_SAVE_GAME",Et=e=>{let t=localStorage[ye+`_${e}`];return t?JSON.parse(t):null},qe=(e,t)=>{Xe(e),localStorage[ye+`_${e}`]=JSON.stringify(t)},Xe=e=>{localStorage.removeItem(ye+`_${e}`)},Ht=e=>{H.update(t=>(t.splice(t.findIndex(s=>s.index===e),1),t)),Xe(e)},Wt=e=>{let t=We(H),s;for(let l=0;;l++)if(t.findIndex(n=>n.index===l)===-1){s=l;break}e.title+=s,qe(s,e),B.set(-1),B.set(s),H.update(l=>(l.push({index:s,selected:!1}),l)),Se.set(e)};function Pe(e,{delay:t=0,duration:s=400,easing:l=Ze}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:s,easing:l,css:a=>`opacity: ${a*n}`}}const wt=""+new URL("../assets/check-ce7a5ec0.svg",import.meta.url).href;function ze(e){let t,s,l,n;return{c(){t=b("img"),this.h()},l(a){t=S(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ge(t.src,s=wt)||h(t,"src",s),h(t,"alt",""),h(t,"class","svelte-vyg07j")},m(a,u){z(a,t,u),n=!0},p:me,i(a){n||(a&&tt(()=>{l||(l=Le(t,Pe,{duration:50},!0)),l.run(1)}),n=!0)},o(a){a&&(l||(l=Le(t,Pe,{duration:50},!1)),l.run(0)),n=!1},d(a){a&&m(t),a&&l&&l.end()}}}function kt(e){let t,s,l,n=`${e[2]}rem`,a=`${e[2]}rem`,u,c,f=[{type:"checkbox"},e[3]],d={};for(let i=0;i<f.length;i+=1)d=_e(d,f[i]);let o=e[0]&&ze();return{c(){t=b("div"),s=b("input"),l=k(),o&&o.c(),this.h()},l(i){t=S(i,"DIV",{class:!0});var r=E(t);s=S(r,"INPUT",{type:!0}),l=M(r),o&&o.l(r),r.forEach(m),this.h()},h(){Me(s,d),R(s,"border-color",e[1],!1),Ne(s,"svelte-vyg07j",!0),h(t,"class","wrapper svelte-vyg07j"),R(t,"width",n,!1),R(t,"height",a,!1)},m(i,r){z(i,t,r),_(t,s),s.autofocus&&s.focus(),s.checked=e[0],_(t,l),o&&o.m(t,null),u||(c=He(s,"change",e[4]),u=!0)},p(i,[r]){Me(s,d=xe(f,[{type:"checkbox"},r&8&&i[3]])),r&1&&(s.checked=i[0]),R(s,"border-color",i[1],!1),Ne(s,"svelte-vyg07j",!0),i[0]?o?(o.p(i,r),r&1&&N(o,1)):(o=ze(),o.c(),N(o,1),o.m(t,null)):o&&($e(),A(o,1,1,()=>{o=null}),et()),r&4&&n!==(n=`${i[2]}rem`)&&R(t,"width",n,!1),r&4&&a!==(a=`${i[2]}rem`)&&R(t,"height",a,!1)},i(i){N(o)},o(i){A(o)},d(i){i&&m(t),o&&o.d(),u=!1,c()}}}function Mt(e,t,s){let{checked:l}=t,{borderColor:n="black"}=t,{size:a=1.5}=t;function u(){l=this.checked,s(0,l)}return e.$$set=c=>{s(3,t=_e(_e({},t),Ie(c))),"checked"in c&&s(0,l=c.checked),"borderColor"in c&&s(1,n=c.borderColor),"size"in c&&s(2,a=c.size)},t=Ie(t),[l,n,a,t,u]}class Vt extends D{constructor(t){super(),F(this,t,Mt,kt,q,{checked:0,borderColor:1,size:2})}}function Nt(e){let t,s,l;return{c(){t=b("canvas"),this.h()},l(n){t=S(n,"CANVAS",{width:!0,height:!0,class:!0}),E(t).forEach(m),this.h()},h(){h(t,"width",s=e[0].width+"px"),h(t,"height",l=e[0].height+"px"),h(t,"class","svelte-jhkqpr")},m(n,a){z(n,t,a),e[4](t)},p(n,[a]){a&1&&s!==(s=n[0].width+"px")&&h(t,"width",s),a&1&&l!==(l=n[0].height+"px")&&h(t,"height",l)},i:me,o:me,d(n){n&&m(t),e[4](null)}}}function It(e,t,s){let{showMines:l=!1}=t,{game:n}=t;const a={mine:"red",closed:"navy",empty:"blue",flag:"gold",clickedMine:"violet"};let u,c;st(()=>{s(3,c=u.getContext("2d")),s(3,c.imageSmoothingEnabled=!1,c),c.clearRect(0,0,u.width,u.height)});function f(d){lt[d?"unshift":"push"](()=>{u=d,s(1,u)})}return e.$$set=d=>{"showMines"in d&&s(2,l=d.showMines),"game"in d&&s(0,n=d.game)},e.$$.update=()=>{if(e.$$.dirty&15&&c){const d=u.width/n.width,o=u.height/n.height;for(let i=0;i<n.width*n.height;i++){const r=n.board[i],w=i%n.width,C=Math.floor(i/n.height);i===n.lostToCell&&l?s(3,c.fillStyle=a.clickedMine,c):r.state===be.Closed?s(3,c.fillStyle=a.closed,c):r.type===Ve.Mine&&l?s(3,c.fillStyle=a.mine,c):r.state===be.Flagged?s(3,c.fillStyle=a.flag,c):s(3,c.fillStyle=a.empty,c),c.fillRect(w*d,C*o,d,o)}}},[n,u,l,c,f]}class Jt extends D{constructor(t){super(),F(this,t,It,Nt,q,{showMines:2,game:0})}}export{oe as B,Vt as C,gt as G,Jt as M,Pt as S,ce as a,Et as b,B as c,Ht as d,be as e,Ve as f,re as g,_t as h,Pe as i,Se as j,Fe as k,Wt as l,yt as m,zt as n,Ct as o,mt as r,De as s,Tt as t,H as u};
